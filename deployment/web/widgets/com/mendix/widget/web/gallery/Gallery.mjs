var e;function t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}import{jsx as n,jsxs as i}from"react/jsx-runtime";import r,{useMemo as o,useEffect as s,useRef as a,useState as l,createContext as u,forwardRef as c,memo as h,Fragment as d,useContext as f,useCallback as v,useLayoutEffect as g}from"react";import{unstable_batchedUpdates as p}from"react-dom";import{and as _}from"mendix/filters/builders";const m=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class b{constructor(e,n){t(this,"trigger",void 0),t(this,"listAction",void 0),t(this,"onExecuteAction",e=>{this.listAction&&"get"in this.listAction&&m(this.listAction.get(e))}),this.trigger=e,this.listAction=n}get clickTrigger(){return this.listAction?this.trigger:"none"}update(e){this.listAction=e}}function y(e,t){return"".concat(e,",").concat(t)}function w(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}class S{constructor(e,n){t(this,"_listeners",void 0),t(this,"_focusTarget",void 0),t(this,"_positionController",void 0),t(this,"_layout",void 0),t(this,"dispatch",e=>{const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))}),this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=n}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(w(this._focusTarget))&&this._setTarget(this._getInitPosition())}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return y(0,0)}}const O=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const A={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,i]=e;return[n,Math.max(0,i-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[i,r]=e;return[i,Math.min(n-1,r+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:i}=n;return i?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:i}=n;return i?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class P{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!O.has(n))return;var n;if(!Object.hasOwn(A,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const i=w(this._getTargetPosition(e));return t.get(A[e.code](i,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}class x{constructor(e,n,i){t(this,"rows",void 0),t(this,"columns",void 0),t(this,"pageSize",void 0),t(this,"_positions",void 0),this.columns=n,this.rows=e,this.pageSize=i,this._positions=new Set;for(let t=0;t<e;t+=1)for(let e=0;e<n;e+=1)this._positions.add(y(e,t))}get(e){let[t,n]=e;const i=y(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(i))return i}}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var T={};function E(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:T}var I=Object.assign,N=Object.getOwnPropertyDescriptor,k=Object.defineProperty,j=Object.prototype,M=[];Object.freeze(M);var V={};Object.freeze(V);var L="undefined"!=typeof Proxy,R=Object.toString();function D(){L||C("Proxy not available")}function B(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var K=function(){};function H(e){return"function"==typeof e}function F(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function U(e){return null!==e&&"object"==typeof e}function z(e){if(!U(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===R}function q(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function G(e,t,n){k(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function J(e,t,n){k(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function W(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return U(e)&&!0===e[n]}}function Y(e){return e instanceof Map}function X(e){return e instanceof Set}var $=void 0!==Object.getOwnPropertySymbols;var Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:$?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Q(e){return null===e?null:"object"==typeof e?""+e:e}function ee(e,t){return j.hasOwnProperty.call(e,t)}var te=Object.getOwnPropertyDescriptors||function(e){var t={};return Z(e).forEach(function(n){t[n]=N(e,n)}),t};function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ce(i.key),i)}}function ie(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},re.apply(this,arguments)}function oe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,se(e,t)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ce(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var he=Symbol("mobx-stored-annotations");function de(e){return Object.assign(function(t,n){if(ve(n))return e.decorate_20223_(t,n);fe(t,n,e)},e)}function fe(e,t,n){ee(e,he)||G(e,he,re({},e[he])),function(e){return e.annotationType_===Se}(n)||(e[he][t]=n)}function ve(e){return"object"==typeof e&&"string"==typeof e.kind}var ge=Symbol("mobx administration"),pe=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=St.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.reportObserved=function(){return Gt(this)},t.reportChanged=function(){zt(),Jt(this),qt()},t.toString=function(){return this.name_},e}(),_e=W("Atom",pe);function me(e,t,n){void 0===t&&(t=K),void 0===n&&(n=K);var i,r=new pe(e);return t!==K&&bn(pn,r,t,i),n!==K&&mn(r,n),r}var be={identity:function(e,t){return e===t},structural:function(e,t){return Ki(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Ki(e,t,1)}};function ye(e,t,n){return Nn(e)?e:Array.isArray(e)?ot.array(e,{name:n}):z(e)?ot.object(e,void 0,{name:n}):Y(e)?ot.map(e,{name:n}):X(e)?ot.set(e,{name:n}):"function"!=typeof e||hn(e)||In(e)?e:q(e)?Tn(e):cn(n,e)}function we(e){return e}var Se="override";function Oe(e,t){return{annotationType_:e,options_:t,make_:Ae,extend_:Pe,decorate_20223_:xe}}function Ae(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(hn(n.value))return 1;var o=Ce(e,this,t,n,!1);return k(i,t,o),2}function Pe(e,t,n,i){var r=Ce(e,this,t,n);return e.defineProperty_(t,r,i)}function xe(e,t){var n=t.kind,i=t.name,r=t.addInitializer,o=this;if("field"!=n){var s,a,l,u,c,h;if("method"==n)return hn(e)||(a=e,e=gt(null!=(l=null==(u=o.options_)?void 0:u.name)?l:i.toString(),a,null!=(c=null==(h=o.options_)?void 0:h.autoAction)&&c)),null!=(s=this.options_)&&s.bound&&r(function(){var e=this,t=e[i].bind(e);t.isMobxAction=!0,e[i]=t}),e;C("Cannot apply '"+o.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else r(function(){fe(this,i,o)})}function Ce(e,t,n,i,r){var o,s,a,l,u,c,h,d;void 0===r&&(r=Kt.safeDescriptors),d=i,t.annotationType_,d.value;var f,v=i.value;null!=(o=t.options_)&&o.bound&&(v=v.bind(null!=(f=e.proxy_)?f:e.target_));return{value:gt(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),v,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function Te(e,t){return{annotationType_:e,options_:t,make_:Ee,extend_:Ie,decorate_20223_:Ne}}function Ee(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!ee(e.target_,t)||!In(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(In(n.value))return 1;var o=ke(e,this,t,n,!1,!1);return k(i,t,o),2}function Ie(e,t,n,i){var r,o=ke(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,o,i)}function Ne(e,t){var n,i=t.name,r=t.addInitializer;return In(e)||(e=Tn(e)),null!=(n=this.options_)&&n.bound&&r(function(){var e=this,t=e[i].bind(e);t.isMobXFlow=!0,e[i]=t}),e}function ke(e,t,n,i,r,o){var s;void 0===o&&(o=Kt.safeDescriptors),s=i,t.annotationType_,s.value;var a,l=i.value;(In(l)||(l=Tn(l)),r)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function je(e,t){return{annotationType_:e,options_:t,make_:Me,extend_:Ve,decorate_20223_:Le}}function Me(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Ve(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,re({},this.options_,{get:n.get,set:n.set}),i)}function Le(e,t){var n=this,i=t.name;return(0,t.addInitializer)(function(){var t=bi(this)[ge],r=re({},n.options_,{get:e,context:this});r.name||(r.name="ObservableObject."+i.toString()),t.values_.set(i,new At(r))}),function(){return this[ge].getObservablePropValue_(i)}}function Re(e,t){return{annotationType_:e,options_:t,make_:De,extend_:Be,decorate_20223_:Ke}}function De(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Be(e,t,n,i){var r,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(o=this.options_)?void 0:o.enhancer)?r:ye,i)}function Ke(e,t){var n=this,i=t.kind,r=t.name,o=new WeakSet;function s(e,t){var i,s,a=bi(e)[ge],l=new wt(t,null!=(i=null==(s=n.options_)?void 0:s.enhancer)?i:ye,"ObservableObject."+r.toString(),!1);a.values_.set(r,l),o.add(e)}if("accessor"==i)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[ge].getObservablePropValue_(r)},set:function(e){return o.has(this)||s(this,e),this[ge].setObservablePropValue_(r,e)},init:function(e){return o.has(this)||s(this,e),e}}}var He="true",Fe=Ue();function Ue(e){return{annotationType_:He,options_:e,make_:ze,extend_:qe,decorate_20223_:Ge}}function ze(e,t,n,i){var r,o,s,a;if(n.get)return ut.make_(e,t,n,i);if(n.set){var l=gt(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!Kt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(k(i,t,{configurable:!0,set:l}),2)}if(i!==e.target_&&"function"==typeof n.value)return q(n.value)?(null!=(a=this.options_)&&a.autoBind?Tn.bound:Tn).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?cn.bound:cn).make_(e,t,n,i);var u,c=!1===(null==(r=this.options_)?void 0:r.deep)?ot.ref:ot;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return c.make_(e,t,n,i)}function qe(e,t,n,i){var r,o,s;if(n.get)return ut.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!Kt.safeDescriptors||e.isPlainObject_,set:gt(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?ot.ref:ot).extend_(e,t,n,i)}function Ge(e,t){C("'"+this.annotationType_+"' cannot be used as a decorator")}var Je={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function We(e){return e||Je}Object.freeze(Je);var Ye=Re("observable"),Xe=Re("observable.ref",{enhancer:we}),$e=Re("observable.shallow",{enhancer:function(e,t,n){return null==e||Si(e)||oi(e)||di(e)||gi(e)?e:Array.isArray(e)?ot.array(e,{name:n,deep:!1}):z(e)?ot.object(e,void 0,{name:n,deep:!1}):Y(e)?ot.map(e,{name:n,deep:!1}):X(e)?ot.set(e,{name:n,deep:!1}):void 0}}),Ze=Re("observable.struct",{enhancer:function(e,t){return Ki(e,t)?t:e}}),Qe=de(Ye);function et(e){return!0===e.deep?ye:!1===e.deep?we:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:ye;var t,n,i}function tt(e,t,n){return ve(t)?Ye.decorate_20223_(e,t):F(t)?void fe(e,t,Ye):Nn(e)?e:z(e)?ot.object(e,t,n):Array.isArray(e)?ot.array(e,t):Y(e)?ot.map(e,t):X(e)?ot.set(e,t):"object"==typeof e&&null!==e?e:ot.box(e,t)}I(tt,Qe);var nt,it,rt={box:function(e,t){var n=We(t);return new wt(e,et(n),n.name,!0,n.equals)},array:function(e,t){var n=We(t);return(!1===Kt.useProxies||!1===n.proxy?Mi:Xn)(e,et(n),n.name)},map:function(e,t){var n=We(t);return new hi(e,et(n),n.name)},set:function(e,t){var n=We(t);return new vi(e,et(n),n.name)},object:function(e,t,n){return Di(function(){return Sn(!1===Kt.useProxies||!1===(null==n?void 0:n.proxy)?bi({},n):function(e,t){var n,i;return D(),e=bi(e,t),null!=(i=(n=e[ge]).proxy_)?i:n.proxy_=new Proxy(e,Ln)}({},n),e,t)})},ref:de(Xe),shallow:de($e),deep:Qe,struct:de(Ze)},ot=I(tt,rt),st="computed",at=je(st),lt=je("computed.struct",{equals:be.structural}),ut=function(e,t){if(ve(t))return at.decorate_20223_(e,t);if(F(t))return fe(e,t,at);if(z(e))return de(je(st,e));var n=z(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new At(n)};Object.assign(ut,at),ut.struct=de(lt);var ct,ht=0,dt=1,ft=null!=(nt=null==(it=N(function(){},"name"))?void 0:it.configurable)&&nt,vt={value:"action",configurable:!0,writable:!1,enumerable:!1};function gt(e,t,n,i){function r(){return pt(e,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,r.toString=function(){return t.toString()},ft&&(vt.value=e,k(r,"name",vt)),r}function pt(e,t,n,i,r){var o=function(e,t){var n=!1,i=0,r=Kt.trackingDerivation,o=!t||!r;zt();var s=Kt.allowStateChanges;o&&(kt(),s=mt(!0));var a=Mt(!0),l={runAsAction_:o,prevDerivation_:r,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:i,actionId_:dt++,parentActionId_:ht};return ht=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw o.error_=e,e}finally{!function(e){ht!==e.actionId_&&C(30);ht=e.parentActionId_,void 0!==e.error_&&(Kt.suppressReactionErrors=!0);bt(e.prevAllowStateChanges_),Vt(e.prevAllowStateReads_),qt(),e.runAsAction_&&jt(e.prevDerivation_);Kt.suppressReactionErrors=!1}(o)}}function _t(e,t){var n=mt(e);try{return t()}finally{bt(n)}}function mt(e){var t=Kt.allowStateChanges;return Kt.allowStateChanges=e,t}function bt(e){Kt.allowStateChanges=e}ct=Symbol.toPrimitive;var yt,wt=function(e){function t(t,n,i,r,o){var s;return void 0===i&&(i="ObservableValue"),void 0===o&&(o=be.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=o,s.value_=n(t,void 0,i),s}oe(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==Kt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Rn(this)){var t=Bn(this,{object:this,type:Jn,newValue:e});if(!t)return Kt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Kt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Kn(this)&&Fn(this,{type:Jn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Dn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Jn,newValue:this.value_,oldValue:void 0}),Hn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Q(this.get())},n[ct]=function(){return this.valueOf()},t}(pe);yt=Symbol.toPrimitive;var St,Ot,At=function(){function e(e){this.dependenciesState_=St.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=St.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new xt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ot.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||C(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=gt("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?be.structural:be.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==St.UP_TO_DATE_)return;e.lowestObserverState_=St.POSSIBLY_STALE_,e.observers_.forEach(function(e){e.dependenciesState_===St.UP_TO_DATE_&&(e.dependenciesState_=St.POSSIBLY_STALE_,e.onBecomeStale_())})}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.get=function(){if(this.isComputing_&&C(32,this.name_,this.derivation),0!==Kt.inBatch||0!==this.observers_.size||this.keepAlive_){if(Gt(this),Tt(this)){var e=Kt.trackingContext;this.keepAlive_&&!e&&(Kt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===St.STALE_)return;e.lowestObserverState_=St.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===St.POSSIBLY_STALE_?t.dependenciesState_=St.STALE_:t.dependenciesState_===St.UP_TO_DATE_&&(e.lowestObserverState_=St.UP_TO_DATE_)})}(this),Kt.trackingContext=e}}else Tt(this)&&(this.warnAboutUntrackedRead_(),zt(),this.value_=this.computeValue_(!1),qt());var t=this.value_;if(Ct(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&C(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else C(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===St.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Ct(e)||Ct(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=mt(!1);if(e)t=Et(this,this.derivation,this.scope_);else if(!0===Kt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new xt(e)}return bt(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(It(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return dn(function(){var o=n.get();if(!i||t){var s=kt();e({observableKind:"computed",debugObjectName:n.name_,type:Jn,object:n,newValue:o,oldValue:r}),jt(s)}i=!1,r=o})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Q(this.get())},t[yt]=function(){return this.valueOf()},e}(),Pt=W("ComputedValue",At);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(St||(St={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Ot||(Ot={}));var xt=function(e){this.cause=void 0,this.cause=e};function Ct(e){return e instanceof xt}function Tt(e){switch(e.dependenciesState_){case St.UP_TO_DATE_:return!1;case St.NOT_TRACKING_:case St.STALE_:return!0;case St.POSSIBLY_STALE_:for(var t=Mt(!0),n=kt(),i=e.observing_,r=i.length,o=0;o<r;o++){var s=i[o];if(Pt(s)){if(Kt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return jt(n),Vt(t),!0}if(e.dependenciesState_===St.STALE_)return jt(n),Vt(t),!0}}return Lt(e),jt(n),Vt(t),!1}}function Et(e,t,n){var i=Mt(!0);Lt(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Kt.runId;var r,o=Kt.trackingDerivation;if(Kt.trackingDerivation=e,Kt.inBatch++,!0===Kt.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new xt(e)}return Kt.inBatch--,Kt.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=St.UP_TO_DATE_,r=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>i&&(i=a.dependenciesState_)}n.length=r,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&Ft(l,e),l.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,Ht(u,e))}i!==St.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),Vt(i),r}function It(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Ft(t[n],e);e.dependenciesState_=St.NOT_TRACKING_}function Nt(e){var t=kt();try{return e()}finally{jt(t)}}function kt(){var e=Kt.trackingDerivation;return Kt.trackingDerivation=null,e}function jt(e){Kt.trackingDerivation=e}function Mt(e){var t=Kt.allowStateReads;return Kt.allowStateReads=e,t}function Vt(e){Kt.allowStateReads=e}function Lt(e){if(e.dependenciesState_!==St.UP_TO_DATE_){e.dependenciesState_=St.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=St.UP_TO_DATE_}}var Rt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Dt=!0,Bt=!1,Kt=function(){var e=E();return e.__mx_isolated_mobxInstanceCount>0&&!e.__mx_isolated_mobxGlobals&&(Dt=!1),e.__mx_isolated_mobxGlobals&&e.__mx_isolated_mobxGlobals.version!==(new Rt).version&&(Dt=!1),Dt?e.__mx_isolated_mobxGlobals?(e.__mx_isolated_mobxInstanceCount+=1,e.__mx_isolated_mobxGlobals.UNCHANGED||(e.__mx_isolated_mobxGlobals.UNCHANGED={}),e.__mx_isolated_mobxGlobals):(e.__mx_isolated_mobxInstanceCount=1,e.__mx_isolated_mobxGlobals=new Rt):(setTimeout(function(){Bt||C(35)},1),new Rt)}();function Ht(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Ft(e,t){e.observers_.delete(t),0===e.observers_.size&&Ut(e)}function Ut(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Kt.pendingUnobservations.push(e))}function zt(){Kt.inBatch++}function qt(){if(0===--Kt.inBatch){$t();for(var e=Kt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof At&&n.suspend_())}Kt.pendingUnobservations=[]}}function Gt(e){var t=Kt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Kt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Kt.inBatch>0&&Ut(e),!1)}function Jt(e){e.lowestObserverState_!==St.STALE_&&(e.lowestObserverState_=St.STALE_,e.observers_.forEach(function(e){e.dependenciesState_===St.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=St.STALE_}))}var Wt=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=St.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ot.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Kt.pendingReactions.push(this),$t())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){zt(),this.isScheduled_=!1;var e=Kt.trackingContext;if(Kt.trackingContext=this,Tt(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Kt.trackingContext=e,qt()}},t.track=function(e){if(!this.isDisposed_){zt(),this.isRunning_=!0;var t=Kt.trackingContext;Kt.trackingContext=this;var n=Et(this,e,void 0);Kt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&It(this),Ct(n)&&this.reportExceptionInDerivation_(n.cause),qt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Kt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Kt.suppressReactionErrors||console.error(n,e),Kt.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(zt(),It(this),qt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[ge]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),Yt=100,Xt=function(e){return e()};function $t(){Kt.inBatch>0||Kt.isRunningReactions||Xt(Zt)}function Zt(){Kt.isRunningReactions=!0;for(var e=Kt.pendingReactions,t=0;e.length>0;){++t===Yt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}Kt.isRunningReactions=!1}var Qt=W("Reaction",Wt);var en="action",tn="autoAction",nn="<unnamed action>",rn=Oe(en),on=Oe("action.bound",{bound:!0}),sn=Oe(tn,{autoAction:!0}),an=Oe("autoAction.bound",{autoAction:!0,bound:!0});function ln(e){return function(t,n){return H(t)?gt(t.name||nn,t,e):H(n)?gt(t,n,e):ve(n)?(e?sn:rn).decorate_20223_(t,n):F(n)?fe(t,n,e?sn:rn):F(t)?de(Oe(e?tn:en,{name:t,autoAction:e})):void 0}}var un=ln(!1);Object.assign(un,rn);var cn=ln(!0);function hn(e){return H(e)&&!0===e.isMobxAction}function dn(e,t){var n,i,r,o,s;void 0===t&&(t=V);var a,l=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new Wt(l,function(){this.track(h)},t.onError,t.requiresObservable);else{var u=vn(t),c=!1;a=new Wt(l,function(){c||(c=!0,u(function(){c=!1,a.isDisposed_||a.track(h)}))},t.onError,t.requiresObservable)}function h(){e(a)}return null!=(r=t)&&null!=(o=r.signal)&&o.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(cn,sn),un.bound=de(on),cn.bound=de(an);var fn=function(e){return e()};function vn(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:fn}function gn(e,t,n){var i,r,o,s;void 0===n&&(n=V);var a,l,u,c=null!=(i=n.name)?i:"Reaction",h=un(c,n.onError?(a=n.onError,l=t,function(){try{return l.apply(this,arguments)}catch(e){a.call(this,e)}}):t),d=!n.scheduler&&!n.delay,f=vn(n),v=!0,g=!1,p=n.compareStructural?be.structural:n.equals||be.default,_=new Wt(c,function(){v||d?m():g||(g=!0,f(m))},n.onError,n.requiresObservable);function m(){if(g=!1,!_.isDisposed_){var t=!1,i=u;_.track(function(){var n=_t(!1,function(){return e(_)});t=v||!p(u,n),u=n}),(v&&n.fireImmediately||!v&&t)&&h(u,i,_),v=!1}}return null!=(r=n)&&null!=(o=r.signal)&&o.aborted||_.schedule_(),_.getDisposer_(null==(s=n)?void 0:s.signal)}var pn="onBO",_n="onBUO";function mn(e,t,n){return bn(_n,e,t,n)}function bn(e,t,n,i){var r="function"==typeof i?Vi(t,n):Vi(t),o=H(i)?i:n,s=e+"L";return r[s]?r[s].add(o):r[s]=new Set([o]),function(){var e=r[s];e&&(e.delete(o),0===e.size&&delete r[s])}}var yn="always";function wn(e){!0===e.isolateGlobalState&&function(){if((Kt.pendingReactions.length||Kt.inBatch||Kt.isRunningReactions)&&C(36),Bt=!0,Dt){var e=E();0===--e.__mx_isolated_mobxInstanceCount&&(e.__mx_isolated_mobxGlobals=void 0),Kt=new Rt}}();var t,n,i=e.useProxies,r=e.enforceActions;if(void 0!==i&&(Kt.useProxies=i===yn||"never"!==i&&"undefined"!=typeof Proxy),"ifavailable"===i&&(Kt.verifyProxies=!0),void 0!==r){var o=r===yn?yn:"observed"===r;Kt.enforceActions=o,Kt.allowStateChanges=!0!==o&&o!==yn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(t){t in e&&(Kt[t]=!!e[t])}),Kt.allowStateReads=!Kt.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=Xt,Xt=function(e){return t(function(){return n(e)})})}function Sn(e,t,n,i){var r=te(t);return Di(function(){var t=bi(e,i)[ge];Z(r).forEach(function(e){t.extend_(e,r[e],!n||(!(e in n)||n[e]))})}),e}function On(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(On)),n}var An=0;function Pn(){this.message="FLOW_CANCELLED"}Pn.prototype=Object.create(Error.prototype);var xn=Te("flow"),Cn=Te("flow.bound",{bound:!0}),Tn=Object.assign(function(e,t){if(ve(t))return xn.decorate_20223_(e,t);if(F(t))return fe(e,t,xn);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=arguments,r=++An,o=un(i+" - runid: "+r+" - init",n).apply(this,t),s=void 0,a=new Promise(function(t,n){var a=0;function l(e){var t;s=void 0;try{t=un(i+" - runid: "+r+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=un(i+" - runid: "+r+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!H(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)});return a.cancel=un(i+" - runid: "+r+" - cancel",function(){try{s&&En(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(K,K),En(n),e(new Pn)}catch(t){e(t)}}),a};return r.isMobXFlow=!0,r},xn);function En(e){H(e.cancel)&&e.cancel()}function In(e){return!0===(null==e?void 0:e.isMobXFlow)}function Nn(e){return function(e,t){return!!e&&(void 0!==t?!!Si(e)&&e[ge].values_.has(t):Si(e)||!!e[ge]||_e(e)||Qt(e)||Pt(e))}(e)}function kn(e,t){void 0===t&&(t=void 0),zt();try{return e.apply(t)}finally{qt()}}function jn(e,t,n){return 1===arguments.length||t&&"object"==typeof t?function(e,t){var n,i,r;if(null!=t&&null!=(n=t.signal)&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var o=new Promise(function(n,o){var s,a=Mn(e,n,re({},t,{onError:o}));i=function(){a(),o(new Error("WHEN_CANCELLED"))},r=function(){a(),o(new Error("WHEN_ABORTED"))},null==t||null==(s=t.signal)||null==s.addEventListener||s.addEventListener("abort",r)}).finally(function(){var e;return null==t||null==(e=t.signal)||null==e.removeEventListener?void 0:e.removeEventListener("abort",r)});return o.cancel=i,o}(e,t):Mn(e,t,n||{})}function Mn(e,t,n){var i;if("number"==typeof n.timeout){var r=new Error("WHEN_TIMEOUT");i=setTimeout(function(){if(!s[ge].isDisposed_){if(s(),!n.onError)throw r;n.onError(r)}},n.timeout)}n.name="When";var o=gt("When-effect",t),s=dn(function(t){_t(!1,e)&&(t.dispose(),i&&clearTimeout(i),o())},n);return s}function Vn(e){return e[ge]}Tn.bound=de(Cn);var Ln={has:function(e,t){return Vn(e).has_(t)},get:function(e,t){return Vn(e).get_(t)},set:function(e,t,n){var i;return!!F(t)&&(null==(i=Vn(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!F(t)&&(null==(n=Vn(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=Vn(e).defineProperty_(t,n))||i},ownKeys:function(e){return Vn(e).ownKeys_()},preventExtensions:function(e){C(13)}};function Rn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Dn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),B(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function Bn(e,t){var n=kt();try{for(var i=[].concat(e.interceptors_||[]),r=0,o=i.length;r<o&&((t=i[r](t))&&!t.type&&C(14),t);r++);return t}finally{jt(n)}}function Kn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Hn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),B(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function Fn(e,t){var n=kt(),i=e.changeListeners_;if(i){for(var r=0,o=(i=i.slice()).length;r<o;r++)i[r](t);jt(n)}}function Un(e,t,n){return Di(function(){var i=bi(e,n)[ge];null!=t||(t=function(e){return ee(e,he)||G(e,he,re({},e[he])),e[he]}(e)),Z(t).forEach(function(e){return i.make_(e,t[e])})}),e}var zn=Symbol("mobx-keys");function qn(e,t,n){return z(e)?Sn(e,e,t,n):(Di(function(){var i=bi(e,n)[ge];if(!e[zn]){var r=Object.getPrototypeOf(e),o=new Set([].concat(Z(e),Z(r)));o.delete("constructor"),o.delete(ge),G(r,zn,o)}e[zn].forEach(function(e){return i.make_(e,!t||(!(e in t)||t[e]))})}),e)}var Gn="splice",Jn="update",Wn={get:function(e,t){var n=e[ge];return t===ge?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?ee($n,t)?$n[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[ge];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){C(15)}},Yn=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new pe(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Dn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Hn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&C("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&C(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&ji(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=M),Rn(this)){var o=Bn(this,{object:this.proxy_,type:Gn,index:e,removedCount:t,added:n});if(!o)return M;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map(function(e){return i.enhancer_(e,void 0)}),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=Kn(this),o=r||i?{observableKind:"array",object:this.proxy_,type:Jn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&Fn(this,o)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=Kn(this),o=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Gn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&Fn(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&C(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(Rn(this)){var r=Bn(this,{type:Jn,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function Xn(e,t,n,i){return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),D(),Di(function(){var r=new Yn(n,t,i,!1);J(r.values_,ge,r);var o=new Proxy(r.values_,Wn);return r.proxy_=o,e&&e.length&&r.spliceWithArray_(0,0,e),o})}var $n={clear:function(){return this.splice(0)},replace:function(e){var t=this[ge];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this[ge];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[ge].spliceWithArray_(e,t,n)},push:function(){for(var e=this[ge],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[ge].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ge],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Kt.trackingDerivation&&C(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Kt.trackingDerivation&&C(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[ge],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Zn(e,t){"function"==typeof Array.prototype[e]&&($n[e]=t(e))}function Qn(e){return function(){var t=this[ge];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function ei(e){return function(t,n){var i=this,r=this[ge];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e](function(e,r){return t.call(n,e,r,i)})}}function ti(e){return function(){var t=this,n=this[ge];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}Zn("at",Qn),Zn("concat",Qn),Zn("flat",Qn),Zn("includes",Qn),Zn("indexOf",Qn),Zn("join",Qn),Zn("lastIndexOf",Qn),Zn("slice",Qn),Zn("toString",Qn),Zn("toLocaleString",Qn),Zn("toSorted",Qn),Zn("toSpliced",Qn),Zn("with",Qn),Zn("every",ei),Zn("filter",ei),Zn("find",ei),Zn("findIndex",ei),Zn("findLast",ei),Zn("findLastIndex",ei),Zn("flatMap",ei),Zn("forEach",ei),Zn("map",ei),Zn("some",ei),Zn("toReversed",ei),Zn("reduce",ti),Zn("reduceRight",ti);var ni,ii,ri=W("ObservableArrayAdministration",Yn);function oi(e){return U(e)&&ri(e[ge])}var si={},ai="add",li="delete";ni=Symbol.iterator,ii=Symbol.toStringTag;var ui,ci,hi=function(){function e(e,t,n){var i=this;void 0===t&&(t=ye),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ge]=si,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,H(Map)||C(18),Di(function(){i.keysAtom_=me("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,e&&i.merge(e)})}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Kt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new wt(this.has_(e),we,"ObservableMap.key?",!1);this.hasMap_.set(e,i),mn(i,function(){return t.hasMap_.delete(e)})}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Rn(this)){var i=Bn(this,{type:n?Jn:ai,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Rn(this))&&!Bn(this,{type:li,object:this,name:e}))return!1;if(this.has_(e)){var n=Kn(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:li,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return kn(function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)}),n&&Fn(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Kt.UNCHANGED){var i=Kn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Jn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Fn(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,kn(function(){var i,r=new wt(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()});var i=Kn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:ai,object:this,name:e,newValue:t}:null;i&&Fn(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Ui({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return Ui({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[ni]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=ue(this);!(n=i()).done;){var r=n.value,o=r[0],s=r[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return di(e)&&(e=new Map(e)),kn(function(){z(e)?function(e){var t=Object.keys(e);if(!$)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(t){return j.propertyIsEnumerable.call(e,t)})):t}(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=e[0],i=e[1];return t.set(n,i)}):Y(e)?(e.constructor!==Map&&C(19,e),e.forEach(function(e,n){return t.set(n,e)})):null!=e&&C(20,e)}),this},t.clear=function(){var e=this;kn(function(){Nt(function(){for(var t,n=ue(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}})})},t.replace=function(e){var t=this;return kn(function(){for(var n,i=function(e){if(Y(e)||di(e))return e;if(Array.isArray(e))return new Map(e);if(z(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return C(21,e)}(e),r=new Map,o=!1,s=ue(t.data_.keys());!(n=s()).done;){var a=n.value;if(!i.has(a))if(t.delete(a))o=!0;else{var l=t.data_.get(a);r.set(a,l)}}for(var u,c=ue(i.entries());!(u=c()).done;){var h=u.value,d=h[0],f=h[1],v=t.data_.has(d);if(t.set(d,f),t.data_.has(d)){var g=t.data_.get(d);r.set(d,g),v||(o=!0)}}if(!o)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var p=t.data_.keys(),_=r.keys(),m=p.next(),b=_.next();!m.done;){if(m.value!==b.value){t.keysAtom_.reportChanged();break}m=p.next(),b=_.next()}t.data_=r}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Hn(this,e)},t.intercept_=function(e){return Dn(this,e)},ie(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:ii,get:function(){return"Map"}}]),e}(),di=W("ObservableMap",hi);var fi={};ui=Symbol.iterator,ci=Symbol.toStringTag;var vi=function(){function e(e,t,n){var i=this;void 0===t&&(t=ye),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[ge]=fi,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,H(Set)||C(22),this.enhancer_=function(e,i){return t(e,i,n)},Di(function(){i.atom_=me(i.name_),e&&i.replace(e)})}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;kn(function(){Nt(function(){for(var t,n=ue(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}})})},t.forEach=function(e,t){for(var n,i=ue(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,Rn(this))&&!Bn(this,{type:ai,object:this,newValue:e}))return this;if(!this.has(e)){kn(function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()});var n=Kn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:ai,object:this,newValue:e}:null;n&&Fn(this,i)}return this},t.delete=function(e){var t=this;if(Rn(this)&&!Bn(this,{type:li,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Kn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:li,object:this,oldValue:e}:null;return kn(function(){t.atom_.reportChanged(),t.data_.delete(e)}),n&&Fn(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Ui({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Ui({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return gi(e)&&(e=new Set(e)),kn(function(){Array.isArray(e)||X(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):null!=e&&C("Cannot initialize set from "+e)}),this},t.observe_=function(e,t){return Hn(this,e)},t.intercept_=function(e){return Dn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[ui]=function(){return this.values()},ie(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:ci,get:function(){return"Set"}}]),e}(),gi=W("ObservableSet",vi),pi=Object.create(null),_i="remove",mi=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=Fe),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new pe("ObservableObject.keys"),this.isPlainObject_=z(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof At)return n.set(t),!0;if(Rn(this)){var i=Bn(this,{type:Jn,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==Kt.UNCHANGED){var r=Kn(this),o=r?{type:Jn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Fn(this,o)}return!0},t.get_=function(e){return Kt.trackingDerivation&&!ee(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),ee(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Kt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new wt(e in this.target_,we,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[he])&&n[e])return;C(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==j;){var r=N(i,e);if(r){var o=t.make_(this,e,r,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}Oi(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&Oi(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{zt();var i=this.delete_(e);if(!i)return i;if(Rn(this)){var r=Bn(this,{object:this.proxy_||this.target_,name:e,type:ai,newValue:t.value});if(!r)return null;var o=r.newValue;t.value!==o&&(t=re({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else k(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{qt()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1),this.keysAtom_;try{zt();var r=this.delete_(e);if(!r)return r;if(Rn(this)){var o=Bn(this,{object:this.proxy_||this.target_,name:e,type:ai,newValue:t});if(!o)return null;t=o.newValue}var s=wi(e),a={configurable:!Kt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,a))return!1}else k(this.target_,e,a);var l=new wt(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{qt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{zt();var i=this.delete_(e);if(!i)return i;if(Rn(this))if(!Bn(this,{object:this.proxy_||this.target_,name:e,type:ai,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=wi(e),o={configurable:!Kt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else k(this.target_,e,o);this.values_.set(e,new At(t)),this.notifyPropertyAddition_(e,void 0)}finally{qt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!ee(this.target_,e))return!0;if(Rn(this)&&!Bn(this,{object:this.proxy_||this.target_,name:e,type:_i}))return null;try{var n,i;zt();var r,o=Kn(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(r=N(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof wt&&(a=s.value_),Jt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),o){var l={type:_i,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&Fn(this,l)}}finally{qt()}return!0},t.observe_=function(e,t){return Hn(this,e)},t.intercept_=function(e){return Dn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=Kn(this);if(r){var o=r?{type:ai,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&Fn(this,o)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Z(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function bi(e,t){var n;if(ee(e,ge))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new mi(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Ue(e):void 0}(t));return G(e,ge,r),e}var yi=W("ObservableObjectAdministration",mi);function wi(e){return pi[e]||(pi[e]={get:function(){return this[ge].getObservablePropValue_(e)},set:function(t){return this[ge].setObservablePropValue_(e,t)}})}function Si(e){return!!U(e)&&yi(e[ge])}function Oi(e,t,n){var i;null==(i=e.target_[he])||delete i[n]}var Ai,Pi,xi=Ni(0),Ci=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Ti=0,Ei=function(){};Ai=Ei,Pi=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Ai.prototype,Pi):void 0!==Ai.prototype.__proto__?Ai.prototype.__proto__=Pi:Ai.prototype=Pi;var Ii=function(e,t,n){function i(t,n,i,r){var o;return void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),o=e.call(this)||this,Di(function(){var e=new Yn(i,n,r,!0);e.proxy_=ae(o),J(ae(o),ge,e),t&&t.length&&o.spliceWithArray(0,0,t),Ci&&Object.defineProperty(ae(o),"0",xi)}),o}oe(i,e);var r=i.prototype;return r.concat=function(){this[ge].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map(function(e){return oi(e)?e.slice():e}))},r[n]=function(){var e=this,t=0;return Ui({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},ie(i,[{key:"length",get:function(){return this[ge].getArrayLength_()},set:function(e){this[ge].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(Ei,Symbol.toStringTag,Symbol.iterator);function Ni(e){return{enumerable:!1,configurable:!0,get:function(){return this[ge].get_(e)},set:function(t){this[ge].set_(e,t)}}}function ki(e){k(Ii.prototype,""+e,Ni(e))}function ji(e){if(e>Ti){for(var t=Ti;t<e+100;t++)ki(t);Ti=e}}function Mi(e,t,n){return new Ii(e,t,n)}function Vi(e,t){if("object"==typeof e&&null!==e){if(oi(e))return void 0!==t&&C(23),e[ge].atom_;if(gi(e))return e.atom_;if(di(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||C(25,t,Ri(e)),n}if(Si(e)){if(!t)return C(26);var i=e[ge].values_.get(t);return i||C(27,t,Ri(e)),i}if(_e(e)||Pt(e)||Qt(e))return e}else if(H(e)&&Qt(e[ge]))return e[ge];C(28)}function Li(e,t){return e||C(29),void 0!==t?Li(Vi(e,t)):_e(e)||Pt(e)||Qt(e)||di(e)||gi(e)?e:e[ge]?e[ge]:void C(24,e)}function Ri(e,t){var n;if(void 0!==t)n=Vi(e,t);else{if(hn(e))return e.name;n=Si(e)||di(e)||gi(e)?Li(e):Vi(e)}return n.name_}function Di(e){var t=kt(),n=mt(!0);zt();try{return e()}finally{qt(),bt(n),jt(t)}}Object.entries($n).forEach(function(e){var t=e[0],n=e[1];"concat"!==t&&G(Ii.prototype,t,n)}),ji(1e3);var Bi=j.toString;function Ki(e,t,n){return void 0===n&&(n=-1),Hi(e,t,n)}function Hi(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Bi.call(e);if(s!==Bi.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Fi(e),t=Fi(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(H(l)&&l instanceof l&&H(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return r[c]===t;if(i.push(e),r.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Hi(e[c],t[c],n-1,i,r))return!1}else{var h,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!ee(t,h=d[c])||!Hi(e[h],t[h],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function Fi(e){return oi(e)?e.slice():Y(e)||di(e)||X(e)||gi(e)?Array.from(e.entries()):e}function Ui(e){return e[Symbol.iterator]=zi,e}function zi(){return this}["Symbol","Map","Set"].forEach(function(e){void 0===E()[e]&&C("MobX requires global '"+e+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Ri},$mobx:ge});class qi{constructor(e){t(this,"selectionValue",void 0),t(this,"type","Single"),this.selectionValue=e}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}reduceTo(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class Gi{constructor(e,n){t(this,"selectionValue",void 0),t(this,"selectableItems",void 0),t(this,"type","Multi"),t(this,"rangeStart",void 0),t(this,"rangeEnd",void 0),this.selectionValue=e,this.selectableItems=n,this.rangeStart=void 0,Un(this,{selectionStatus:ut,selectionValue:ot.ref,selectableItems:ot.ref,updateProps:un})}isSelected(e){return this.selectionValue.selection.some(t=>t.id===e.id)}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){const e=new Set(this.selectionValue.selection.map(e=>e.id)),t=this.selectableItems.reduce((t,n)=>e.has(n.id)?t+1:t,0);return 0===t?"none":t===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter(t=>t.id!==e.id)),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return void(this.rangeEnd=void 0);const[i,r]=t,o=this.rangeEnd,s=this.selectableItems.indexOf(i);this.rangeEnd=s>-1?s:void 0,this._updateSelectionWithRange({start:this.rangeStart,end:o,newEnd:s,selectionMode:r})}_updateSelectionWithRange(e){const{start:t,end:n,newEnd:i,selectionMode:r}=e,o="toggle"===r;if(void 0===t||-1===i||n===i)return;if(void 0===n){let e=this._getRange(t,i);return e=o?this._union(this.selectionValue.selection,e):e,void this.selectionValue.setSelection(e)}const s=this._getRange(t,n),a=this._getRange(t,i);let l=o?[...this.selectionValue.selection]:[];l=this._diff(l,s),l=this._union(l,a),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[i,r]=[Ji(e,0,n),Ji(t,0,n)].sort((e,t)=>e-t);return this.selectableItems.slice(i,r+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],i=new Set(e.map(e=>e.id));for(const e of t)i.has(e.id)||(i.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),i=new Set(t.map(e=>e.id));for(const e of n)i.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){const e=this._union(this.selectableItems,this.selectionValue.selection);this.selectionValue.setSelection(e),this._resetRange()}selectNone(){const e=this._diff(this.selectionValue.selection,this.selectableItems);this.selectionValue.setSelection(e),this._resetRange()}clearSelection(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e,t){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e,t)}_findIndexInList(e,t,n){const i=this.selectableItems.length-1,r="forward"===t;if("edge"===n)return r?i:0;return Ji(r?e+n:e-n,0,i)}_findIndexInGrid(e,t,n){const{columnIndex:i}=Yi(n,this.selectableItems.length,e);return"PageDown"===t?this.selectableItems.length-(n-i):"Home"===t?e-i:"End"===t?e+(n-(i+1)):i}selectUpToAdjacent(e,t,n,i){if(!1===t)return void this._resetRange();const r=this.selectableItems.findIndex(t=>t.id===e.id);let o=-1;if(o="direction"in i?this._findIndexInList(r,i.direction,i.size):this._findIndexInGrid(r,i.code,i.numberOfColumns),o===r)return;void 0===this.rangeStart&&this._setRangeStart(e);const s=this.selectableItems.at(o);s&&this._setRangeEnd(s,n)}togglePageSelection(){"all"===this.selectionStatus?this.selectNone():this.selectAll()}}const Ji=(e,t,n)=>Math.min(Math.max(e,t),n);function Wi(e,t,n,i){const r=a([]),o=a(!1);l(()=>{e&&e.setKeepSelection(function(e){if("function"==typeof e)return e;return"always keep"===e?()=>!0:()=>!1}(i))}),o.current||(o.current="loading"!==(null==t?void 0:t.status)),s(()=>{var t;const i=r.current,s=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],a=Array.isArray(s)?s:[s];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map(e=>e.id));return e.every(e=>n.has(e.id))})(i,a)||(r.current=a,o.current&&m(n))},[null==e?void 0:e.selection,n]);const u=a(void 0);var c,h;void 0!==e&&("Single"===e.type?u.current?u.current.updateProps(e):u.current=new qi(e):u.current?u.current.updateProps(e,null!==(c=t.items)&&void 0!==c?c:[]):u.current=new Gi(e,null!==(h=t.items)&&void 0!==h?h:[]));return u.current}function Yi(e,t,n){if(n<0||n>=t)return{columnIndex:-1,rowIndex:-1};const i=n%e,r=function(e,t){return Math.floor(e/t)}(n,e);return{columnIndex:i,rowIndex:r}}const Xi=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),$i=(e,t)=>{let n=!1;const[i,r]=function(e,t){let n=0,i=0;return[function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];const a=(new Date).getTime()-i,l=()=>{n=0,i=(new Date).getTime(),e(...o)};n||(a>=t?l():n=window.setTimeout(l,t-a))},()=>{clearTimeout(n),n=0}]}(()=>{n=!0,e()},500),o={eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){const t=e.currentTarget===e.target;return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)&&t}(t),handler:i};return[o,{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&Xi.has(t.code)&&n,handler:()=>{n=!1,r(),null==t||t()}}]};function Zi(e,t){return t.metaKey||t.ctrlKey?"toggle":e.selectionMode}const Qi=(e,t)=>{const n={eventName:"onKeyDown",filter:(e,t)=>"ArrowUp"===t.code&&"Multi"===e.selectionType,handler:(n,i)=>e(n.item,i.shiftKey,Zi(n,i),{direction:"backward",size:t})},i={eventName:"onKeyDown",filter:(e,t)=>"ArrowDown"===t.code&&"Multi"===e.selectionType,handler:(n,i)=>e(n.item,i.shiftKey,Zi(n,i),{direction:"forward",size:t})},r={eventName:"onKeyDown",filter:(e,t)=>"ArrowLeft"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,Zi(t,n),{direction:"backward",size:1})},o={eventName:"onKeyDown",filter:(e,t)=>"ArrowRight"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,Zi(t,n),{direction:"forward",size:1})},s=new Set(["PageUp","PageDown","Home","End"]);return[n,i,r,o,{eventName:"onKeyDown",filter:(e,t)=>s.has(t.code)&&"Multi"===e.selectionType,handler:(n,i)=>e(n.item,i.shiftKey,Zi(n,i),{code:i.code,numberOfColumns:t})}]},er="com.mendix.widgets.web.selectable.selectionContext";class tr{constructor(e,n){var i=this;t(this,"selection",void 0),t(this,"selectionHelper",void 0),t(this,"onSelect",function(){i.selectionHelper&&("Multi"===i.selectionHelper.type?i._onSelectItemMulti(...arguments):i._onSelectItemSingle(...arguments))}),t(this,"_onSelectItemMulti",function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"Multi"===(null===(n=i.selectionHelper)||void 0===n?void 0:n.type)&&(t?i.selectionHelper.selectUpTo(e,r?"toggle":"clear"):i.selectItem(e,r))}),t(this,"_onSelectItemSingle",function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.selectItem(e,n)}),t(this,"onSelectAll",e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))}),t(this,"onSelectAdjacent",function(){var e;"Multi"===(null===(e=i.selectionHelper)||void 0===e?void 0:e.type)&&i.selectionHelper.selectUpToAdjacent(...arguments)}),t(this,"isSelected",e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e)),t(this,"onClearSelection",()=>{var e;"Multi"===(null===(e=this.selectionHelper)||void 0===e?void 0:e.type)&&this.selectionHelper.clearSelection()}),t(this,"selectItem",(e,t)=>{void 0!==this.selectionHelper&&(!1!==t?this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):"Multi"===this.selectionHelper.type?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e):this.selectionHelper.reduceTo(e))}),this.selection=e,this.selectionHelper=n}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function nr(e){var t,n;return null!==(n=(t=a(null)).current)&&void 0!==n?n:t.current="function"==typeof e?e():e}if(!l)throw new Error("mobx-react-lite requires React with Hooks support");if(!Un)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function ir(e){e()}function rr(e){return On(Vi(e,t));var t}var or,sr,ar=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach(function(i,r){n-i.registeredAt>=e&&(t.finalize(i.value),t.registrations.delete(r))}),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),lr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:ar)(function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null});function ur(e){e.reaction=new Wt("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)})}var cr="function"==typeof Symbol&&Symbol.for,hr=null!==(sr=null===(or=Object.getOwnPropertyDescriptor(function(){},"name"))||void 0===or?void 0:or.configurable)&&void 0!==sr&&sr,dr=cr?Symbol.for("react.forward_ref"):"function"==typeof c&&c(function(e){return null}).$$typeof,fr=cr?Symbol.for("react.memo"):"function"==typeof h&&h(function(e){return null}).$$typeof;function vr(e,t){var n;if(fr&&e.$$typeof===fr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=null!==(n=null==t?void 0:t.forwardRef)&&void 0!==n&&n,o=e,s=e.displayName||e.name;if(dr&&e.$$typeof===dr&&(i=!0,"function"!=typeof(o=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,l,u=function(e,t){return function(e,t){void 0===t&&(t="observed");var n=r.useRef(null);if(!n.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return lr.unregister(i),i.onStoreChange=e,i.reaction||(ur(i),i.stateVersion=Symbol()),function(){var e;i.onStoreChange=null,null===(e=i.reaction)||void 0===e||e.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};n.current=i}var o,s,a=n.current;if(a.reaction||(ur(a),lr.register(n,a,a)),r.useDebugValue(a.reaction,rr),r.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track(function(){try{o=e()}catch(e){s=e}}),s)throw s;return o}(function(){return o(e,t)},s)};return u.displayName=e.displayName,hr&&Object.defineProperty(u,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(u.contextTypes=e.contextTypes),i&&(u=c(u)),u=h(u),a=e,l=u,Object.keys(a).forEach(function(e){gr[e]||Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(a,e))}),u}var gr={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(e){e||(e=ir),wn({reactionScheduler:e})}(p),lr.finalizeAllImmediately;var _r,mr={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var br,yr=(_r||(_r=1,br=mr,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,n(r)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var r="";for(var o in n)e.call(n,o)&&n[o]&&(r=i(r,o));return r}function i(e,t){return t?e?e+" "+t:e+t:e}br.exports?(t.default=t,br.exports=t):window.classNames=t}()),mr.exports),wr=pr(yr);function Sr(e){let{className:t}=e;return n("div",{className:"tr",role:"row",children:n("div",{className:wr("th mx-refresh-container",t),children:n("progress",{className:"mx-refresh-indicator"})})})}function Or(e){let{direction:t}=e;const r="pagination-icon ".concat(t);switch(t){case"forward":return n("span",{"aria-hidden":!0,children:i("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[n("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),n("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})]})});case"step-forward":return n("span",{"aria-hidden":!0,children:i("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[n("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),n("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})]})});case"backward":return n("span",{"aria-hidden":!0,children:i("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[n("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),n("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})]})});case"step-backward":return n("span",{"aria-hidden":!0,children:i("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[n("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),n("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})]})});default:return n("div",{})}}function Ar(e){var t,r,o,s,a,l,u,c,h;const f=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,v=void 0!==f?f-1:0,g=void 0!==f,p="buttons"===e.pagination,_=0===e.numberOfItems?0:p?e.page*e.pageSize+1:1,m=p?(b=e.canNextPage,y=e.numberOfItems,w=e.page,S=e.pageSize,b||!y?0===y?y:(w+1)*S:y):e.page*e.pageSize>(null!==(t=e.numberOfItems)&&void 0!==t?t:0)?null!==(r=e.numberOfItems)&&void 0!==r?r:0:e.page*e.pageSize;var b,y,w,S;const O=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems&&"always"!==e.showPagingButtons)return null;const A="".concat(p?"".concat(_," to ").concat(m):m," ").concat(g?"of ".concat(null!==(o=e.numberOfItems)&&void 0!==o?o:(null!=f?f:1)*e.pageSize):"");return i("div",{"aria-label":null!==(s=e.labelPagination)&&void 0!==s?s:"Pagination",className:"pagination-bar",children:[p&&i(d,{children:[n("button",{className:"btn pagination-button",disabled:0===e.page,...Pr(()=>{e.gotoPage(0),O(0)}),"aria-label":null!==(a=e.labelFirstPage)&&void 0!==a?a:"Go to first page",children:n(Or,{direction:"step-backward"})}),n("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...Pr(()=>{e.previousPage(),O(e.page-1)}),"aria-label":null!==(l=e.labelPreviousPage)&&void 0!==l?l:"Go to previous page",children:n(Or,{direction:"backward"})})]}),i("span",{className:"sr-only sr-only-focusable",children:[null!==(u=e.labelPagingStatus)&&void 0!==u?u:"Currently showing"," ",A]}),n("div",{"aria-hidden":!0,className:"paging-status",children:A}),p&&i(d,{children:[n("button",{"aria-label":null!==(c=e.labelNextPage)&&void 0!==c?c:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...Pr(()=>{e.nextPage(),O(e.page+1)}),children:n(Or,{direction:"forward"})}),g&&n("button",{"aria-label":null!==(h=e.labelLastPage)&&void 0!==h?h:"Go to last page",className:"btn pagination-button",disabled:e.page===v||0===e.numberOfItems,...Pr(()=>{e.gotoPage(v),O(v)}),children:n(Or,{direction:"step-forward"})})]})]})}function Pr(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const xr=Symbol("DefaultKeyNavContextValue"),Cr=u(xr);function Tr(e){let{focusController:t,children:i}=e;const r=o(()=>({focusController:t}),[t]);return n(Cr.Provider,{value:r,children:i})}function Er(e){var t,n;const[i,r]=l(!1),o=null!==(n=(t=a(null)).current)&&void 0!==n?n:t.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver(e=>{let[n]=e;t(n.isIntersecting)})}({setIsIntersecting:r});return s(()=>(e.current&&o.observe(e.current),()=>{o.disconnect()}),[o,e]),i}function Ir(e){let{children:t,className:i,hasMoreItems:r,isInfinite:o,setPage:s}=e;const[u,c,h]=function(e){const{setPage:t,hasMoreItems:n,isInfinite:i}=e,[r,o]=l(0),s=a(null),u=Er(s),c=v(e=>{Math.floor(e.target.scrollHeight-30-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&n&&t&&t(e=>e+1)},[n,t]),h=v(()=>{u&&i&&n&&r<=0&&s.current&&o(s.current.clientHeight-30)},[i,n,r,u]);return g(()=>{setTimeout(()=>h(),100)},[h]),[c,r,s]}({hasMoreItems:r,isInfinite:o,setPage:s});return n("div",{className:wr("widget-gallery-content",{"infinite-loading":o},i),ref:h,onScroll:o?u:void 0,style:o&&c>0?{maxHeight:c}:void 0,children:t})}function Nr(e){let{children:t,className:i,...r}=e;return n("div",{className:wr("widget-gallery-footer",i),...r,children:t})}function kr(e){const{children:t}=e;return t?n("section",{...e,className:"widget-gallery-header widget-gallery-filter"}):null}function jr(e){const{className:t,selectable:i,children:r,...o}=e;return n("div",{className:wr("widget-gallery",{"widget-gallery-selectable":i},t),...o,children:r})}function Mr(e){return n("div",{className:"widget-gallery-top-bar",children:e.children})}function Vr(e){let{children:t,className:i,selectionType:r,lg:o,md:s,sm:a,...l}=e;const u="None"!==r;return n("div",{...l,className:wr("widget-gallery-items","widget-gallery-lg-".concat(o),"widget-gallery-md-".concat(s),"widget-gallery-sm-".concat(a),i),role:u?"listbox":"list","aria-multiselectable":u?"Multi"===r:void 0,children:t})}function Lr(e){const t=a(null),n=a(e.focusTarget),{focusController:i}=function(){const e=f(Cr);if(e===xr)throw new Error("useKeyNavContext: context provider is missing");return e}(),[r,u]=o(()=>{const t=y(e.columnIndex,e.rowIndex);return[t===i.focusTarget,t]},[e.columnIndex,e.rowIndex,i.focusTarget]),[c,h]=l({canFocus:!1});return s(()=>{const e=e=>h(t=>e.lastPos===u?{canFocus:!1}:e.targetPos===u?{canFocus:e.shouldFocus}:t);return i.addListener(e),()=>i.removeListener(e)},[i,u]),s(()=>{const{current:e}=n;if(c.canFocus){const n="function"==typeof e?e():t.current;null==n||n.focus()}},[c]),{ref:t,tabIndex:r?0:-1,"data-position":u}}function Rr(e){const{eventsController:t,getPosition:i,helper:r,item:s,itemIndex:a,selectHelper:l,label:u,...c}=e,h=r.hasOnClick(s)||"None"!==l.selectionType,d=function(e,t,n){return"Single"===t.selectionType||"Multi"===t.selectionType?{role:"option","aria-selected":t.isSelected(e),tabIndex:0,"aria-label":n}:{role:"listitem","aria-selected":void 0,tabIndex:void 0,"aria-label":n}}(s,l,u),{columnIndex:f,rowIndex:v}=i(a),g=Lr({columnIndex:null!=f?f:-1,rowIndex:v}),p=o(()=>t.getProps(s),[t,s]);return n("div",{...c,className:wr("widget-gallery-item",{"widget-gallery-clickable":h,"widget-gallery-selected":d["aria-selected"],"widget-gallery-preview":e.preview},r.itemClass(s)),...d,onClick:p.onClick,onFocus:p.onFocus,onKeyDown:p.onKeyDown,onKeyUp:p.onKeyUp,onMouseDown:p.onMouseDown,"data-position":g["data-position"],ref:g.ref,tabIndex:g.tabIndex,children:r.render(s)})}const Dr=u(null),Br=()=>{const e=f(Dr);if(!e)throw new Error("useGalleryRootContext must be used within a root context provider");return e};function Kr(e){return n("button",{...e,className:wr("btn btn-primary widget-gallery-load-more-btn",e.className),children:e.children})}const Hr=vr(function(e){const{rootStore:{paging:t}}=Br();return"loadMore"!==t.pagination?null:t.hasMoreItems?n(Kr,{onClick:()=>t.setPage(e=>e+1),children:e.children}):null});function Fr(e){let{condition:t,children:i}=e;return t?n(d,{children:i}):null}const Ur=vr(function(e){let{location:t}=e;const{selectionCountStore:r,itemSelectHelper:o}=Br(),s="top"===t?"widget-gallery-tb-start":"widget-gallery-pb-start",a="".concat(r.clearButtonLabel," (").concat(r.selectedCount," selected)");return n(Fr,{condition:""!==r.selectedCountText,children:i("div",{className:s,children:[n("span",{className:"widget-gallery-selection-count","aria-live":"polite","aria-atomic":"true",children:r.selectedCountText}),"|",n("button",{className:"widget-gallery-clear-selection",onClick:o.onClearSelection,"aria-label":a,children:r.clearButtonLabel})]})})});function zr(e){const{loadMoreButtonCaption:t="Load more"}=e,r=e.paging?n(Ar,{canNextPage:e.hasMoreItems,canPreviousPage:0!==e.page,gotoPage:t=>e.setPage&&e.setPage(()=>t),nextPage:()=>e.setPage&&e.setPage(e=>e+1),numberOfItems:e.numberOfItems,page:e.page,pageSize:e.pageSize,previousPage:()=>e.setPage&&e.setPage(e=>e-1),pagination:e.paginationType,showPagingButtons:e.showPagingButtons}):null,o=e.paging&&("top"===e.paginationPosition||"both"===e.paginationPosition),s=e.paging&&("bottom"===e.paginationPosition||"both"===e.paginationPosition),a=e.preview||"off"===e.selectionCountPosition||"Multi"!==e.selectHelper.selectionType?null:n(Ur,{location:e.selectionCountPosition}),l=a&&"top"===e.selectionCountPosition,u=a&&"bottom"===e.selectionCountPosition;return i(jr,{className:e.className,style:e.style,selectable:!1,"data-focusindex":e.tabIndex||0,children:[n(Mr,{children:i("div",{className:"widget-gallery-top-bar-controls",children:[l&&a,o&&n("div",{className:"widget-gallery-tb-end",children:r})]})}),e.showHeader&&n(kr,{"aria-label":e.headerTitle,children:e.header}),e.showRefreshIndicator?n(Sr,{className:"mx-refresh-container-padding"}):null,n(Ir,{hasMoreItems:e.hasMoreItems,setPage:e.setPage,isInfinite:"virtualScrolling"===e.paginationType,children:e.items.length>0&&n(Vr,{lg:e.desktopItems,md:e.tabletItems,sm:e.phoneItems,selectionType:e.selectHelper.selectionType,"aria-label":e.ariaLabelListBox,children:n(Tr,{focusController:e.focusController,children:e.items.map((t,i)=>{var r;return n(Rr,{preview:e.preview,helper:e.itemHelper,item:t,selectHelper:e.selectHelper,eventsController:e.itemEventsController,getPosition:e.getPosition,itemIndex:i,label:null===(r=e.ariaLabelItem)||void 0===r?void 0:r.call(e,t)},"item_".concat(t.id))})})})}),(0===e.items.length||e.showEmptyStatePreview)&&e.emptyPlaceholderRenderer&&e.emptyPlaceholderRenderer(t=>n("section",{className:"widget-gallery-empty","aria-label":e.emptyMessageTitle,children:n("div",{className:"empty-placeholder",children:t})})),n(Nr,{children:i("div",{className:"widget-gallery-footer-controls",children:[u&&n("div",{className:"widget-gallery-fc-start",children:a}),i("div",{className:"widget-gallery-fc-end",children:[s&&r,"loadMore"===e.paginationType&&(e.preview?n(Kr,{children:t}):n(Hr,{children:t}))]})]})})]})}var qr;function Gr(e){return{hasError:!1,value:e}}!function(e){e[e.EMISSINGSTORE=2]="EMISSINGSTORE",e[e.ENOCONTEXT=1]="ENOCONTEXT",e[e.ESTORETYPE=3]="ESTORETYPE",e[e.EKEYMISSING=7]="EKEYMISSING",e[e.OPTIONS_NOT_FILTERABLE=8]="OPTIONS_NOT_FILTERABLE",e[e.NOT_FILTERABLE=9]="NOT_FILTERABLE",e[e.UNSUPPORTED_ATTRIBUTE_TYPE=10]="UNSUPPORTED_ATTRIBUTE_TYPE"}(qr||(qr={})),Object.freeze({code:qr.ENOCONTEXT,message:"The filter widget must be placed inside the column or header of the Data grid 2.0 or inside header of the Gallery widget."}),Object.freeze({code:qr.EMISSINGSTORE,message:"Unable to get filter store. Check parent widget configuration."}),Object.freeze({code:qr.EKEYMISSING,message:"The key for filter is missing."}),Object.freeze({code:qr.OPTIONS_NOT_FILTERABLE,message:"Drop-down options can't be filtered with current column configuration. To enable filtering, change 'Option caption type'  to 'Attribute' in column settings."}),Object.freeze({code:qr.NOT_FILTERABLE,message:"The attribute is not filterable. Please choose a different attribute."}),Object.freeze({code:qr.UNSUPPORTED_ATTRIBUTE_TYPE,message:"Unsupported attribute type for filtering. Please choose a different attribute."});const Jr=Object.freeze({type:"stub",hint:"No filter store available"}),Wr="com.mendix.widgets.web.filterable.filterContext.v2";const Yr="com.mendix.widgets.web.sortable.sortContext",Xr=null===(e=window.navigator.appVersion)||void 0===e?void 0:e.startsWith("Mendix Modeler");const $r=null!==(Qr=(Zr=window)[er])&&void 0!==Qr?Qr:Zr[er]=u(void 0);var Zr,Qr;const eo=function(){var e;const t=Xr?window.top:window;return null!==(e=t[Yr])&&void 0!==e?e:t[Yr]=u(null)}(),to=null!==(io=(no=window)[Wr])&&void 0!==io?io:no[Wr]=u(null);var no,io;function ro(e){const{selectionHelper:t,rootStore:i}=Br(),r=o(()=>{if("Multi"===(null==s?void 0:s.type))return s},[s=t]);var s;return n(to.Provider,{value:i.filterAPI,children:n(eo.Provider,{value:i.sortAPI,children:n($r.Provider,{value:r,children:e.children})})})}function oo(e){return e.reduce((e,t)=>{var n,i,r,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(i=e.onDoubleClick)&&void 0!==i?i:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(r=e.onKeyDown)&&void 0!==r?r:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e},{})}function so(e,t,n){const i=e();(!n.filter||n.filter(i,t))&&n.handler(i,t)}class ao{constructor(e){t(this,"entries",void 0),this.entries=e}getClickEntry(){const{onClick:e=[],onDoubleClick:t=[]}=oo(this.entries);let n=0;return{eventName:"onClick",handler:(i,r)=>{Date.now()-n>320?(e.forEach(e=>this.runEntry(e,i,r)),n=Date.now()):(t.forEach(e=>this.runEntry(e,i,r)),n=0)}}}runEntry(e,t,n){var i,r;(null===(i=null===(r=e.filter)||void 0===r?void 0:r.call(e,t,n))||void 0===i||i)&&e.handler(t,n)}}function lo(e){return{eventName:"onKeyDown",filter:(e,t)=>!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),handler:(t,n)=>{for(const o of e){var i,r;(null===(i=null===(r=o.filter)||void 0===r?void 0:r.call(o,t,n))||void 0===i||i)&&o.handler(t,n)}}}}const uo=e=>({eventName:"onClick",handler:(t,n)=>e({type:"Mouse",reactEvent:n})}),co=e=>({eventName:"onKeyDown",handler:(t,n)=>e({type:"Keyboard",reactEvent:n})}),ho=e=>({eventName:"onFocus",handler:(t,n)=>e({type:"Focus",reactEvent:n})});function fo(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const vo=()=>{vo.timeoutId&&clearTimeout(vo.timeoutId),vo.timeoutId=window.setTimeout(()=>{fo(),document.body.style.userSelect="",vo.timeoutId=void 0},250)},go=e=>({eventName:"onClick",filter:e=>"None"!==e.selectionType,handler:(t,n)=>{let{item:i,selectionMode:r}=t,o=!1;o||(o="toggle"===r),o||(o=n.metaKey),o||(o=n.ctrlKey),e(i,n.shiftKey,o)}}),po=e=>({eventName:"onKeyUp",filter:(e,t)=>"None"!==e.selectionType&&function(e){return"Space"===e.code&&e.shiftKey}(t),handler:t=>{let{item:n}=t;return e(n,!1,!0)}});function _o(e,t,n,i){return[(r=fo,{eventName:"onMouseDown",filter:e=>"None"!==e.selectionType,handler:r}),go(e),po(e),$i(()=>{document.body.style.userSelect="none",t("selectAll")},()=>{vo()}),lo(Qi(n,i))].flat();var r}const mo=e=>({eventName:"onClick",filter:(e,t)=>"single"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),bo=e=>({eventName:"onDoubleClick",filter:(e,t)=>"double"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),yo=(e,t)=>"Space"===t.code?!t.shiftKey:"Enter"===t.code,wo=e=>{let t=!1;return[{eventName:"onKeyDown",filter:yo,handler:()=>t=!0},{eventName:"onKeyUp",filter:(e,n)=>yo(0,n)&&t,handler:n=>{let{item:i}=n;t=!1,e(i)}}]};class So{constructor(e,n,i,r,o,s,a){t(this,"contextFactory",void 0),t(this,"selectFx",void 0),t(this,"selectAllFx",void 0),t(this,"executeActionFx",void 0),t(this,"focusTargetFx",void 0),t(this,"selectAdjacentFx",void 0),t(this,"numberOfColumns",void 0),this.contextFactory=e,this.selectFx=n,this.selectAllFx=i,this.executeActionFx=r,this.focusTargetFx=o,this.selectAdjacentFx=s,this.numberOfColumns=a}getProps(e){return function(e,t){const n=oo(t);return{onClick(t){var i;null===(i=n.onClick)||void 0===i||i.forEach(n=>so(e,t,n))},onDoubleClick(t){var i;null===(i=n.onDoubleClick)||void 0===i||i.forEach(n=>so(e,t,n))},onKeyUp(t){var i;null===(i=n.onKeyUp)||void 0===i||i.forEach(n=>so(e,t,n))},onKeyDown(t){var i;null===(i=n.onKeyDown)||void 0===i||i.forEach(n=>so(e,t,n))},onMouseDown(t){var i;null===(i=n.onMouseDown)||void 0===i||i.forEach(n=>so(e,t,n))},onFocus(t){var i;null===(i=n.onFocus)||void 0===i||i.forEach(n=>so(e,t,n))}}}(()=>this.contextFactory(e),this.getEntries())}getEntries(){const e=[..._o(this.selectFx,this.selectAllFx,this.selectAdjacentFx,this.numberOfColumns),...(n=this.executeActionFx,[mo(n),bo(n),(i=e=>{e.preventDefault(),e.stopPropagation()},{eventName:"onKeyDown",filter:(e,t)=>function(e){return"Space"===e.code&&e.target===e.currentTarget}(t),handler:(e,t)=>i(t)}),...wo(n)]),...(t=this.focusTargetFx,[uo(t),lo([co(t)]),ho(t)])];var t,n,i;const r=e.filter(e=>"onClick"===e.eventName||"onDoubleClick"===e.eventName),o=e.filter(e=>"onClick"!==e.eventName&&"onDoubleClick"!==e.eventName);return[new ao(r).getClickEntry(),...o]}}function Oo(e){const t=function(e){return e<768?"phone":e>=768&&e<992?"tablet":"desktop"}(function(){const[e,t]=l(window.innerWidth);return s(()=>{const e=e=>t(e.target.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}()),n=function(e,t){return e["".concat(t,"Items")]}(e,t),i=Math.ceil(e.totalItems/n);return{numberOfColumns:Math.min(n,e.totalItems),numberOfRows:i}}function Ao(e){return n("div",{...e,...Po,className:wr("widget-gallery-item-button",e.className),role:"button"})}const Po=function(){let e=!1;return{onKeyDown:t=>{xo(t)&&(To(t),Co(t)&&(e=!0))},onKeyUp:t=>{xo(t)&&Co(t)&&e&&(To(t),t.currentTarget.dispatchEvent(new MouseEvent("click",{bubbles:!0})),e=!1)}}}();function xo(e){return"Enter"===e.code||"Space"===e.code}function Co(e){return e.currentTarget===e.target}function To(e){e.stopPropagation(),e.preventDefault()}class Eo{constructor(e,n,i){t(this,"_classValue",void 0),t(this,"_contentValue",void 0),t(this,"_clickValue",void 0),this._classValue=e,this._contentValue=n,this._clickValue=i}itemClass(e){var t;return null===(t=this._classValue)||void 0===t?void 0:t.get(e).value}render(e){var t,i;return this.hasOnClick(e)?n(Ao,{children:null===(i=this._contentValue)||void 0===i?void 0:i.get(e)}):null===(t=this._contentValue)||void 0===t?void 0:t.get(e)}hasOnClick(e){var t;return!(null===(t=this._clickValue)||void 0===t||!t.get(e))}}let Io=()=>({emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let t=this.events[e]||[],i=0,r=t.length;i<r;i++)t[i](...n)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter(e=>t!==e)}}});const No="com.mendix.widgets.web.plugin.externalEvents";class ko{constructor(){t(this,"channels",void 0),t(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(e){const t=this.channels.get(e);return t&&(t.events={}),this.channels.delete(e)}getChannel(e){let t=this.channels.get(e);return t||(t=Io(),this.channels.set(e,t),t)}emit(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];null===(n=this.channels.get(e))||void 0===n||n.emit(t,...r)}subscribe(e,t,n){return this.getChannel(e).on(t,n),()=>this.unsubscribe(e,t,n)}unsubscribe(e,t,n){const i=this.channels.get(e);if(!i)return;const r=i.events[t];r&&(i.events[t]=r.filter(e=>e!==n));0===Object.values(i.events).flat().reduce((e,t)=>t?e+1:e,0)&&this.disposeChannel(e)}}function jo(){var e,t;return null!==(t=(e=window)[No])&&void 0!==t?t:e[No]=function(){if(Object.prototype.hasOwnProperty.call(window,No))throw new Error("Widget plugin external events: plugin already initialized!");return new ko}()}function Mo(e,t,n){s(()=>{if(void 0!==e)return jo().subscribe(e,t,n)},[e,t])}const Vo=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"},set:{value:"set.value"},selection:{clear:"selection.clear"}});const Lo=function(){return jo().emit(...arguments)};function Ro(e,t){var n;n=a({inputChannel:e,event:Vo.reset.filters,onEvent:(e,n)=>{e(t,Vo.reset.value,...n)}}).current,Mo(n.inputChannel,n.event,a(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.onEvent(Lo,t)}).current)}function Do(e,t){Ro(e.name,e.id),function(e){let{widgetName:t,listener:n}=e;const{current:i}=a(n);Mo(t,Vo.selection.clear,i)}({widgetName:e.name,listener:()=>null==t?void 0:t.onClearSelection()})}class Bo{constructor(e){t(this,"atom",void 0),this.atom=e,Un(this,{props:ut})}get props(){return this.atom.props}}class Ko{constructor(e){t(this,"props",void 0),this.props=e,Un(this,{props:ot.ref,setProps:un})}setProps(e){this.props=e}}class Ho{constructor(e){t(this,"atom",void 0),t(this,"gate",void 0),this.atom=new Ko(e),this.gate=new Bo(this.atom)}setProps(e){this.atom.setProps(e)}}function Fo(e){return"function"===e.type&&"and"===e.name}function Uo(){const e=new Set;return[t=>{t&&e.add(t)},()=>{for(const t of e)t();e.clear()}]}class zo{constructor(e,n){t(this,"inputs",void 0),t(this,"stableKey",void 0),t(this,"ownMetaKey","CombinedFilter"),e.add(this),this.inputs=n.inputs,this.stableKey=n.stableKey,Un(this,{filter:ut,filterWithBag:ut,hydrate:un})}storageKey(e){return"".concat(this.stableKey,"@").concat(e)}readMetaFromStorage(e){const t=sessionStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(t){return console.error("CombinedFilter.readFilterMeta: Error parsing meta for key ".concat(e),t),null}}clearFilterMeta(e){sessionStorage.removeItem(this.storageKey(e))}filterHash(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2166136261;const n=e.length;for(let i=0;i<n;i++)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(JSON.stringify(e)).toString()}restoreMeta(e){const t=this.filterHash(e),n=this.storageKey(t);return this.readMetaFromStorage(n)}hydrate(e){if(!e)return;const t=this.restoreMeta(e);if(!t)return;const n=function(e,t){const[n,i]=JSON.parse(t),r=Array(n).fill(void 0);return 0===i.length?r:1===i.length?(r[i[0]]=e,r):e&&Fo(e)?(e.args.forEach((e,t)=>{r[i[t]]=e}),r):r}(e,t[this.ownMetaKey]);if(n.length===this.inputs.length)for(let e=0;e<this.inputs.length;e++){const i=this.inputs[e],r={cond:n[e],meta:t[i.metaKey]};i.hydrate(r)}else console.error("CombinedFilter.hydrate: Number of conditions (".concat(n.length,") does not match number of inputs (").concat(this.inputs.length,")"))}get filter(){return this.filterWithBag.filter}get filterWithBag(){const e={},t=[];for(const{condWithMeta:n,metaKey:i}of this.inputs)e[i]=n.meta,t.push(n.cond);const[n,i]=function(e){const[t,n]=[(i=e).flatMap((e,t)=>void 0===e?[]:[t]),i.filter(e=>void 0!==e)];var i;const r=JSON.stringify([e.length,t]);switch(n.length){case 0:return[void 0,r];case 1:return[n[0],r];default:return[_(...n),r]}}(t);return e[this.ownMetaKey]=i,{filter:n,bag:e,hash:n?this.filterHash(n):null}}saveFilterMeta(e,t){e&&sessionStorage.setItem(this.storageKey(e),JSON.stringify(t))}setup(){const[e,t]=Uo();return e(gn(()=>this.filterWithBag,(e,t)=>{t&&t.hash&&this.clearFilterMeta(t.hash),e.hash&&this.saveFilterMeta(e.hash,e.bag)})),t}}class qo{constructor(){t(this,"filters",new Map),t(this,"settingsBuffer",new Map),t(this,"_state",new Map),t(this,"metaKey","CustomFilterHost"),qn(this,{hydrate:un})}get settings(){return new Map([...this.filters].map(e=>{let[t,[n]]=e;return[t,n.toJSON()]}))}set settings(e){this.settingsBuffer=e}observe(e,t){this.unobserve(e);const n=dn(()=>{this.settingsBuffer.has(e)&&t.fromJSON(this.settingsBuffer.get(e))}),i=dn(()=>{this._state.set(e,t.condition)}),r=this.settingsBuffer.has(e),o=this._state.get(e);!r&&o&&t.fromViewState(o);this.filters.set(e,[t,()=>{n(),i(),this.filters.delete(e),this._state.delete(e)}])}unobserve(e){var t;this.filters.has(e)&&(null===(t=this.filters.get(e))||void 0===t||t[1]())}toJSON(){return[...this.settings.entries()]}fromJSON(e){null!=e&&Array.isArray(e)&&(this.settings=new Map(e))}get condWithMeta(){const e={};for(const[t,[n]]of this.filters)e[t]=n.condition;const[t,n]=function(e){const t={length:0,keys:[]},n=[];for(const[i,r]of Object.entries(e))t.keys.push(i),void 0!==r&&(t[n.length]=i,n.push(r));t.length=n.length;const i=JSON.stringify(t);switch(n.length){case 0:return[void 0,i];case 1:return[n[0],i];default:return[_(...n),i]}}(e);return{cond:t,meta:n}}hydrate(e){let{cond:t,meta:n}=e;const i=function(e,t){const n=JSON.parse(t),i={};for(const e of n.keys)i[e]=void 0;return 0===n.length?i:1===n.length&&n[0]?(i[n[0]]=e,i):e&&Fo(e)?(e.args.forEach((e,t)=>{i[n[t]]=e}),i):i}(t,n);this._state=new Map(Object.entries(i))}}class Go{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t(this,"gate",void 0),t(this,"refreshIntervalMs",void 0),t(this,"backgroundCheck",!1),t(this,"fetching",!1),t(this,"baseLimit",1/0),this.gate=n,this.refreshIntervalMs=i,e.add(this),qn(this,{setup:!1,baseLimit:!1,updateFlags:un,resetFlags:un,setRefreshing:un,setFetching:un,setIsLoaded:un})}resetFlags(){this.backgroundCheck=!1,this.fetching=!1}updateFlags(e){this.backgroundCheck&&this.setBackgroundCheck("loading"===e),this.fetching&&this.setFetching("loading"===e)}setBackgroundCheck(e){this.backgroundCheck=e}setFetching(e){this.fetching=e}resetLimit(){this.datasource.setLimit(this.baseLimit)}get isDSLoading(){return"loading"===this.datasource.status}get datasource(){return this.gate.props.datasource}get items(){return this.datasource.items}get isFirstLoad(){return this.isDSLoading&&void 0===this.datasource.items}get isRefreshing(){return this.isDSLoading&&void 0!==this.datasource.items}get isSilentRefresh(){return this.backgroundCheck}get isFetchingNextBatch(){return this.fetching}get limit(){return this.datasource.limit}get offset(){return this.datasource.offset}get totalCount(){return this.datasource.totalCount}get hasMoreItems(){var e;return null!==(e=this.datasource.hasMoreItems)&&void 0!==e&&e}setup(){const[e,t]=Uo();if(e(dn(()=>{this.updateFlags(this.datasource.status)})),this.refreshIntervalMs>0){let t;const n=dn(()=>{this.items,clearInterval(t),t=window.setTimeout(()=>this.backgroundRefresh(),this.refreshIntervalMs)});e(()=>{n(),clearInterval(t)})}return t}backgroundRefresh(){this.isDSLoading||(this.setBackgroundCheck(!0),this.datasource.reload())}requestTotalCount(e){this.datasource.requestTotalCount(e)}setLimit(e){this.setFetching(!0),this.datasource.setLimit(e)}setOffset(e){this.resetFlags(),this.resetLimit(),this.datasource.setOffset(e)}setSortOrder(){this.resetFlags(),this.resetLimit(),this.datasource.setSortOrder(...arguments)}setFilter(){this.resetFlags(),this.resetLimit(),this.datasource.setFilter(...arguments)}setBaseLimit(e){this.baseLimit=e,this.resetLimit()}reload(){const e=this.datasource;return this.datasource.reload(),jn(()=>this.datasource!==e)}fetchPage(e){let{limit:t,offset:n,signal:i}=e;return new Promise((e,r)=>{if(i&&i.aborted)return r(i.reason);jn(()=>this.datasource.offset===n&&this.datasource.limit===t&&"available"===this.datasource.status,{signal:i}).then(()=>{var t;return e(null!==(t=this.datasource.items)&&void 0!==t?t:[])},r),this.datasource.setOffset(n),this.datasource.setLimit(t)})}}class Jo{constructor(e,n){t(this,"gate",void 0),t(this,"position",void 0),this.gate=e,this.position=n,qn(this)}get props(){return this.gate.props}get formatSingular(){var e;return(null===(e=this.props.selectedCountTemplateSingular)||void 0===e?void 0:e.value)||"%d item selected"}get formatPlural(){var e;return(null===(e=this.props.selectedCountTemplatePlural)||void 0===e?void 0:e.value)||"%d items selected"}get isTopCounterVisible(){return"top"===this.position&&this.selectedCount>0}get isBottomCounterVisible(){return"bottom"===this.position&&this.selectedCount>0}get clearButtonLabel(){var e;return(null===(e=this.props.clearSelectionButtonLabel)||void 0===e?void 0:e.value)||"Clear selection"}get selectedCount(){const{itemSelection:e}=this.props;return e?"Single"===e.type?0:e.selection.length:0}get selectedCountText(){const e=this.selectedCount;return e>1?this.formatPlural.replace("%d","".concat(e)):1===e?this.formatSingular.replace("%d","1"):""}}class Wo{constructor(){t(this,"components",new Set),t(this,"isSetupCalled",!1)}add(e){this.components.add(e)}remove(e){this.components.delete(e)}setup(){if(this.isSetupCalled)throw new Error("setup method has already been called.");this.isSetupCalled=!0;const[e,t]=Uo();for(const t of this.components){var n;const i=null===(n=t.setup)||void 0===n?void 0:n.call(t);i&&e(i)}return t}}class Yo{constructor(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,"_usedBy",[]),t(this,"_state",void 0),t(this,"_cleanup",null),t(this,"_store",null),t(this,"_jsonBuffer",null),this._state=null!==(e=n.initSort)&&void 0!==e?e:[],Un(this,{_state:ot.ref,_jsonBuffer:ot.ref,sortOrder:ut,lock:un,_usedBy:ot,usedBy:ut,observe:un,unobserve:un,_setState:un,fromJSON:un})}_setState(e){this._state=e}get sortOrder(){return this._state}observe(e){this.unobserve();const t=dn(()=>{const t=this._jsonBuffer;null!=t&&Array.isArray(t)&&e.fromJSON(t)}),n=dn(()=>{this._setState(e.sortOrder)});this._store=e,this._cleanup=()=>{this._store=null,this._jsonBuffer=null,this._cleanup=null,t(),n()}}unobserve(){var e;null===(e=this._cleanup)||void 0===e||e.call(this)}lock(e){-1===this._usedBy.indexOf(e)&&this._usedBy.push(e);return()=>{!function(e){pt(e.name,!1,e,this,void 0)}(()=>{const t=this._usedBy.indexOf(e);-1!==t&&this._usedBy.splice(t,1)})}}get usedBy(){var e;return null!==(e=this._usedBy.at(0))&&void 0!==e?e:null}toJSON(){return this._store?this._store.toJSON():null}fromJSON(e){this._jsonBuffer=e}}class Xo{constructor(e,n){t(this,"datasourceService",void 0),t(this,"refreshIndicator",void 0),this.datasourceService=e,this.refreshIndicator=n,Un(this,{isRefreshing:ut,showRefreshIndicator:ut})}get isRefreshing(){const{isSilentRefresh:e,isRefreshing:t}=this.datasourceService;return!e&&t}get showRefreshIndicator(){return this.refreshIndicator&&this.isRefreshing}}class $o{constructor(e,n,i,r){t(this,"_query",void 0),t(this,"_filtersHost",void 0),t(this,"_sortHost",void 0),e.add(this),this._query=n,this._filtersHost=i,this._sortHost=r}setup(){const[e,t]=Uo();return e(gn(()=>this._sortHost.sortOrder,e=>this._query.setSortOrder(e),{fireImmediately:!0})),e(gn(()=>this._filtersHost.filter,e=>this._query.setFilter(e),{fireImmediately:!0})),t}}class Zo{constructor(e){t(this,"_pageSize",void 0),t(this,"_query",void 0),t(this,"pagination",void 0),t(this,"paginationKind",void 0),t(this,"showPagingButtons",void 0),t(this,"showTotalCount",void 0),t(this,"setPage",e=>{const t=e(this.currentPage);this.isLimitBased?this._query.setLimit(t*this.pageSize):this._query.setOffset(t*this.pageSize)}),this._pageSize=e.pageSize,this._query=e.query,this.pagination=e.pagination,this.showPagingButtons=e.showPagingButtons,this.showTotalCount=e.showTotalCount,this.paginationKind="".concat(this.pagination,".").concat(this.showPagingButtons),this._setInitParams()}get isLimitBased(){return"virtualScrolling"===this.pagination||"loadMore"===this.pagination}get pageSize(){return this._pageSize}get currentPage(){const{_query:{limit:e,offset:t},pageSize:n}=this;return this.isLimitBased?e/n:t/n}get showPagination(){switch(this.paginationKind){case"buttons.always":return!0;case"buttons.auto":{const{totalCount:e=-1}=this._query;return e>this._query.limit}default:return this.showTotalCount}}get hasMoreItems(){return this._query.hasMoreItems}_setInitParams(){("buttons"===this.pagination||this.showTotalCount)&&this._query.requestTotalCount(!0),this._query.setBaseLimit(this.pageSize)}}class Qo{constructor(e,n){t(this,"_gate",void 0),e.add(this),this._gate=n,Un(this,{_attribute:ut,data:ut.struct})}setup(){return()=>{}}get _attribute(){return this._gate.props.stateStorageAttr}get data(){const e=this._attribute.value;if(!e)return null;try{return JSON.parse(e)}catch{return console.warn("Invalid JSON configuration in the attribute. Resetting configuration."),this._attribute.setValue(""),null}}setData(e){e=""===e?null:e,this._attribute.setValue(JSON.stringify(e))}}class es{constructor(e){t(this,"_storageKey",void 0),this._storageKey=e}get data(){try{var e;return JSON.parse(null!==(e=localStorage.getItem(this._storageKey))&&void 0!==e?e:"null")}catch{return null}}setData(e){localStorage.setItem(this._storageKey,JSON.stringify(e))}}class ts{constructor(e,n){t(this,"_storage",void 0),t(this,"_filtersHost",void 0),t(this,"_sortHost",void 0),t(this,"storeFilters",void 0),t(this,"storeSort",void 0),t(this,"schemaVersion",1),e.add(this),this._storage=n.storage,this._filtersHost=n.filtersHost,this._sortHost=n.sortHost,this.storeFilters=n.storeFilters,this.storeSort=n.storeSort,Un(this,{_persistentState:ut,fromJSON:un})}setup(){const[e,t]=Uo(),n=gn(()=>this._persistentState,e=>this._storage.setData(e),{delay:250,equals:be.structural}),i=gn(()=>this._storage.data,e=>{null!=e&&(this._validate(e)?this.fromJSON(e):(console.warn("Invalid gallery settings. Reset storage to avoid conflicts."),this._storage.setData(null)))},{fireImmediately:!0,equals:be.structural});return e(n),e(i),t}get _persistentState(){return this.toJSON()}_validate(e){return null!=e&&"object"==typeof e&&"version"in e&&e.version===this.schemaVersion}fromJSON(e){this._validate(e)&&(this.storeFilters&&this._filtersHost.fromJSON(e.filters),this.storeSort&&this._sortHost.fromJSON(e.sort))}toJSON(){const e={version:1};return this.storeFilters&&(e.filters=this._filtersHost.toJSON()),this.storeSort&&(e.sort=this._sortHost.toJSON()),e}}class ns extends Wo{constructor(e){super(),t(this,"_query",void 0),t(this,"_filtersHost",void 0),t(this,"_sortHost",void 0),t(this,"_storage",null),t(this,"id","GalleryStore@".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),t(this,"name",void 0),t(this,"paging",void 0),t(this,"filterAPI",void 0),t(this,"sortAPI",void 0),t(this,"loaderCtrl",void 0),t(this,"selectionCountStore",void 0),this.name=e.name,this._query=new Go(this,e.gate,0),this.paging=new Zo({query:this._query,pageSize:e.pageSize,pagination:e.pagination,showPagingButtons:e.showPagingButtons,showTotalCount:e.showTotalCount}),this.selectionCountStore=new Jo(e.gate,e.gate.props.selectionCountPosition),this._filtersHost=new qo;const n=new zo(this,{stableKey:e.name,inputs:[this._filtersHost]});var i;this._sortHost=new Yo({initSort:e.gate.props.datasource.sortOrder}),new $o(this,this._query,n,this._sortHost),this.filterAPI={version:3,parentChannelName:(i={filterObserver:this._filtersHost,parentChannelName:this.id}).parentChannelName,provider:Gr(Jr),filterObserver:i.filterObserver},this.sortAPI={version:1,host:this._sortHost},this.loaderCtrl=new Xo(this._query,e.refreshIndicator);(e.storeFilters||e.storeSort)&&this.initPersistentStorage(e,e.gate),n.hydrate(e.gate.props.datasource.filter)}initPersistentStorage(e,t){"localStorage"===e.stateStorageType?this._storage=new es(this.name):t.props.stateStorageAttr&&(this._storage=new Qo(this,t)),this._storage&&new ts(this,{storage:this._storage,filtersHost:this._filtersHost,sortHost:this._sortHost,storeFilters:e.storeFilters,storeSort:e.storeSort})}}function is(e){const t=function(e){const t=nr(()=>new Ho(e));return s(()=>t.setProps(e)),t.gate}(e);return function(e){const t=nr(e);return s(()=>t.setup(),[t]),t}(()=>new ns({gate:t,...e}))}const rs=vr(function(e){var t,i,r,l,u,c;const{rootStore:h,itemSelectHelper:d}=Br(),f=null!==(t=e.datasource.items)&&void 0!==t?t:[],g={desktopItems:e.desktopItems,phoneItems:e.phoneItems,tabletItems:e.tabletItems,totalItems:f.length},{numberOfColumns:p,numberOfRows:_}=Oo(g),m=v(e=>Yi(p,f.length,e),[p,f.length]),y=function(e){let{rows:t,columns:n,pageSize:i}=e;const r=a(null);return o(()=>{const e=new x(t,n,i);return null===r.current?r.current=new S(new P,e):r.current.updateGridLayout(e),r.current},[t,n,i])}({rows:_,columns:p,pageSize:e.pageSize}),w=function(e){const t=o(()=>new b(e.onClickTrigger,e.onClick),[]);return s(()=>{t.update(e.onClick)}),t}({onClick:e.onClick,onClickTrigger:e.onClickTrigger}),O=function(e,t,n,i,r){return o(()=>new So(n=>({item:n,selectionType:e.selectionType,selectionMode:r,clickTrigger:t.clickTrigger}),e.onSelect,e.onSelectAll,t.onExecuteAction,n.dispatch,e.onSelectAdjacent,i),[e,n,i])}(d,w,y,p,e.itemSelectionMode),A=(C={classValue:e.itemClass,contentValue:e.content,clickValue:e.onClick},o(()=>new Eo(C.classValue,C.contentValue,C.clickValue),[C.classValue,C.contentValue,C.clickValue]));var C;Do(h,d);const T=n(ro,{children:e.filtersPlaceholder});return n(zr,{className:e.class,desktopItems:e.desktopItems,emptyPlaceholderRenderer:v(t=>"custom"===e.showEmptyPlaceholder?t(e.emptyPlaceholder):n("div",{}),[e.emptyPlaceholder,e.showEmptyPlaceholder]),emptyMessageTitle:null===(i=e.emptyMessageTitle)||void 0===i?void 0:i.value,header:T,headerTitle:null===(r=e.filterSectionTitle)||void 0===r?void 0:r.value,ariaLabelListBox:null===(l=e.ariaLabelListBox)||void 0===l?void 0:l.value,showHeader:!!e.filtersPlaceholder,hasMoreItems:null!==(u=e.datasource.hasMoreItems)&&void 0!==u&&u,items:f,itemHelper:A,numberOfItems:e.datasource.totalCount,page:h.paging.currentPage,pageSize:e.pageSize,paging:h.paging.showPagination,paginationPosition:e.pagingPosition,paginationType:e.pagination,setPage:h.paging.setPage,showPagingButtons:e.showPagingButtons,phoneItems:e.phoneItems,style:e.style,tabletItems:e.tabletItems,tabIndex:e.tabIndex,selectHelper:d,itemEventsController:O,focusController:y,getPosition:m,loadMoreButtonCaption:null===(c=e.loadMoreButtonCaption)||void 0===c?void 0:c.value,showRefreshIndicator:h.loaderCtrl.showRefreshIndicator,selectionCountPosition:e.selectionCountPosition})});function os(e){const t=is(e),n=Wi(e.itemSelection,e.datasource,e.onSelectionChange,e.keepSelection?"always keep":"always clear"),i=function(e,t){return o(()=>new tr(e,t),[t])}(e.itemSelection,n);return nr({rootStore:t,selectionHelper:n,itemSelectHelper:i,selectionCountStore:t.selectionCountStore})}function ss(e){const t=os(e);return n(Dr.Provider,{value:t,children:n(rs,{...e})})}export{ss as Gallery};
