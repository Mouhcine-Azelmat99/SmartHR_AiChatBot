import{compareAttrValuesAsc as e,ChartWidget as t}from"../../../shared/charts/esm/shared-charts.mjs";import{useState as r,useEffect as o,useCallback as i,useMemo as n,createElement as s}from"react";function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l,a={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var c,p,d=(l||(l=1,c=a,function(){var e={}.hasOwnProperty;function t(){for(var r=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var n=typeof i;if("string"===n||"number"===n)r.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&r.push(s)}}else if("object"===n){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var u in i)e.call(i,u)&&i[u]&&r.push(u)}}}return r.join(" ")}c.exports?(t.default=t,c.exports=t):window.classNames=t}()),a.exports),f=u(d),v={},m={};var g,b={};var h,y={};var O,S,_={},j={};function P(){return S||(S=1,e=_,t=_&&_.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=_&&_.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)},Object.defineProperty(e,"__esModule",{value:!0}),r((O||(O=1,Object.defineProperty(j,"__esModule",{value:!0})),j),e)),_;var e,t,r}var x,w,A,C={},M={};function I(){return w||(w=1,e=C,t=C&&C.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=C&&C.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(x)return M;function e(e,r,o,i,n){t(((e,t,r)=>r.splice(t,1)),e,o,i,n)}function t(e,r,o,i,n){r.forEach((r=>{var s;r.propertyGroups&&t(e,r.propertyGroups,o,i,n),null===(s=r.properties)||void 0===s||s.forEach(((r,s,u)=>{r.key===o&&(void 0===i||void 0===n?e(r,s,u):r.objects?t(e,r.objects[i].properties,n):r.properties&&t(e,r.properties[i],n))}))}))}return x=1,Object.defineProperty(M,"__esModule",{value:!0}),M.hidePropertyIn=e,M.hidePropertiesIn=function(e,r,o){o.forEach((r=>t(((e,t,r)=>r.splice(t,1)),e,r,void 0,void 0)))},M.hideNestedPropertiesIn=function(t,r,o,i,n){n.forEach((n=>e(t,r,o,i,n)))},M.changePropertyIn=function(e,r,o,i,n,s){t(o,e,i,n,s)},M.transformGroupsIntoTabs=function(e){const t=[];e.forEach((e=>{e.propertyGroups&&(t.push(...e.propertyGroups),e.propertyGroups=[])})),e.push(...t)},M.moveProperty=function(e,t,r){e>=0&&t>=0&&e<r.length&&t<r.length&&e!==t&&r.splice(t,0,...r.splice(e,1))},M}(),e)),C;var e,t,r}var N,T,k,E=(A||(A=1,N=v,T=v&&v.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),k=v&&v.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||T(t,e,r)},Object.defineProperty(N,"__esModule",{value:!0}),k((p||(p=1,Object.defineProperty(m,"__esModule",{value:!0}),m.ensure=function(e){if(null==e)throw new Error("Did not expect an argument to be undefined");return e}),m),N),k((g||(g=1,Object.defineProperty(b,"__esModule",{value:!0}),b.mergeNativeStyles=function(e,t){const r=[e,...t.filter((e=>void 0!==e))];return Object.keys(e).reduce(((e,t)=>{const o=r.map((e=>e[t]));return Object.assign(Object.assign({},e),{[t]:(i=o,i.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{}))});var i}),{})},b.extractStyles=function(e,t){return e?Object.entries(e).reduce(((e,r)=>{let[o,i]=e,[n,s]=r;return t.includes(n)?o[n]=s:i[n]=s,[o,i]}),[{},{}]):[{},{}]}),b),N),k((h||(h=1,Object.defineProperty(y,"__esModule",{value:!0}),y.parseInlineStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return e.split(";").reduce(((e,t)=>{const r=t.split(":");return 2===r.length&&(e[r[0].trim().replace(/(-.)/g,(e=>e[1].toUpperCase()))]=r[1].trim()),e}),{})}catch(e){return{}}}),y),N),k(P(),N),k(I(),N)),v);function V(t,r,o){const i=[...t].sort(((t,r)=>{const i=null==o?void 0:o.get(t).value,n=null==o?void 0:o.get(r).value;return e(i,n)}));return"desc"===r&&i.reverse(),i}const D={font:{color:"#FFF",size:12},legend:{font:{family:"Open Sans",size:14,color:"#555"}}},L={responsive:!0},G={type:"pie",hoverinfo:"none",sort:!1};function H(u){var l;const a=(t=>{let{holeRadius:s,customSeriesOptions:u,seriesColorAttribute:l,seriesDataSource:a,seriesName:c,seriesSortAttribute:p,seriesSortOrder:d,seriesValueAttribute:f,onClickAction:v,tooltipHoverText:m,seriesItemSelection:g}=t;const[b,h]=r([]);o((()=>{if("available"===a.status&&a.items){const t=a.items.map((e=>{var t;return{itemName:c.get(e).value,itemValue:null===(t=E.ensure(f).get(e).value)||void 0===t?void 0:t.toNumber(),itemColor:null==l?void 0:l.get(e).value,itemSortValue:null==p?void 0:p.get(e).value,itemHoverText:null==m?void 0:m.get(e).value}}));p&&(t.sort(((t,r)=>{let{itemSortValue:o}=t,{itemSortValue:i}=r;return e(o,i)})),"desc"===d&&t.reverse()),h(t)}}),[l,a,c,p,d,f,m]);const y=i((e=>{var t;(t=null==v?void 0:v.get(e))&&t.canExecute&&!t.isExecuting&&t.execute(),g&&"Single"===g.type&&g.setSelection(e)}),[v,g]);return n((()=>{var e;return[{customSeriesOptions:u,hole:s/100,labels:b.map((e=>{let{itemName:t}=e;return null!=t?t:null})),values:b.map((e=>{let{itemValue:t}=e;return null!=t?t:0})),marker:{colors:b.map((e=>{let{itemColor:t}=e;return t}))},hovertext:b.map((e=>{let{itemHoverText:t}=e;return null!=t?t:""})),hoverinfo:b.some((e=>{let{itemHoverText:t}=e;return void 0!==t&&""!==t}))?"text":"none",dataSourceItems:V(null!==(e=a.items)&&void 0!==e?e:[],d,p),onClick:y}]}),[u,s,b,y,a.items,p,d])})({holeRadius:u.holeRadius,customSeriesOptions:u.customSeriesOptions,seriesColorAttribute:u.seriesColorAttribute,seriesDataSource:u.seriesDataSource,seriesName:u.seriesName,seriesSortAttribute:u.seriesSortAttribute,seriesSortOrder:u.seriesSortOrder,seriesValueAttribute:u.seriesValueAttribute,onClickAction:u.onClickAction,tooltipHoverText:u.tooltipHoverText,seriesItemSelection:u.seriesItemSelection}),c="Single"===(null===(l=u.seriesItemSelection)||void 0===l?void 0:l.type)||u.onClickAction;return s(t,{type:"PieChart",className:f("widget-pie-chart",{"widget-pie-chart-selectable":c},u.class),data:a,width:u.width,widthUnit:u.widthUnit,height:u.height,heightUnit:u.heightUnit,showLegend:u.showLegend,xAxisLabel:void 0,yAxisLabel:void 0,gridLinesMode:"none",customLayout:u.customLayout,customConfig:u.customConfigurations,layoutOptions:D,configOptions:L,seriesOptions:G,enableThemeConfig:u.enableThemeConfig,playground:u.playground})}export{H as PieChart};
