function t(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}import{useEditorStore as e,initStateFromProps as n,getPlaygroundContext as r,constructWrapperStyle as i}from"../../../shared/charts/esm/shared-charts.mjs";import{useRef as o,useEffect as a,createElement as s,Fragment as u}from"react";import l from"../../../shared/charts/esm/plotly.min.mjs";function c(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var h={};function d(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:h}var f=Object.assign,v=Object.getOwnPropertyDescriptor,_=Object.defineProperty,p=Object.prototype,b=[];Object.freeze(b);var g={};Object.freeze(g);var y="undefined"!=typeof Proxy,m=Object.toString();function O(){y||c("Proxy not available")}function w(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var S=function(){};function A(t){return"function"==typeof t}function x(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function j(t){return null!==t&&"object"==typeof t}function P(t){if(!j(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n.toString()===m}function k(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function E(t,e,n){_(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function C(t,e,n){_(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function T(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return j(t)&&!0===t[n]}}function V(t){return t instanceof Map}function N(t){return t instanceof Set}var D=void 0!==Object.getOwnPropertySymbols;var L="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:D?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function R(t){return null===t?null:"object"==typeof t?""+t:t}function B(t,e){return p.hasOwnProperty.call(t,e)}var M=Object.getOwnPropertyDescriptors||function(t){var e={};return L(t).forEach((function(n){e[n]=v(t,n)})),e};function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),r)}var i,o}function U(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z.apply(this,arguments)}function G(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,K(t,e)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J=Symbol("mobx-stored-annotations");function X(t){return Object.assign((function(e,n){if(Y(n))return t.decorate_20223_(e,n);F(e,n,t)}),t)}function F(t,e,n){B(t,J)||E(t,J,z({},t[J])),function(t){return t.annotationType_===it}(n)||(t[J][e]=n)}function Y(t){return"object"==typeof t&&"string"==typeof t.kind}var $=Symbol("mobx administration"),Q=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ee.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return Ae(this)},e.reportChanged=function(){we(),xe(this),Se()},e.toString=function(){return this.name_},t}(),Z=T("Atom",Q);function tt(t,e,n){void 0===e&&(e=S),void 0===n&&(n=S);var r,i=new Q(t);return e!==S&&Je(qe,i,e,r),n!==S&&He(i,n),i}var et={identity:function(t,e){return t===e},structural:function(t,e){return lr(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return lr(t,e,1)}};function nt(t,e,n){return nn(t)?t:Array.isArray(t)?Ut.array(t,{name:n}):P(t)?Ut.object(t,void 0,{name:n}):V(t)?Ut.map(t,{name:n}):N(t)?Ut.set(t,{name:n}):"function"!=typeof t||ze(t)||en(t)?t:k(t)?Ze(t):Ue(n,t)}function rt(t){return t}var it="override";function ot(t,e){return{annotationType_:t,options_:e,make_:at,extend_:st,decorate_20223_:ut}}function at(t,e,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(t,e,n,!1)?0:1;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(ze(n.value))return 1;var o=lt(t,this,e,n,!1);return _(r,e,o),2}function st(t,e,n,r){var i=lt(t,this,e,n);return t.defineProperty_(e,i,r)}function ut(t,e){var n=e.kind,r=e.name,i=e.addInitializer,o=this;if("field"!=n){var a,s,u,l,h,d;if("method"==n)return ze(t)||(s=t,t=Yt(null!=(u=null==(l=o.options_)?void 0:l.name)?u:r.toString(),s,null!=(h=null==(d=o.options_)?void 0:d.autoAction)&&h)),null!=(a=this.options_)&&a.bound&&i((function(){var t=this,e=t[r].bind(t);e.isMobxAction=!0,t[r]=e})),t;c("Cannot apply '"+o.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else i((function(){F(this,r,o)}))}function lt(t,e,n,r,i){var o,a,s,u,l,c,h,d;void 0===i&&(i=ge.safeDescriptors),d=r,e.annotationType_,d.value;var f,v=r.value;null!=(o=e.options_)&&o.bound&&(v=v.bind(null!=(f=t.proxy_)?f:t.target_));return{value:Yt(null!=(a=null==(s=e.options_)?void 0:s.name)?a:n.toString(),v,null!=(u=null==(l=e.options_)?void 0:l.autoAction)&&u,null!=(c=e.options_)&&c.bound?null!=(h=t.proxy_)?h:t.target_:void 0),configurable:!i||t.isPlainObject_,enumerable:!1,writable:!i}}function ct(t,e){return{annotationType_:t,options_:e,make_:ht,extend_:dt,decorate_20223_:ft}}function ht(t,e,n,r){var i;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!B(t.target_,e)||!en(t.target_[e]))&&null===this.extend_(t,e,n,!1))return 0;if(en(n.value))return 1;var o=vt(t,this,e,n,!1,!1);return _(r,e,o),2}function dt(t,e,n,r){var i,o=vt(t,this,e,n,null==(i=this.options_)?void 0:i.bound);return t.defineProperty_(e,o,r)}function ft(t,e){var n,r=e.name,i=e.addInitializer;return en(t)||(t=Ze(t)),null!=(n=this.options_)&&n.bound&&i((function(){var t=this,e=t[r].bind(t);e.isMobXFlow=!0,t[r]=e})),t}function vt(t,e,n,r,i,o){var a;void 0===o&&(o=ge.safeDescriptors),a=r,e.annotationType_,a.value;var s,u=r.value;(en(u)||(u=Ze(u)),i)&&((u=u.bind(null!=(s=t.proxy_)?s:t.target_)).isMobXFlow=!0);return{value:u,configurable:!o||t.isPlainObject_,enumerable:!1,writable:!o}}function _t(t,e){return{annotationType_:t,options_:e,make_:pt,extend_:bt,decorate_20223_:gt}}function pt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function bt(t,e,n,r){var i;return i=n,this.annotationType_,i.get,t.defineComputedProperty_(e,z({},this.options_,{get:n.get,set:n.set}),r)}function gt(t,e){var n=this,r=e.name;return(0,e.addInitializer)((function(){var e=Gn(this)[$],i=z({},n.options_,{get:t,context:this});i.name||(i.name="ObservableObject."+r.toString()),e.values_.set(r,new re(i))})),function(){return this[$].getObservablePropValue_(r)}}function yt(t,e){return{annotationType_:t,options_:e,make_:mt,extend_:Ot,decorate_20223_:wt}}function mt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function Ot(t,e,n,r){var i,o;return this.annotationType_,t.defineObservableProperty_(e,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:nt,r)}function wt(t,e){var n=this,r=e.kind,i=e.name,o=new WeakSet;function a(t,e){var r,a,s=Gn(t)[$],u=new te(e,null!=(r=null==(a=n.options_)?void 0:a.enhancer)?r:nt,"ObservableObject."+i.toString(),!1);s.values_.set(i,u),o.add(t)}if("accessor"==r)return{get:function(){return o.has(this)||a(this,t.get.call(this)),this[$].getObservablePropValue_(i)},set:function(t){return o.has(this)||a(this,t),this[$].setObservablePropValue_(i,t)},init:function(t){return o.has(this)||a(this,t),t}}}var St="true",At=xt();function xt(t){return{annotationType_:St,options_:t,make_:jt,extend_:Pt,decorate_20223_:kt}}function jt(t,e,n,r){var i,o,a,s;if(n.get)return qt.make_(t,e,n,r);if(n.set){var u=Yt(e.toString(),n.set);return r===t.target_?null===t.defineProperty_(e,{configurable:!ge.safeDescriptors||t.isPlainObject_,set:u})?0:2:(_(r,e,{configurable:!0,set:u}),2)}if(r!==t.target_&&"function"==typeof n.value)return k(n.value)?(null!=(s=this.options_)&&s.autoBind?Ze.bound:Ze).make_(t,e,n,r):(null!=(a=this.options_)&&a.autoBind?Ue.bound:Ue).make_(t,e,n,r);var l,c=!1===(null==(i=this.options_)?void 0:i.deep)?Ut.ref:Ut;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(l=t.proxy_)?l:t.target_));return c.make_(t,e,n,r)}function Pt(t,e,n,r){var i,o,a;if(n.get)return qt.extend_(t,e,n,r);if(n.set)return t.defineProperty_(e,{configurable:!ge.safeDescriptors||t.isPlainObject_,set:Yt(e.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(a=t.proxy_)?a:t.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Ut.ref:Ut).extend_(t,e,n,r)}function kt(t,e){c("'"+this.annotationType_+"' cannot be used as a decorator")}var Et={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ct(t){return t||Et}Object.freeze(Et);var Tt=yt("observable"),Vt=yt("observable.ref",{enhancer:rt}),Nt=yt("observable.shallow",{enhancer:function(t,e,n){return null==t||Wn(t)||kn(t)||Ln(t)||Mn(t)?t:Array.isArray(t)?Ut.array(t,{name:n,deep:!1}):P(t)?Ut.object(t,void 0,{name:n,deep:!1}):V(t)?Ut.map(t,{name:n,deep:!1}):N(t)?Ut.set(t,{name:n,deep:!1}):void 0}}),Dt=yt("observable.struct",{enhancer:function(t,e){return lr(t,e)?e:t}}),Lt=X(Tt);function Rt(t){return!0===t.deep?nt:!1===t.deep?rt:(e=t.defaultDecorator)&&null!=(n=null==(r=e.options_)?void 0:r.enhancer)?n:nt;var e,n,r}function Bt(t,e,n){return Y(e)?Tt.decorate_20223_(t,e):x(e)?void F(t,e,Tt):nn(t)?t:P(t)?Ut.object(t,e,n):Array.isArray(t)?Ut.array(t,e):V(t)?Ut.map(t,e):N(t)?Ut.set(t,e):"object"==typeof t&&null!==t?t:Ut.box(t,e)}f(Bt,Lt);var Mt,It,Ut=f(Bt,{box:function(t,e){var n=Ct(e);return new te(t,Rt(n),n.name,!0,n.equals)},array:function(t,e){var n=Ct(e);return(!1===ge.useProxies||!1===n.proxy?rr:yn)(t,Rt(n),n.name)},map:function(t,e){var n=Ct(e);return new Dn(t,Rt(n),n.name)},set:function(t,e){var n=Ct(e);return new Bn(t,Rt(n),n.name)},object:function(t,e,n){return sr((function(){return Xe(!1===ge.useProxies||!1===(null==n?void 0:n.proxy)?Gn({},n):function(t,e){var n,r;return O(),t=Gn(t,e),null!=(r=(n=t[$]).proxy_)?r:n.proxy_=new Proxy(t,an)}({},n),t,e)}))},ref:X(Vt),shallow:X(Nt),deep:Lt,struct:X(Dt)}),zt="computed",Gt=_t(zt),Kt=_t("computed.struct",{equals:et.structural}),qt=function(t,e){if(Y(e))return Gt.decorate_20223_(t,e);if(x(e))return F(t,e,Gt);if(P(t))return X(_t(zt,t));var n=P(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new re(n)};Object.assign(qt,Gt),qt.struct=X(Kt);var Wt,Ht=0,Jt=1,Xt=null!=(Mt=null==(It=v((function(){}),"name"))?void 0:It.configurable)&&Mt,Ft={value:"action",configurable:!0,writable:!1,enumerable:!1};function Yt(t,e,n,r){function i(){return function(t,e,n,r,i){var o=function(t,e,n,r){var i=!1,o=0,a=ge.trackingDerivation,s=!e||!a;we();var u=ge.allowStateChanges;s&&(he(),u=$t(!0));var l=fe(!0),c={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:i,startTime_:o,actionId_:Jt++,parentActionId_:Ht};return Ht=c.actionId_,c}(0,e);try{return n.apply(r,i)}catch(t){throw o.error_=t,t}finally{!function(t){Ht!==t.actionId_&&c(30);Ht=t.parentActionId_,void 0!==t.error_&&(ge.suppressReactionErrors=!0);Qt(t.prevAllowStateChanges_),ve(t.prevAllowStateReads_),Se(),t.runAsAction_&&de(t.prevDerivation_);ge.suppressReactionErrors=!1}(o)}}(0,n,e,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return e.toString()},Xt&&(Ft.value=t,_(i,"name",Ft)),i}function $t(t){var e=ge.allowStateChanges;return ge.allowStateChanges=t,e}function Qt(t){ge.allowStateChanges=t}Wt=Symbol.toPrimitive;var Zt,te=function(t){function e(e,n,r,i,o){var a;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=et.default),(a=t.call(this,r)||this).enhancer=void 0,a.name_=void 0,a.equals=void 0,a.hasUnreportedChange_=!1,a.interceptors_=void 0,a.changeListeners_=void 0,a.value_=void 0,a.dehancer=void 0,a.enhancer=n,a.name_=r,a.equals=o,a.value_=n(e,void 0,r),a}G(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){this.value_,(t=this.prepareNewValue_(t))!==ge.UNCHANGED&&this.setNewValue_(t)},n.prepareNewValue_=function(t){if(sn(this)){var e=ln(this,{object:this,type:pn,newValue:t});if(!e)return ge.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?ge.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),cn(this)&&dn(this,{type:pn,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return un(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:pn,newValue:this.value_,oldValue:void 0}),hn(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return R(this.get())},n[Wt]=function(){return this.valueOf()},e}(Q);Zt=Symbol.toPrimitive;var ee,ne,re=function(){function t(t){this.dependenciesState_=ee.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ee.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new oe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ne.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||c(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=Yt("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?et.structural:et.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){if(t.lowestObserverState_!==ee.UP_TO_DATE_)return;t.lowestObserverState_=ee.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===ee.UP_TO_DATE_&&(t.dependenciesState_=ee.POSSIBLY_STALE_,t.onBecomeStale_())}))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing_&&c(32,this.name_,this.derivation),0!==ge.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ae(this),se(this)){var t=ge.trackingContext;this.keepAlive_&&!t&&(ge.trackingContext=this),this.trackAndCompute()&&function(t){if(t.lowestObserverState_===ee.STALE_)return;t.lowestObserverState_=ee.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===ee.POSSIBLY_STALE_?e.dependenciesState_=ee.STALE_:e.dependenciesState_===ee.UP_TO_DATE_&&(t.lowestObserverState_=ee.UP_TO_DATE_)}))}(this),ge.trackingContext=t}}else se(this)&&(this.warnAboutUntrackedRead_(),we(),this.value_=this.computeValue_(!1),Se());var e=this.value_;if(ae(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter_&&c(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else c(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===ee.NOT_TRACKING_,n=this.computeValue_(!0),r=e||ae(t)||ae(n)||!this.equals_(t,n);return r&&(this.value_=n),r},e.computeValue_=function(t){this.isComputing_=!0;var e,n=$t(!1);if(t)e=ue(this,this.derivation,this.scope_);else if(!0===ge.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new oe(t)}return Qt(n),this.isComputing_=!1,e},e.suspend_=function(){this.keepAlive_||(le(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,r=!0,i=void 0;return Ge((function(){var o=n.get();if(!r||e){var a=he();t({observableKind:"computed",debugObjectName:n.name_,type:pn,object:n,newValue:o,oldValue:i}),de(a)}r=!1,i=o}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return R(this.get())},e[Zt]=function(){return this.valueOf()},t}(),ie=T("ComputedValue",re);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}(ee||(ee={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(ne||(ne={}));var oe=function(t){this.cause=void 0,this.cause=t};function ae(t){return t instanceof oe}function se(t){switch(t.dependenciesState_){case ee.UP_TO_DATE_:return!1;case ee.NOT_TRACKING_:case ee.STALE_:return!0;case ee.POSSIBLY_STALE_:for(var e=fe(!0),n=he(),r=t.observing_,i=r.length,o=0;o<i;o++){var a=r[o];if(ie(a)){if(ge.disableErrorBoundaries)a.get();else try{a.get()}catch(t){return de(n),ve(e),!0}if(t.dependenciesState_===ee.STALE_)return de(n),ve(e),!0}}return _e(t),de(n),ve(e),!1}}function ue(t,e,n){var r=fe(!0);_e(t),t.newObserving_=new Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++ge.runId;var i,o=ge.trackingDerivation;if(ge.trackingDerivation=t,ge.inBatch++,!0===ge.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new oe(t)}return ge.inBatch--,ge.trackingDerivation=o,function(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,r=ee.UP_TO_DATE_,i=0,o=t.unboundDepsCount_,a=0;a<o;a++){var s=n[a];0===s.diffValue_&&(s.diffValue_=1,i!==a&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,t.newObserving_=null,o=e.length;for(;o--;){var u=e[o];0===u.diffValue_&&me(u,t),u.diffValue_=0}for(;i--;){var l=n[i];1===l.diffValue_&&(l.diffValue_=0,ye(l,t))}r!==ee.UP_TO_DATE_&&(t.dependenciesState_=r,t.onBecomeStale_())}(t),ve(r),i}function le(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)me(e[n],t);t.dependenciesState_=ee.NOT_TRACKING_}function ce(t){var e=he();try{return t()}finally{de(e)}}function he(){var t=ge.trackingDerivation;return ge.trackingDerivation=null,t}function de(t){ge.trackingDerivation=t}function fe(t){var e=ge.allowStateReads;return ge.allowStateReads=t,e}function ve(t){ge.allowStateReads=t}function _e(t){if(t.dependenciesState_!==ee.UP_TO_DATE_){t.dependenciesState_=ee.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=ee.UP_TO_DATE_}}var pe=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},be=!0,ge=function(){var t=d();return t.__mx_isolated_mobxInstanceCount>0&&!t.__mx_isolated_mobxGlobals&&(be=!1),t.__mx_isolated_mobxGlobals&&t.__mx_isolated_mobxGlobals.version!==(new pe).version&&(be=!1),be?t.__mx_isolated_mobxGlobals?(t.__mx_isolated_mobxInstanceCount+=1,t.__mx_isolated_mobxGlobals.UNCHANGED||(t.__mx_isolated_mobxGlobals.UNCHANGED={}),t.__mx_isolated_mobxGlobals):(t.__mx_isolated_mobxInstanceCount=1,t.__mx_isolated_mobxGlobals=new pe):(setTimeout((function(){c(35)}),1),new pe)}();function ye(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function me(t,e){t.observers_.delete(e),0===t.observers_.size&&Oe(t)}function Oe(t){!1===t.isPendingUnobservation_&&(t.isPendingUnobservation_=!0,ge.pendingUnobservations.push(t))}function we(){ge.inBatch++}function Se(){if(0==--ge.inBatch){Ee();for(var t=ge.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof re&&n.suspend_())}ge.pendingUnobservations=[]}}function Ae(t){var e=ge.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&ge.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(0===t.observers_.size&&ge.inBatch>0&&Oe(t),!1)}function xe(t){t.lowestObserverState_!==ee.STALE_&&(t.lowestObserverState_=ee.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===ee.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=ee.STALE_})))}var je=function(){function t(t,e,n,r){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ee.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=ne.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=r}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ge.pendingReactions.push(this),Ee())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){we(),this.isScheduled_=!1;var t=ge.trackingContext;if(ge.trackingContext=this,se(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}ge.trackingContext=t,Se()}},e.track=function(t){if(!this.isDisposed_){we(),this.isRunning_=!0;var e=ge.trackingContext;ge.trackingContext=this;var n=ue(this,t,void 0);ge.trackingContext=e,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&le(this),ae(n)&&this.reportExceptionInDerivation_(n.cause),Se()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(ge.disableErrorBoundaries)throw t;var n="[mobx] uncaught error in '"+this+"'";ge.suppressReactionErrors||console.error(n,t),ge.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(we(),le(this),Se()))},e.getDisposer_=function(t){var e=this,n=function n(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",n)};return null==t||null==t.addEventListener||t.addEventListener("abort",n),n[$]=this,n},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){},t}(),Pe=100,ke=function(t){return t()};function Ee(){ge.inBatch>0||ge.isRunningReactions||ke(Ce)}function Ce(){ge.isRunningReactions=!0;for(var t=ge.pendingReactions,e=0;t.length>0;){++e===Pe&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}ge.isRunningReactions=!1}var Te=T("Reaction",je);var Ve="action",Ne="autoAction",De=ot(Ve),Le=ot("action.bound",{bound:!0}),Re=ot(Ne,{autoAction:!0}),Be=ot("autoAction.bound",{autoAction:!0,bound:!0});function Me(t){return function(e,n){return A(e)?Yt(e.name||"<unnamed action>",e,t):A(n)?Yt(e,n,t):Y(n)?(t?Re:De).decorate_20223_(e,n):x(n)?F(e,n,t?Re:De):x(e)?X(ot(t?Ne:Ve,{name:e,autoAction:t})):void 0}}var Ie=Me(!1);Object.assign(Ie,De);var Ue=Me(!0);function ze(t){return A(t)&&!0===t.isMobxAction}function Ge(t,e){var n,r,i,o,a;void 0===e&&(e=g);var s,u=null!=(n=null==(r=e)?void 0:r.name)?n:"Autorun";if(!e.scheduler&&!e.delay)s=new je(u,(function(){this.track(h)}),e.onError,e.requiresObservable);else{var l=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Ke}(e),c=!1;s=new je(u,(function(){c||(c=!0,l((function(){c=!1,s.isDisposed_||s.track(h)})))}),e.onError,e.requiresObservable)}function h(){t(s)}return null!=(i=e)&&null!=(o=i.signal)&&o.aborted||s.schedule_(),s.getDisposer_(null==(a=e)?void 0:a.signal)}Object.assign(Ue,Re),Ie.bound=X(Le),Ue.bound=X(Be);var Ke=function(t){return t()};var qe="onBO",We="onBUO";function He(t,e,n){return Je(We,t,e,n)}function Je(t,e,n,r){var i="function"==typeof r?ir(e,n):ir(e),o=A(r)?r:n,a=t+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var t=i[a];t&&(t.delete(o),0===t.size&&delete i[a])}}function Xe(t,e,n,r){var i=M(e);return sr((function(){var e=Gn(t,r)[$];L(i).forEach((function(t){e.extend_(t,i[t],!n||(!(t in n)||n[t]))}))})),t}var Fe=0;function Ye(){this.message="FLOW_CANCELLED"}Ye.prototype=Object.create(Error.prototype);var $e=ct("flow"),Qe=ct("flow.bound",{bound:!0}),Ze=Object.assign((function(t,e){if(Y(e))return $e.decorate_20223_(t,e);if(x(e))return F(t,e,$e);var n=t,r=n.name||"<unnamed flow>",i=function(){var t,e=arguments,i=++Fe,o=Ie(r+" - runid: "+i+" - init",n).apply(this,e),a=void 0,s=new Promise((function(e,n){var s=0;function u(t){var e;a=void 0;try{e=Ie(r+" - runid: "+i+" - yield "+s++,o.next).call(o,t)}catch(t){return n(t)}c(e)}function l(t){var e;a=void 0;try{e=Ie(r+" - runid: "+i+" - yield "+s++,o.throw).call(o,t)}catch(t){return n(t)}c(e)}function c(t){if(!A(null==t?void 0:t.then))return t.done?e(t.value):(a=Promise.resolve(t.value)).then(u,l);t.then(c,n)}t=n,u(void 0)}));return s.cancel=Ie(r+" - runid: "+i+" - cancel",(function(){try{a&&tn(a);var e=o.return(void 0),n=Promise.resolve(e.value);n.then(S,S),tn(n),t(new Ye)}catch(e){t(e)}})),s};return i.isMobXFlow=!0,i}),$e);function tn(t){A(t.cancel)&&t.cancel()}function en(t){return!0===(null==t?void 0:t.isMobXFlow)}function nn(t){return function(t,e){return!!t&&(void 0!==e?!!Wn(t)&&t[$].values_.has(e):Wn(t)||!!t[$]||Z(t)||Te(t)||ie(t))}(t)}function rn(t,e){void 0===e&&(e=void 0),we();try{return t.apply(e)}finally{Se()}}function on(t){return t[$]}Ze.bound=X(Qe);var an={has:function(t,e){return on(t).has_(e)},get:function(t,e){return on(t).get_(e)},set:function(t,e,n){var r;return!!x(e)&&(null==(r=on(t).set_(e,n,!0))||r)},deleteProperty:function(t,e){var n;return!!x(e)&&(null==(n=on(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var r;return null==(r=on(t).defineProperty_(e,n))||r},ownKeys:function(t){return on(t).ownKeys_()},preventExtensions:function(t){c(13)}};function sn(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function un(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),w((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function ln(t,e){var n=he();try{for(var r=[].concat(t.interceptors_||[]),i=0,o=r.length;i<o&&((e=r[i](e))&&!e.type&&c(14),e);i++);return e}finally{de(n)}}function cn(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function hn(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),w((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function dn(t,e){var n=he(),r=t.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);de(n)}}function fn(t,e,n){return sr((function(){var r=Gn(t,n)[$];null!=e||(e=function(t){return B(t,J)||E(t,J,z({},t[J])),t[J]}(t)),L(e).forEach((function(t){return r.make_(t,e[t])}))})),t}var vn=Symbol("mobx-keys");var _n="splice",pn="update",bn={get:function(t,e){var n=t[$];return e===$?n:"length"===e?n.getArrayLength_():"string"!=typeof e||isNaN(e)?B(mn,e)?mn[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var r=t[$];return"length"===e&&r.setArrayLength_(n),"symbol"==typeof e||isNaN(e)?t[e]=n:r.set_(parseInt(e),n),!0},preventExtensions:function(){c(15)}},gn=function(){function t(t,e,n,r){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Q(t),this.enhancer_=function(t,n){return e(t,n,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return un(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),hn(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&c("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&c(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&nr(t+e+1)},e.spliceWithArray_=function(t,e,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=b),sn(this)){var o=ln(this,{object:this.proxy_,type:_n,index:t,removedCount:e,added:n});if(!o)return b;e=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(t){return r.enhancer_(t,void 0)})),this.legacyMode_){var a=n.length-e;this.updateArrayLength_(i,a)}var s=this.spliceItemsIntoValues_(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice_(t,n,s),this.dehanceValues_(s)},e.spliceItemsIntoValues_=function(t,e,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[t,e].concat(n));var i=this.values_.slice(t,t+e),o=this.values_.slice(t+e);this.values_.length+=n.length-e;for(var a=0;a<n.length;a++)this.values_[t+a]=n[a];for(var s=0;s<o.length;s++)this.values_[t+n.length+s]=o[s];return i},e.notifyArrayChildUpdate_=function(t,e,n){var r=!this.owned_&&!1,i=cn(this),o=i||r?{observableKind:"array",object:this.proxy_,type:pn,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;this.atom_.reportChanged(),i&&dn(this,o)},e.notifyArraySplice_=function(t,e,n){var r=!this.owned_&&!1,i=cn(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:_n,index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom_.reportChanged(),i&&dn(this,o)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var n=this.values_;if(this.legacyMode_&&t>n.length&&c(17,t,n.length),t<n.length){this.atom_;var r=n[t];if(sn(this)){var i=ln(this,{type:pn,object:this.proxy_,index:t,newValue:e});if(!i)return;e=i.newValue}(e=this.enhancer_(e,r))!==r&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,r))}else{for(var o=new Array(t+1-n.length),a=0;a<o.length-1;a++)o[a]=void 0;o[o.length-1]=e,this.spliceWithArray_(n.length,0,o)}},t}();function yn(t,e,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),O(),sr((function(){var i=new gn(n,e,r,!1);C(i.values_,$,i);var o=new Proxy(i.values_,bn);return i.proxy_=o,t&&t.length&&i.spliceWithArray_(0,0,t),o}))}var mn={clear:function(){return this.splice(0)},replace:function(t){var e=this[$];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[$];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,e)}return o.spliceWithArray_(t,e,r)},spliceWithArray:function(t,e,n){return this[$].spliceWithArray_(t,e,n)},push:function(){for(var t=this[$],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[$].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[$],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return ge.trackingDerivation&&c(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ge.trackingDerivation&&c(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[$],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function On(t,e){"function"==typeof Array.prototype[t]&&(mn[t]=e(t))}function wn(t){return function(){var e=this[$];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function Sn(t){return function(e,n){var r=this,i=this[$];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[t]((function(t,i){return e.call(n,t,i,r)}))}}function An(t){return function(){var e=this,n=this[$];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(t,n,r){return i(t,n,r,e)},r[t].apply(r,arguments)}}On("at",wn),On("concat",wn),On("flat",wn),On("includes",wn),On("indexOf",wn),On("join",wn),On("lastIndexOf",wn),On("slice",wn),On("toString",wn),On("toLocaleString",wn),On("toSorted",wn),On("toSpliced",wn),On("with",wn),On("every",Sn),On("filter",Sn),On("find",Sn),On("findIndex",Sn),On("findLast",Sn),On("findLastIndex",Sn),On("flatMap",Sn),On("forEach",Sn),On("map",Sn),On("some",Sn),On("toReversed",Sn),On("reduce",An),On("reduceRight",An);var xn,jn,Pn=T("ObservableArrayAdministration",gn);function kn(t){return j(t)&&Pn(t[$])}var En={},Cn="add",Tn="delete";xn=Symbol.iterator,jn=Symbol.toStringTag;var Vn,Nn,Dn=function(){function t(t,e,n){var r=this;void 0===e&&(e=nt),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$]=En,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,A(Map)||c(18),sr((function(){r.keysAtom_=tt("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,t&&r.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!ge.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var r=n=new te(this.has_(t),rt,"ObservableMap.key?",!1);this.hasMap_.set(t,r),He(r,(function(){return e.hasMap_.delete(t)}))}return n.get()},e.set=function(t,e){var n=this.has_(t);if(sn(this)){var r=ln(this,{type:n?pn:Cn,object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if((this.keysAtom_,sn(this))&&!ln(this,{type:Tn,object:this,name:t}))return!1;if(this.has_(t)){var n=cn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Tn,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return rn((function(){var n;e.keysAtom_.reportChanged(),null==(n=e.hasMap_.get(t))||n.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),n&&dn(this,r),!0}return!1},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==ge.UNCHANGED){var r=cn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:pn,object:this,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),r&&dn(this,i)}},e.addValue_=function(t,e){var n=this;this.keysAtom_,rn((function(){var r,i=new te(e,n.enhancer_,"ObservableMap.key",!1);n.data_.set(t,i),e=i.value_,null==(r=n.hasMap_.get(t))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=cn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Cn,object:this,name:t,newValue:e}:null;r&&dn(this,i)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return dr({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t.get(i)}}})},e.entries=function(){var t=this,e=this.keys();return dr({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,t.get(i)]}}})},e[xn]=function(){return this.entries()},e.forEach=function(t,e){for(var n,r=H(this);!(n=r()).done;){var i=n.value,o=i[0],a=i[1];t.call(e,a,o,this)}},e.merge=function(t){var e=this;return Ln(t)&&(t=new Map(t)),rn((function(){P(t)?function(t){var e=Object.keys(t);if(!D)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter((function(e){return p.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=t[0],r=t[1];return e.set(n,r)})):V(t)?(t.constructor!==Map&&c(19,t),t.forEach((function(t,n){return e.set(n,t)}))):null!=t&&c(20,t)})),this},e.clear=function(){var t=this;rn((function(){ce((function(){for(var e,n=H(t.keys());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.replace=function(t){var e=this;return rn((function(){for(var n,r=function(t){if(V(t)||Ln(t))return t;if(Array.isArray(t))return new Map(t);if(P(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return c(21,t)}(t),i=new Map,o=!1,a=H(e.data_.keys());!(n=a()).done;){var s=n.value;if(!r.has(s))if(e.delete(s))o=!0;else{var u=e.data_.get(s);i.set(s,u)}}for(var l,h=H(r.entries());!(l=h()).done;){var d=l.value,f=d[0],v=d[1],_=e.data_.has(f);if(e.set(f,v),e.data_.has(f)){var p=e.data_.get(f);i.set(f,p),_||(o=!0)}}if(!o)if(e.data_.size!==i.size)e.keysAtom_.reportChanged();else for(var b=e.data_.keys(),g=i.keys(),y=b.next(),m=g.next();!y.done;){if(y.value!==m.value){e.keysAtom_.reportChanged();break}y=b.next(),m=g.next()}e.data_=i})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return hn(this,t)},e.intercept_=function(t){return un(this,t)},U(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:jn,get:function(){return"Map"}}]),t}(),Ln=T("ObservableMap",Dn);var Rn={};Vn=Symbol.iterator,Nn=Symbol.toStringTag;var Bn=function(){function t(t,e,n){var r=this;void 0===e&&(e=nt),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[$]=Rn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,A(Set)||c(22),this.enhancer_=function(t,r){return e(t,r,n)},sr((function(){r.atom_=tt(r.name_),t&&r.replace(t)}))}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;rn((function(){ce((function(){for(var e,n=H(t.data_.values());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.forEach=function(t,e){for(var n,r=H(this);!(n=r()).done;){var i=n.value;t.call(e,i,i,this)}},e.add=function(t){var e=this;if((this.atom_,sn(this))&&!ln(this,{type:Cn,object:this,newValue:t}))return this;if(!this.has(t)){rn((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var n=cn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Cn,object:this,newValue:t}:null;n&&dn(this,r)}return this},e.delete=function(t){var e=this;if(sn(this)&&!ln(this,{type:Tn,object:this,oldValue:t}))return!1;if(this.has(t)){var n=cn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Tn,object:this,oldValue:t}:null;return rn((function(){e.atom_.reportChanged(),e.data_.delete(t)})),n&&dn(this,r),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return dr({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return dr({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.replace=function(t){var e=this;return Mn(t)&&(t=new Set(t)),rn((function(){Array.isArray(t)||N(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&c("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return hn(this,t)},e.intercept_=function(t){return un(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Vn]=function(){return this.values()},U(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Nn,get:function(){return"Set"}}]),t}(),Mn=T("ObservableSet",Bn),In=Object.create(null),Un="remove",zn=function(){function t(t,e,n,r){void 0===e&&(e=new Map),void 0===r&&(r=At),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Q("ObservableObject.keys"),this.isPlainObject_=P(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof re)return n.set(e),!0;if(sn(this)){var r=ln(this,{type:pn,object:this.proxy_||this.target_,name:t,newValue:e});if(!r)return null;e=r.newValue}if((e=n.prepareNewValue_(e))!==ge.UNCHANGED){var i=cn(this),o=i?{type:pn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),i&&dn(this,o)}return!0},e.get_=function(t){return ge.trackingDerivation&&!B(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),B(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!ge.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new te(t in this.target_,rt,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(!(t in this.target_)){var n;if(null!=(n=this.target_[J])&&n[t])return;c(1,e.annotationType_,this.name_+"."+t.toString())}for(var r=this.target_;r&&r!==p;){var i=v(r,t);if(i){var o=e.make_(this,t,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}Hn(this,e,t)}},e.extend_=function(t,e,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,r);var i=n.extend_(this,t,e,r);return i&&Hn(this,n,t),i},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{we();var r=this.delete_(t);if(!r)return r;if(sn(this)){var i=ln(this,{object:this.proxy_||this.target_,name:t,type:Cn,newValue:e.value});if(!i)return null;var o=i.newValue;e.value!==o&&(e=z({},e,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else _(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{Se()}return!0},e.defineObservableProperty_=function(t,e,n,r){void 0===r&&(r=!1),this.keysAtom_;try{we();var i=this.delete_(t);if(!i)return i;if(sn(this)){var o=ln(this,{object:this.proxy_||this.target_,name:t,type:Cn,newValue:e});if(!o)return null;e=o.newValue}var a=qn(t),s={configurable:!ge.safeDescriptors||this.isPlainObject_,enumerable:!0,get:a.get,set:a.set};if(r){if(!Reflect.defineProperty(this.target_,t,s))return!1}else _(this.target_,t,s);var u=new te(e,n,"ObservableObject.key",!1);this.values_.set(t,u),this.notifyPropertyAddition_(t,u.value_)}finally{Se()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{we();var r=this.delete_(t);if(!r)return r;if(sn(this))if(!ln(this,{object:this.proxy_||this.target_,name:t,type:Cn,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var i=qn(t),o={configurable:!ge.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,t,o))return!1}else _(this.target_,t,o);this.values_.set(t,new re(e)),this.notifyPropertyAddition_(t,void 0)}finally{Se()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),this.keysAtom_,!B(this.target_,t))return!0;if(sn(this)&&!ln(this,{object:this.proxy_||this.target_,name:t,type:Un}))return null;try{var n,r;we();var i,o=cn(this),a=this.values_.get(t),s=void 0;if(!a&&o)s=null==(i=v(this.target_,t))?void 0:i.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(a&&(this.values_.delete(t),a instanceof te&&(s=a.value_),xe(a)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(t))||r.set(t in this.target_),o){var u={type:Un,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:t};0,o&&dn(this,u)}}finally{Se()}return!0},e.observe_=function(t,e){return hn(this,t)},e.intercept_=function(t){return un(this,t)},e.notifyPropertyAddition_=function(t,e){var n,r,i=cn(this);if(i){var o=i?{type:Cn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;i&&dn(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(t))||r.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),L(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Gn(t,e){var n;if(B(t,$))return t;var r=null!=(n=null==e?void 0:e.name)?n:"ObservableObject",i=new zn(t,new Map,String(r),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:xt(t):void 0}(e));return E(t,$,i),t}var Kn=T("ObservableObjectAdministration",zn);function qn(t){return In[t]||(In[t]={get:function(){return this[$].getObservablePropValue_(t)},set:function(e){return this[$].setObservablePropValue_(t,e)}})}function Wn(t){return!!j(t)&&Kn(t[$])}function Hn(t,e,n){var r;null==(r=t.target_[J])||delete r[n]}var Jn,Xn,Fn=tr(0),Yn=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),$n=0,Qn=function(){};Jn=Qn,Xn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Jn.prototype,Xn):void 0!==Jn.prototype.__proto__?Jn.prototype.__proto__=Xn:Jn.prototype=Xn;var Zn=function(t,e,n){function r(e,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=t.call(this)||this,sr((function(){var t=new gn(r,n,i,!0);t.proxy_=q(o),C(q(o),$,t),e&&e.length&&o.spliceWithArray(0,0,e),Yn&&Object.defineProperty(q(o),"0",Fn)})),o}G(r,t);var i=r.prototype;return i.concat=function(){this[$].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return kn(t)?t.slice():t})))},i[n]=function(){var t=this,e=0;return dr({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},U(r,[{key:"length",get:function(){return this[$].getArrayLength_()},set:function(t){this[$].setArrayLength_(t)}},{key:e,get:function(){return"Array"}}]),r}(Qn,Symbol.toStringTag,Symbol.iterator);function tr(t){return{enumerable:!1,configurable:!0,get:function(){return this[$].get_(t)},set:function(e){this[$].set_(t,e)}}}function er(t){_(Zn.prototype,""+t,tr(t))}function nr(t){if(t>$n){for(var e=$n;e<t+100;e++)er(e);$n=t}}function rr(t,e,n){return new Zn(t,e,n)}function ir(t,e){if("object"==typeof t&&null!==t){if(kn(t))return void 0!==e&&c(23),t[$].atom_;if(Mn(t))return t.atom_;if(Ln(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||c(25,e,ar(t)),n}if(Wn(t)){if(!e)return c(26);var r=t[$].values_.get(e);return r||c(27,e,ar(t)),r}if(Z(t)||ie(t)||Te(t))return t}else if(A(t)&&Te(t[$]))return t[$];c(28)}function or(t,e){return t||c(29),void 0!==e?or(ir(t,e)):Z(t)||ie(t)||Te(t)||Ln(t)||Mn(t)?t:t[$]?t[$]:void c(24,t)}function ar(t,e){var n;if(void 0!==e)n=ir(t,e);else{if(ze(t))return t.name;n=Wn(t)||Ln(t)||Mn(t)?or(t):ir(t)}return n.name_}function sr(t){var e=he(),n=$t(!0);we();try{return t()}finally{Se(),Qt(n),de(e)}}Object.entries(mn).forEach((function(t){var e=t[0],n=t[1];"concat"!==e&&E(Zn.prototype,e,n)})),nr(1e3);var ur=p.toString;function lr(t,e,n){return void 0===n&&(n=-1),cr(t,e,n)}function cr(t,e,n,r,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;var a=ur.call(t);if(a!==ur.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=hr(t),e=hr(e);var s="[object Array]"===a;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,l=e.constructor;if(u!==l&&!(A(u)&&u instanceof u&&A(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===t)return i[c]===e;if(r.push(t),i.push(e),s){if((c=t.length)!==e.length)return!1;for(;c--;)if(!cr(t[c],e[c],n-1,r,i))return!1}else{var h,d=Object.keys(t);if(c=d.length,Object.keys(e).length!==c)return!1;for(;c--;)if(!B(e,h=d[c])||!cr(t[h],e[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function hr(t){return kn(t)?t.slice():V(t)||Ln(t)||N(t)||Mn(t)?Array.from(t.entries()):t}function dr(t){return t[Symbol.iterator]=fr,t}function fr(){return this}["Symbol","Map","Set"].forEach((function(t){void 0===d()[t]&&c("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:ar},$mobx:$});class vr{constructor(e){t(this,"atom",void 0),this.atom=e,fn(this,{props:qt})}get props(){return this.atom.props}}class _r{constructor(e){t(this,"props",void 0),this.props=e,fn(this,{props:Ut.ref,setProps:Ie})}setProps(t){this.props=t}}class pr{constructor(e){t(this,"atom",void 0),t(this,"gate",void 0),this.atom=new _r(e),this.gate=new vr(this.atom)}setProps(t){this.atom.setProps(t)}}function br(t){var e,n;return null!==(n=(e=o(null)).current)&&void 0!==n?n:e.current="function"==typeof t?t():t}const gr=t=>{t&&t.canExecute&&!t.isExecuting&&t.execute()};class yr{constructor(){t(this,"controllers",new Set),t(this,"isSetupCalled",!1)}addController(t){this.controllers.add(t)}removeController(t){this.controllers.delete(t)}setup(){if(this.isSetupCalled)throw new Error("setup method has already been called.");this.isSetupCalled=!0;const[t,e]=function(){const t=new Set;return[e=>{t.add(e)},()=>{for(const e of t)e();t.clear()}]}();for(const e of this.controllers){var n;const r=null===(n=e.setup)||void 0===n?void 0:n.call(e);r&&t(r)}return e}}class mr{constructor(e){t(this,"width",0),t(this,"height",0),t(this,"cleanup",void 0),t(this,"setTarget",(t=>{if(null===t){var e;null===(e=this.cleanup)||void 0===e||e.call(this)}else{const[e,n]=((t,e)=>{let n=null;const r=()=>{null!==n&&(clearTimeout(n),n=null)};return[function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r(),n=setTimeout((()=>t(...o)),e)},r]})(this.setSize,100),r=new ResizeObserver((t=>{const{width:n,height:r}=t[0].contentRect;e(n,r)}));r.observe(t),this.cleanup=()=>{n(),r.disconnect()}}})),e.addController(this),fn(this,{width:Ut,height:Ut,setSize:Ie.bound})}setup(){return()=>{var t;return null===(t=this.cleanup)||void 0===t?void 0:t.call(this)}}setSize(t,e){this.width=t,this.height=e}}function Or(t,e,n){let r={};try{t&&(r={...r,...JSON.parse(t)}),e&&(r={...r,...JSON.parse(e)}),0===Object.keys(r).length&&n&&(r={...r,...JSON.parse(n)})}catch(t){console.error("Error parsing chart layout:",t)}return r}function wr(t){if(!t)return{};try{return JSON.parse(t)}catch(t){return console.error("Error parsing chart config:",t),{}}}class Sr{constructor(e,n){var r,i,o;t(this,"cleanup",void 0),t(this,"editorStateGate",void 0),t(this,"propsGate",void 0),t(this,"sizeProvider",void 0),e.addController(this),this.editorStateGate=n.editorStateGate,this.propsGate=n.propsGate,this.sizeProvider=n.sizeProvider,i={setup:!1},P(r=this)?Xe(r,r,i,o):sr((function(){var t=Gn(r,o)[$];if(!r[vn]){var e=Object.getPrototypeOf(r),n=new Set([].concat(L(r),L(e)));n.delete("constructor"),n.delete($),E(e,vn,n)}r[vn].forEach((function(e){return t.make_(e,!i||!(e in i)||i[e])}))}))}get props(){return this.propsGate.props}get configurationOptions(){return this.props.configurationOptions}get dataAttribute(){var t;return null===(t=this.props.dataAttribute)||void 0===t?void 0:t.value}get dataStatic(){return this.props.dataStatic}get layoutAttribute(){var t;return null===(t=this.props.layoutAttribute)||void 0===t?void 0:t.value}get layoutStatic(){return this.props.layoutStatic}get sampleData(){return this.props.sampleData}get sampleLayout(){return this.props.sampleLayout}setup(){return()=>{var t;return null===(t=this.cleanup)||void 0===t?void 0:t.call(this)}}get chartConfig(){return{displayModeBar:!1,...this.config}}get chartLayout(){var t,e,n;return{...this.layout,width:this.sizeProvider.width,height:this.sizeProvider.height,autosize:!0,font:{family:"Open Sans, sans-serif",size:Math.max(this.sizeProvider.width/1e3*12,8),...this.layout.font},legend:{font:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(t=this.layout.legend)||void 0===t?void 0:t.font},itemwidth:Math.max(this.sizeProvider.width/1e3*10,3),itemsizing:"constant",...this.layout.legend},xaxis:{tickfont:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(e=this.layout.xaxis)||void 0===e?void 0:e.tickfont},...this.layout.xaxis},yaxis:{tickfont:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(n=this.layout.yaxis)||void 0===n?void 0:n.tickfont},...this.layout.yaxis},margin:{l:60,r:60,t:60,b:60,pad:10,...this.layout.margin}}}get chartOnClick(){return t=>{var e;this.props.eventDataAttribute?null===(e=this.props.eventDataAttribute)||void 0===e||e.setValue(JSON.stringify(t.points[0].bbox)):gr(this.props.onClick)}}get chartProps(){return{config:this.chartConfig,data:this.data,layout:this.chartLayout,onClick:this.chartOnClick,width:this.sizeProvider.width,height:this.sizeProvider.height}}get config(){return wr(this.configurationOptions)}get data(){return function(t,e,n){let r=[];try{t&&(r=[...r,...JSON.parse(t)]),e&&(r=[...r,...JSON.parse(e)]),!r.length&&n&&(r=[...r,...JSON.parse(n)])}catch(t){console.error("Error parsing chart data:",t)}return r}(this.dataStatic,this.dataAttribute,this.sampleData)}get layout(){return Or(this.layoutStatic,this.layoutAttribute,this.sampleLayout)}get mergedProps(){const t=this.chartProps,e=this.editorStateGate.props;return{...t,config:{...t.config,...wr(e.config)},layout:{...t.layout,...Or(e.layout)},data:t.data.map(((t,n)=>{let r;try{r=JSON.parse(e.data[n])}catch{console.warn("Failed to parse data for trace(".concat(n,")")),r={}}return{...t,...r}}))}}}const{newPlot:Ar,purge:xr,react:jr}=l;class Pr{constructor(e,n){t(this,"element",void 0),t(this,"plotlyElement",void 0),t(this,"data",void 0),t(this,"layout",void 0),t(this,"config",void 0),this.element=e,this.data=n.data,this.layout=n.layout,this.config=n.config,this.init(n)}init(t){Ar(this.element,this.data,this.layout,this.config).then((e=>{this.plotlyElement=e,null!=t&&t.onClick&&this.plotlyElement.on("plotly_click",t.onClick)})).catch((t=>{console.error("Error initializing chart:",t)}))}update(t){t.data&&(this.data=t.data),t.layout&&(this.layout=t.layout),t.config&&(this.config=t.config),this.redraw()}redraw(){this.plotlyElement&&jr(this.element,this.data,this.layout,this.config).catch((t=>{console.error("Error updating chart:",t)}))}destroy(){this.plotlyElement&&(xr(this.element),this.plotlyElement=void 0)}}class kr{constructor(e){t(this,"cleanup",void 0),t(this,"propsProvider",void 0),t(this,"setChart",(t=>{if(null===t){var e;null===(e=this.cleanup)||void 0===e||e.call(this)}else{const e=new Pr(t,this.propsProvider.mergedProps),n=Ge((()=>{e.update(this.propsProvider.mergedProps)}),{delay:100});this.cleanup=()=>{n(),e.destroy()}}})),this.propsProvider=e.propsProvider}}class Er extends yr{constructor(e){super(),t(this,"resizeCtrl",void 0),t(this,"chartPropsController",void 0),t(this,"plotlyController",void 0),this.resizeCtrl=new mr(this),this.chartPropsController=new Sr(this,{propsGate:e.propsGate,sizeProvider:this.resizeCtrl,editorStateGate:e.editorStateGate}),this.plotlyController=new kr({propsProvider:this.chartPropsController})}}function Cr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?void 0:1===e.length?e[0]:t=>{for(const n of e)"function"==typeof n?n(t):n&&(n.current=t)}}function Tr(t){var r;const i=br((()=>new pr(t))),o=br((()=>new pr({layout:"{}",config:"{}",data:[]}))),{chartPropsController:s,plotlyController:u,resizeCtrl:l}=function(t){const e=br(t);return a((()=>e.setup()),[e]),e}((()=>new Er({propsGate:i.gate,editorStateGate:o.gate}))),c=e({dataLength:s.data.length,initState:n(s.data)});a((()=>{i.setProps(t)})),a((()=>{o.setProps(c.state)})),a((()=>{var e;null!==(e=t.eventDataAttribute)&&void 0!==e&&e.value&&t.onClick&&(gr(t.onClick),t.eventDataAttribute.setValue(""))}),[null===(r=t.eventDataAttribute)||void 0===r?void 0:r.value]);const h={width:"percentage"===t.widthUnit?"".concat(t.width,"%"):"".concat(t.width,"px")};return"percentageOfWidth"===t.heightUnit?h.paddingBottom="percentage"===t.widthUnit?"".concat(t.height,"%"):"".concat(t.width/2,"px"):"pixels"===t.heightUnit?h.height="".concat(t.height,"px"):"percentageOfParent"===t.heightUnit&&(h.height="".concat(t.height,"%")),{containerStyle:h,playgroundData:{store:c,plotData:s.data,layoutOptions:s.layout,configOptions:s.config},ref:Cr(l.setTarget,u.setChart)}}const Vr=r();function Nr(t){const{playgroundData:e,ref:n}=Tr(t),r=i(t);return s(u,null,s(Vr.Provider,{value:e},t.playground),s("div",{ref:n,className:"widget-custom-chart",style:r,tabIndex:t.tabIndex}))}export{Nr as default};
