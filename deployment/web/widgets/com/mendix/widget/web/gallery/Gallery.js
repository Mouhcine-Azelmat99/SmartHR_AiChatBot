function _defineProperty(e,t,n){return(t=_toPropertyKey2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey2(e){var t=_toPrimitive2(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive2(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}define(["exports","react/jsx-runtime","react","react-dom","mendix/filters/builders"],function(e,t,n,r,i){"use strict";var o;const s=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class a{constructor(e,t){_defineProperty(this,"trigger",void 0),_defineProperty(this,"listAction",void 0),_defineProperty(this,"onExecuteAction",e=>{this.listAction&&"get"in this.listAction&&s(this.listAction.get(e))}),this.trigger=e,this.listAction=t}get clickTrigger(){return this.listAction?this.trigger:"none"}update(e){this.listAction=e}}function l(e,t){return"".concat(e,",").concat(t)}function u(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}class c{constructor(e,t){_defineProperty(this,"_listeners",void 0),_defineProperty(this,"_focusTarget",void 0),_defineProperty(this,"_positionController",void 0),_defineProperty(this,"_layout",void 0),_defineProperty(this,"dispatch",e=>{const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))}),this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=t}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(u(this._focusTarget))&&this._setTarget(this._getInitPosition())}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return l(0,0)}}const h=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const d={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,r]=e;return[n,Math.max(0,r-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[r,i]=e;return[r,Math.min(n-1,i+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:r}=n;return r?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:r}=n;return r?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class f{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!h.has(n))return;var n;if(!Object.hasOwn(d,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const r=u(this._getTargetPosition(e));return t.get(d[e.code](r,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}class v{constructor(e,t,n){_defineProperty(this,"rows",void 0),_defineProperty(this,"columns",void 0),_defineProperty(this,"pageSize",void 0),_defineProperty(this,"_positions",void 0),this.columns=t,this.rows=e,this.pageSize=n,this._positions=new Set;for(let n=0;n<e;n+=1)for(let e=0;e<t;e+=1)this._positions.add(l(e,n))}get(e){let[t,n]=e;const r=l(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(r))return r}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var _={};function g(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:_}var y=Object.assign,m=Object.getOwnPropertyDescriptor,b=Object.defineProperty,w=Object.prototype,S=[];Object.freeze(S);var O={};Object.freeze(O);var P="undefined"!=typeof Proxy,x=Object.toString();function A(){P||p("Proxy not available")}function C(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var j=function(){};function E(e){return"function"==typeof e}function T(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function I(e){return null!==e&&"object"==typeof e}function N(e){if(!I(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===x}function k(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function M(e,t,n){b(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function R(e,t,n){b(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function L(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return I(e)&&!0===e[n]}}function V(e){return e instanceof Map}function D(e){return e instanceof Set}var B=void 0!==Object.getOwnPropertySymbols;var K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:B?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function H(e){return null===e?null:"object"==typeof e?""+e:e}function F(e,t){return w.hasOwnProperty.call(e,t)}var U=Object.getOwnPropertyDescriptors||function(e){var t={};return K(e).forEach(function(n){t[n]=m(e,n)}),t};function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function q(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function J(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,W(e,t)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Q=Symbol("mobx-stored-annotations");function ee(e){return Object.assign(function(t,n){if(ne(n))return e.decorate_20223_(t,n);te(t,n,e)},e)}function te(e,t,n){F(e,Q)||M(e,Q,G({},e[Q])),function(e){return e.annotationType_===ce}(n)||(e[Q][t]=n)}function ne(e){return"object"==typeof e&&"string"==typeof e.kind}var re=Symbol("mobx administration"),ie=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ct.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.reportObserved=function(){return Mt(this)},t.reportChanged=function(){Nt(),Rt(this),kt()},t.toString=function(){return this.name_},e}(),oe=L("Atom",ie);function se(e,t,n){void 0===t&&(t=j),void 0===n&&(n=j);var r,i=new ie(e);return t!==j&&an(rn,i,t,r),n!==j&&sn(i,n),i}var ae={identity:function(e,t){return e===t},structural:function(e,t){return jr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return jr(e,t,1)}};function le(e,t,n){return mn(e)?e:Array.isArray(e)?Je.array(e,{name:n}):N(e)?Je.object(e,void 0,{name:n}):V(e)?Je.map(e,{name:n}):D(e)?Je.set(e,{name:n}):"function"!=typeof e||Zt(e)||yn(e)?e:k(e)?_n(e):$t(n,e)}function ue(e){return e}var ce="override";function he(e,t){return{annotationType_:e,options_:t,make_:de,extend_:fe,decorate_20223_:ve}}function de(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Zt(n.value))return 1;var o=pe(e,this,t,n,!1);return b(r,t,o),2}function fe(e,t,n,r){var i=pe(e,this,t,n);return e.defineProperty_(t,i,r)}function ve(e,t){var n=t.kind,r=t.name,i=t.addInitializer,o=this;if("field"!=n){var s,a,l,u,c,h;if("method"==n)return Zt(e)||(a=e,e=rt(null!=(l=null==(u=o.options_)?void 0:u.name)?l:r.toString(),a,null!=(c=null==(h=o.options_)?void 0:h.autoAction)&&c)),null!=(s=this.options_)&&s.bound&&i(function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t}),e;p("Cannot apply '"+o.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else i(function(){te(this,r,o)})}function pe(e,t,n,r,i){var o,s,a,l,u,c,h,d;void 0===i&&(i=jt.safeDescriptors),d=r,t.annotationType_,d.value;var f,v=r.value;null!=(o=t.options_)&&o.bound&&(v=v.bind(null!=(f=e.proxy_)?f:e.target_));return{value:rt(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),v,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function _e(e,t){return{annotationType_:e,options_:t,make_:ge,extend_:ye,decorate_20223_:me}}function ge(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!F(e.target_,t)||!yn(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(yn(n.value))return 1;var o=be(e,this,t,n,!1,!1);return b(r,t,o),2}function ye(e,t,n,r){var i,o=be(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function me(e,t){var n,r=t.name,i=t.addInitializer;return yn(e)||(e=_n(e)),null!=(n=this.options_)&&n.bound&&i(function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t}),e}function be(e,t,n,r,i,o){var s;void 0===o&&(o=jt.safeDescriptors),s=r,t.annotationType_,s.value;var a,l=r.value;(yn(l)||(l=_n(l)),i)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function we(e,t){return{annotationType_:e,options_:t,make_:Se,extend_:Oe,decorate_20223_:Pe}}function Se(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Oe(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,G({},this.options_,{get:n.get,set:n.set}),r)}function Pe(e,t){var n=this,r=t.name;return(0,t.addInitializer)(function(){var t=ar(this)[re],i=G({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new dt(i))}),function(){return this[re].getObservablePropValue_(r)}}function xe(e,t){return{annotationType_:e,options_:t,make_:Ae,extend_:Ce,decorate_20223_:je}}function Ae(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Ce(e,t,n,r){var i,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:le,r)}function je(e,t){var n=this,r=t.kind,i=t.name,o=new WeakSet;function s(e,t){var r,s,a=ar(e)[re],l=new ut(t,null!=(r=null==(s=n.options_)?void 0:s.enhancer)?r:le,"ObservableObject."+i.toString(),!1);a.values_.set(i,l),o.add(e)}if("accessor"==r)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[re].getObservablePropValue_(i)},set:function(e){return o.has(this)||s(this,e),this[re].setObservablePropValue_(i,e)},init:function(e){return o.has(this)||s(this,e),e}}}var Ee="true",Te=Ie();function Ie(e){return{annotationType_:Ee,options_:e,make_:Ne,extend_:ke,decorate_20223_:Me}}function Ne(e,t,n,r){var i,o,s,a;if(n.get)return $e.make_(e,t,n,r);if(n.set){var l=rt(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!jt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(b(r,t,{configurable:!0,set:l}),2)}if(r!==e.target_&&"function"==typeof n.value)return k(n.value)?(null!=(a=this.options_)&&a.autoBind?_n.bound:_n).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?$t.bound:$t).make_(e,t,n,r);var u,c=!1===(null==(i=this.options_)?void 0:i.deep)?Je.ref:Je;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return c.make_(e,t,n,r)}function ke(e,t,n,r){var i,o,s;if(n.get)return $e.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!jt.safeDescriptors||e.isPlainObject_,set:rt(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Je.ref:Je).extend_(e,t,n,r)}function Me(e,t){p("'"+this.annotationType_+"' cannot be used as a decorator")}var Re={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Le(e){return e||Re}Object.freeze(Re);var Ve=xe("observable"),De=xe("observable.ref",{enhancer:ue}),Be=xe("observable.shallow",{enhancer:function(e,t,n){return null==e||cr(e)||Jn(e)||er(e)||rr(e)?e:Array.isArray(e)?Je.array(e,{name:n,deep:!1}):N(e)?Je.object(e,void 0,{name:n,deep:!1}):V(e)?Je.map(e,{name:n,deep:!1}):D(e)?Je.set(e,{name:n,deep:!1}):void 0}}),Ke=xe("observable.struct",{enhancer:function(e,t){return jr(e,t)?t:e}}),He=ee(Ve);function Fe(e){return!0===e.deep?le:!1===e.deep?ue:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:le;var t,n,r}function Ue(e,t,n){return ne(t)?Ve.decorate_20223_(e,t):T(t)?void te(e,t,Ve):mn(e)?e:N(e)?Je.object(e,t,n):Array.isArray(e)?Je.array(e,t):V(e)?Je.map(e,t):D(e)?Je.set(e,t):"object"==typeof e&&null!==e?e:Je.box(e,t)}y(Ue,He);var ze,qe,Ge={box:function(e,t){var n=Le(t);return new ut(e,Fe(n),n.name,!0,n.equals)},array:function(e,t){var n=Le(t);return(!1===jt.useProxies||!1===n.proxy?Sr:Dn)(e,Fe(n),n.name)},map:function(e,t){var n=Le(t);return new Qn(e,Fe(n),n.name)},set:function(e,t){var n=Le(t);return new nr(e,Fe(n),n.name)},object:function(e,t,n){return Ar(function(){return cn(!1===jt.useProxies||!1===(null==n?void 0:n.proxy)?ar({},n):function(e,t){var n,r;return A(),e=ar(e,t),null!=(r=(n=e[re]).proxy_)?r:n.proxy_=new Proxy(e,Pn)}({},n),e,t)})},ref:ee(De),shallow:ee(Be),deep:He,struct:ee(Ke)},Je=y(Ue,Ge),We="computed",Ye=we(We),Xe=we("computed.struct",{equals:ae.structural}),$e=function(e,t){if(ne(t))return Ye.decorate_20223_(e,t);if(T(t))return te(e,t,Ye);if(N(e))return ee(we(We,e));var n=N(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new dt(n)};Object.assign($e,Ye),$e.struct=ee(Xe);var Ze,Qe=0,et=1,tt=null!=(ze=null==(qe=m(function(){},"name"))?void 0:qe.configurable)&&ze,nt={value:"action",configurable:!0,writable:!1,enumerable:!1};function rt(e,t,n,r){function i(){return it(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},tt&&(nt.value=e,b(i,"name",nt)),i}function it(e,t,n,r,i){var o=function(e,t){var n=!1,r=0,i=jt.trackingDerivation,o=!t||!i;Nt();var s=jt.allowStateChanges;o&&(bt(),s=st(!0));var a=St(!0),l={runAsAction_:o,prevDerivation_:i,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:r,actionId_:et++,parentActionId_:Qe};return Qe=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw o.error_=e,e}finally{!function(e){Qe!==e.actionId_&&p(30);Qe=e.parentActionId_,void 0!==e.error_&&(jt.suppressReactionErrors=!0);at(e.prevAllowStateChanges_),Ot(e.prevAllowStateReads_),kt(),e.runAsAction_&&wt(e.prevDerivation_);jt.suppressReactionErrors=!1}(o)}}function ot(e,t){var n=st(e);try{return t()}finally{at(n)}}function st(e){var t=jt.allowStateChanges;return jt.allowStateChanges=e,t}function at(e){jt.allowStateChanges=e}Ze=Symbol.toPrimitive;var lt,ut=function(e){function t(t,n,r,i,o){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=ae.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=o,s.value_=n(t,void 0,r),s}J(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==jt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(xn(this)){var t=Cn(this,{object:this,type:Rn,newValue:e});if(!t)return jt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?jt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),jn(this)&&Tn(this,{type:Rn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return An(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Rn,newValue:this.value_,oldValue:void 0}),En(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return H(this.get())},n[Ze]=function(){return this.valueOf()},t}(ie);lt=Symbol.toPrimitive;var ct,ht,dt=function(){function e(e){this.dependenciesState_=ct.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ct.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new vt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ht.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||p(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=rt("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?ae.structural:ae.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==ct.UP_TO_DATE_)return;e.lowestObserverState_=ct.POSSIBLY_STALE_,e.observers_.forEach(function(e){e.dependenciesState_===ct.UP_TO_DATE_&&(e.dependenciesState_=ct.POSSIBLY_STALE_,e.onBecomeStale_())})}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.get=function(){if(this.isComputing_&&p(32,this.name_,this.derivation),0!==jt.inBatch||0!==this.observers_.size||this.keepAlive_){if(Mt(this),_t(this)){var e=jt.trackingContext;this.keepAlive_&&!e&&(jt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===ct.STALE_)return;e.lowestObserverState_=ct.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===ct.POSSIBLY_STALE_?t.dependenciesState_=ct.STALE_:t.dependenciesState_===ct.UP_TO_DATE_&&(e.lowestObserverState_=ct.UP_TO_DATE_)})}(this),jt.trackingContext=e}}else _t(this)&&(this.warnAboutUntrackedRead_(),Nt(),this.value_=this.computeValue_(!1),kt());var t=this.value_;if(pt(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&p(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else p(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===ct.NOT_TRACKING_,n=this.computeValue_(!0),r=t||pt(e)||pt(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=st(!1);if(e)t=gt(this,this.derivation,this.scope_);else if(!0===jt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new vt(e)}return at(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(yt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return Qt(function(){var o=n.get();if(!r||t){var s=bt();e({observableKind:"computed",debugObjectName:n.name_,type:Rn,object:n,newValue:o,oldValue:i}),wt(s)}r=!1,i=o})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return H(this.get())},t[lt]=function(){return this.valueOf()},e}(),ft=L("ComputedValue",dt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(ct||(ct={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ht||(ht={}));var vt=function(e){this.cause=void 0,this.cause=e};function pt(e){return e instanceof vt}function _t(e){switch(e.dependenciesState_){case ct.UP_TO_DATE_:return!1;case ct.NOT_TRACKING_:case ct.STALE_:return!0;case ct.POSSIBLY_STALE_:for(var t=St(!0),n=bt(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(ft(s)){if(jt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return wt(n),Ot(t),!0}if(e.dependenciesState_===ct.STALE_)return wt(n),Ot(t),!0}}return Pt(e),wt(n),Ot(t),!1}}function gt(e,t,n){var r=St(!0);Pt(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++jt.runId;var i,o=jt.trackingDerivation;if(jt.trackingDerivation=e,jt.inBatch++,!0===jt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new vt(e)}return jt.inBatch--,jt.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=ct.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&Tt(l,e),l.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Et(u,e))}r!==ct.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Ot(r),i}function yt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Tt(t[n],e);e.dependenciesState_=ct.NOT_TRACKING_}function mt(e){var t=bt();try{return e()}finally{wt(t)}}function bt(){var e=jt.trackingDerivation;return jt.trackingDerivation=null,e}function wt(e){jt.trackingDerivation=e}function St(e){var t=jt.allowStateReads;return jt.allowStateReads=e,t}function Ot(e){jt.allowStateReads=e}function Pt(e){if(e.dependenciesState_!==ct.UP_TO_DATE_){e.dependenciesState_=ct.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=ct.UP_TO_DATE_}}var xt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},At=!0,Ct=!1,jt=function(){var e=g();return e.__mx_isolated_mobxInstanceCount>0&&!e.__mx_isolated_mobxGlobals&&(At=!1),e.__mx_isolated_mobxGlobals&&e.__mx_isolated_mobxGlobals.version!==(new xt).version&&(At=!1),At?e.__mx_isolated_mobxGlobals?(e.__mx_isolated_mobxInstanceCount+=1,e.__mx_isolated_mobxGlobals.UNCHANGED||(e.__mx_isolated_mobxGlobals.UNCHANGED={}),e.__mx_isolated_mobxGlobals):(e.__mx_isolated_mobxInstanceCount=1,e.__mx_isolated_mobxGlobals=new xt):(setTimeout(function(){Ct||p(35)},1),new xt)}();function Et(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Tt(e,t){e.observers_.delete(t),0===e.observers_.size&&It(e)}function It(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,jt.pendingUnobservations.push(e))}function Nt(){jt.inBatch++}function kt(){if(0===--jt.inBatch){Bt();for(var e=jt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof dt&&n.suspend_())}jt.pendingUnobservations=[]}}function Mt(e){var t=jt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&jt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&jt.inBatch>0&&It(e),!1)}function Rt(e){e.lowestObserverState_!==ct.STALE_&&(e.lowestObserverState_=ct.STALE_,e.observers_.forEach(function(e){e.dependenciesState_===ct.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=ct.STALE_}))}var Lt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ct.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=ht.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,jt.pendingReactions.push(this),Bt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Nt(),this.isScheduled_=!1;var e=jt.trackingContext;if(jt.trackingContext=this,_t(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}jt.trackingContext=e,kt()}},t.track=function(e){if(!this.isDisposed_){Nt(),this.isRunning_=!0;var t=jt.trackingContext;jt.trackingContext=this;var n=gt(this,e,void 0);jt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&yt(this),pt(n)&&this.reportExceptionInDerivation_(n.cause),kt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(jt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";jt.suppressReactionErrors||console.error(n,e),jt.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Nt(),yt(this),kt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[re]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),Vt=100,Dt=function(e){return e()};function Bt(){jt.inBatch>0||jt.isRunningReactions||Dt(Kt)}function Kt(){jt.isRunningReactions=!0;for(var e=jt.pendingReactions,t=0;e.length>0;){++t===Vt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}jt.isRunningReactions=!1}var Ht=L("Reaction",Lt);var Ft="action",Ut="autoAction",zt="<unnamed action>",qt=he(Ft),Gt=he("action.bound",{bound:!0}),Jt=he(Ut,{autoAction:!0}),Wt=he("autoAction.bound",{autoAction:!0,bound:!0});function Yt(e){return function(t,n){return E(t)?rt(t.name||zt,t,e):E(n)?rt(t,n,e):ne(n)?(e?Jt:qt).decorate_20223_(t,n):T(n)?te(t,n,e?Jt:qt):T(t)?ee(he(e?Ut:Ft,{name:t,autoAction:e})):void 0}}var Xt=Yt(!1);Object.assign(Xt,qt);var $t=Yt(!0);function Zt(e){return E(e)&&!0===e.isMobxAction}function Qt(e,t){var n,r,i,o,s;void 0===t&&(t=O);var a,l=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new Lt(l,function(){this.track(h)},t.onError,t.requiresObservable);else{var u=tn(t),c=!1;a=new Lt(l,function(){c||(c=!0,u(function(){c=!1,a.isDisposed_||a.track(h)}))},t.onError,t.requiresObservable)}function h(){e(a)}return null!=(i=t)&&null!=(o=i.signal)&&o.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign($t,Jt),Xt.bound=ee(Gt),$t.bound=ee(Wt);var en=function(e){return e()};function tn(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:en}function nn(e,t,n){var r,i,o,s;void 0===n&&(n=O);var a,l,u,c=null!=(r=n.name)?r:"Reaction",h=Xt(c,n.onError?(a=n.onError,l=t,function(){try{return l.apply(this,arguments)}catch(e){a.call(this,e)}}):t),d=!n.scheduler&&!n.delay,f=tn(n),v=!0,p=!1,_=n.compareStructural?ae.structural:n.equals||ae.default,g=new Lt(c,function(){v||d?y():p||(p=!0,f(y))},n.onError,n.requiresObservable);function y(){if(p=!1,!g.isDisposed_){var t=!1,r=u;g.track(function(){var n=ot(!1,function(){return e(g)});t=v||!_(u,n),u=n}),(v&&n.fireImmediately||!v&&t)&&h(u,r,g),v=!1}}return null!=(i=n)&&null!=(o=i.signal)&&o.aborted||g.schedule_(),g.getDisposer_(null==(s=n)?void 0:s.signal)}var rn="onBO",on="onBUO";function sn(e,t,n){return an(on,e,t,n)}function an(e,t,n,r){var i="function"==typeof r?Or(t,n):Or(t),o=E(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var ln="always";function un(e){!0===e.isolateGlobalState&&function(){if((jt.pendingReactions.length||jt.inBatch||jt.isRunningReactions)&&p(36),Ct=!0,At){var e=g();0===--e.__mx_isolated_mobxInstanceCount&&(e.__mx_isolated_mobxGlobals=void 0),jt=new xt}}();var t,n,r=e.useProxies,i=e.enforceActions;if(void 0!==r&&(jt.useProxies=r===ln||"never"!==r&&"undefined"!=typeof Proxy),"ifavailable"===r&&(jt.verifyProxies=!0),void 0!==i){var o=i===ln?ln:"observed"===i;jt.enforceActions=o,jt.allowStateChanges=!0!==o&&o!==ln}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(t){t in e&&(jt[t]=!!e[t])}),jt.allowStateReads=!jt.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=Dt,Dt=function(e){return t(function(){return n(e)})})}function cn(e,t,n,r){var i=U(t);return Ar(function(){var t=ar(e,r)[re];K(i).forEach(function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))})}),e}function hn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(hn)),n}var dn=0;function fn(){this.message="FLOW_CANCELLED"}fn.prototype=Object.create(Error.prototype);var vn=_e("flow"),pn=_e("flow.bound",{bound:!0}),_n=Object.assign(function(e,t){if(ne(t))return vn.decorate_20223_(e,t);if(T(t))return te(e,t,vn);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++dn,o=Xt(r+" - runid: "+i+" - init",n).apply(this,t),s=void 0,a=new Promise(function(t,n){var a=0;function l(e){var t;s=void 0;try{t=Xt(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=Xt(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!E(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)});return a.cancel=Xt(r+" - runid: "+i+" - cancel",function(){try{s&&gn(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(j,j),gn(n),e(new fn)}catch(t){e(t)}}),a};return i.isMobXFlow=!0,i},vn);function gn(e){E(e.cancel)&&e.cancel()}function yn(e){return!0===(null==e?void 0:e.isMobXFlow)}function mn(e){return function(e,t){return!!e&&(void 0!==t?!!cr(e)&&e[re].values_.has(t):cr(e)||!!e[re]||oe(e)||Ht(e)||ft(e))}(e)}function bn(e,t){void 0===t&&(t=void 0),Nt();try{return e.apply(t)}finally{kt()}}function wn(e,t,n){return 1===arguments.length||t&&"object"==typeof t?function(e,t){var n,r,i;if(null!=t&&null!=(n=t.signal)&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var o=new Promise(function(n,o){var s,a=Sn(e,n,G({},t,{onError:o}));r=function(){a(),o(new Error("WHEN_CANCELLED"))},i=function(){a(),o(new Error("WHEN_ABORTED"))},null==t||null==(s=t.signal)||null==s.addEventListener||s.addEventListener("abort",i)}).finally(function(){var e;return null==t||null==(e=t.signal)||null==e.removeEventListener?void 0:e.removeEventListener("abort",i)});return o.cancel=r,o}(e,t):Sn(e,t,n||{})}function Sn(e,t,n){var r;if("number"==typeof n.timeout){var i=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!s[re].isDisposed_){if(s(),!n.onError)throw i;n.onError(i)}},n.timeout)}n.name="When";var o=rt("When-effect",t),s=Qt(function(t){ot(!1,e)&&(t.dispose(),r&&clearTimeout(r),o())},n);return s}function On(e){return e[re]}_n.bound=ee(pn);var Pn={has:function(e,t){return On(e).has_(t)},get:function(e,t){return On(e).get_(t)},set:function(e,t,n){var r;return!!T(t)&&(null==(r=On(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!T(t)&&(null==(n=On(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=On(e).defineProperty_(t,n))||r},ownKeys:function(e){return On(e).ownKeys_()},preventExtensions:function(e){p(13)}};function xn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function An(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),C(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function Cn(e,t){var n=bt();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&((t=r[i](t))&&!t.type&&p(14),t);i++);return t}finally{wt(n)}}function jn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function En(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),C(function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)})}function Tn(e,t){var n=bt(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);wt(n)}}function In(e,t,n){return Ar(function(){var r=ar(e,n)[re];null!=t||(t=function(e){return F(e,Q)||M(e,Q,G({},e[Q])),e[Q]}(e)),K(t).forEach(function(e){return r.make_(e,t[e])})}),e}var Nn=Symbol("mobx-keys");function kn(e,t,n){return N(e)?cn(e,e,t,n):(Ar(function(){var r=ar(e,n)[re];if(!e[Nn]){var i=Object.getPrototypeOf(e),o=new Set([].concat(K(e),K(i)));o.delete("constructor"),o.delete(re),M(i,Nn,o)}e[Nn].forEach(function(e){return r.make_(e,!t||(!(e in t)||t[e]))})}),e)}var Mn="splice",Rn="update",Ln={get:function(e,t){var n=e[re];return t===re?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?F(Bn,t)?Bn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[re];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){p(15)}},Vn=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new ie(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return An(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),En(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&p("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&p(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&wr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=S),xn(this)){var o=Cn(this,{object:this.proxy_,type:Mn,index:e,removedCount:t,added:n});if(!o)return S;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map(function(e){return r.enhancer_(e,void 0)}),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=jn(this),o=i||r?{observableKind:"array",object:this.proxy_,type:Rn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&Tn(this,o)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=jn(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Mn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Tn(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&p(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(xn(this)){var i=Cn(this,{type:Rn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function Dn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),A(),Ar(function(){var i=new Vn(n,t,r,!1);R(i.values_,re,i);var o=new Proxy(i.values_,Ln);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o})}var Bn={clear:function(){return this.splice(0)},replace:function(e){var t=this[re];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[re];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[re].spliceWithArray_(e,t,n)},push:function(){for(var e=this[re],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[re].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[re],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return jt.trackingDerivation&&p(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){jt.trackingDerivation&&p(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[re],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Kn(e,t){"function"==typeof Array.prototype[e]&&(Bn[e]=t(e))}function Hn(e){return function(){var t=this[re];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Fn(e){return function(t,n){var r=this,i=this[re];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e](function(e,i){return t.call(n,e,i,r)})}}function Un(e){return function(){var t=this,n=this[re];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Kn("at",Hn),Kn("concat",Hn),Kn("flat",Hn),Kn("includes",Hn),Kn("indexOf",Hn),Kn("join",Hn),Kn("lastIndexOf",Hn),Kn("slice",Hn),Kn("toString",Hn),Kn("toLocaleString",Hn),Kn("toSorted",Hn),Kn("toSpliced",Hn),Kn("with",Hn),Kn("every",Fn),Kn("filter",Fn),Kn("find",Fn),Kn("findIndex",Fn),Kn("findLast",Fn),Kn("findLastIndex",Fn),Kn("flatMap",Fn),Kn("forEach",Fn),Kn("map",Fn),Kn("some",Fn),Kn("toReversed",Fn),Kn("reduce",Un),Kn("reduceRight",Un);var zn,qn,Gn=L("ObservableArrayAdministration",Vn);function Jn(e){return I(e)&&Gn(e[re])}var Wn={},Yn="add",Xn="delete";zn=Symbol.iterator,qn=Symbol.toStringTag;var $n,Zn,Qn=function(){function e(e,t,n){var r=this;void 0===t&&(t=le),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[re]=Wn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,E(Map)||p(18),Ar(function(){r.keysAtom_=se("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)})}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!jt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new ut(this.has_(e),ue,"ObservableMap.key?",!1);this.hasMap_.set(e,r),sn(r,function(){return t.hasMap_.delete(e)})}return n.get()},t.set=function(e,t){var n=this.has_(e);if(xn(this)){var r=Cn(this,{type:n?Rn:Yn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,xn(this))&&!Cn(this,{type:Xn,object:this,name:e}))return!1;if(this.has_(e)){var n=jn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Xn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return bn(function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)}),n&&Tn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==jt.UNCHANGED){var r=jn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Rn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Tn(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,bn(function(){var r,i=new ut(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()});var r=jn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Yn,object:this,name:e,newValue:t}:null;r&&Tn(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Ir({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return Ir({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[zn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=$(this);!(n=r()).done;){var i=n.value,o=i[0],s=i[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return er(e)&&(e=new Map(e)),bn(function(){N(e)?function(e){var t=Object.keys(e);if(!B)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(t){return w.propertyIsEnumerable.call(e,t)})):t}(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=e[0],r=e[1];return t.set(n,r)}):V(e)?(e.constructor!==Map&&p(19,e),e.forEach(function(e,n){return t.set(n,e)})):null!=e&&p(20,e)}),this},t.clear=function(){var e=this;bn(function(){mt(function(){for(var t,n=$(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}})})},t.replace=function(e){var t=this;return bn(function(){for(var n,r=function(e){if(V(e)||er(e))return e;if(Array.isArray(e))return new Map(e);if(N(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return p(21,e)}(e),i=new Map,o=!1,s=$(t.data_.keys());!(n=s()).done;){var a=n.value;if(!r.has(a))if(t.delete(a))o=!0;else{var l=t.data_.get(a);i.set(a,l)}}for(var u,c=$(r.entries());!(u=c()).done;){var h=u.value,d=h[0],f=h[1],v=t.data_.has(d);if(t.set(d,f),t.data_.has(d)){var _=t.data_.get(d);i.set(d,_),v||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),y=i.keys(),m=g.next(),b=y.next();!m.done;){if(m.value!==b.value){t.keysAtom_.reportChanged();break}m=g.next(),b=y.next()}t.data_=i}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return En(this,e)},t.intercept_=function(e){return An(this,e)},q(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:qn,get:function(){return"Map"}}]),e}(),er=L("ObservableMap",Qn);var tr={};$n=Symbol.iterator,Zn=Symbol.toStringTag;var nr=function(){function e(e,t,n){var r=this;void 0===t&&(t=le),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[re]=tr,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,E(Set)||p(22),this.enhancer_=function(e,r){return t(e,r,n)},Ar(function(){r.atom_=se(r.name_),e&&r.replace(e)})}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;bn(function(){mt(function(){for(var t,n=$(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}})})},t.forEach=function(e,t){for(var n,r=$(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,xn(this))&&!Cn(this,{type:Yn,object:this,newValue:e}))return this;if(!this.has(e)){bn(function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()});var n=jn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Yn,object:this,newValue:e}:null;n&&Tn(this,r)}return this},t.delete=function(e){var t=this;if(xn(this)&&!Cn(this,{type:Xn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=jn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Xn,object:this,oldValue:e}:null;return bn(function(){t.atom_.reportChanged(),t.data_.delete(e)}),n&&Tn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Ir({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Ir({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return rr(e)&&(e=new Set(e)),bn(function(){Array.isArray(e)||D(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):null!=e&&p("Cannot initialize set from "+e)}),this},t.observe_=function(e,t){return En(this,e)},t.intercept_=function(e){return An(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[$n]=function(){return this.values()},q(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Zn,get:function(){return"Set"}}]),e}(),rr=L("ObservableSet",nr),ir=Object.create(null),or="remove",sr=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Te),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new ie("ObservableObject.keys"),this.isPlainObject_=N(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof dt)return n.set(t),!0;if(xn(this)){var r=Cn(this,{type:Rn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==jt.UNCHANGED){var i=jn(this),o=i?{type:Rn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Tn(this,o)}return!0},t.get_=function(e){return jt.trackingDerivation&&!F(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),F(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!jt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new ut(e in this.target_,ue,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[Q])&&n[e])return;p(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==w;){var i=m(r,e);if(i){var o=t.make_(this,e,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}hr(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&hr(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Nt();var r=this.delete_(e);if(!r)return r;if(xn(this)){var i=Cn(this,{object:this.proxy_||this.target_,name:e,type:Yn,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=G({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else b(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{kt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{Nt();var i=this.delete_(e);if(!i)return i;if(xn(this)){var o=Cn(this,{object:this.proxy_||this.target_,name:e,type:Yn,newValue:t});if(!o)return null;t=o.newValue}var s=ur(e),a={configurable:!jt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else b(this.target_,e,a);var l=new ut(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{kt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Nt();var r=this.delete_(e);if(!r)return r;if(xn(this))if(!Cn(this,{object:this.proxy_||this.target_,name:e,type:Yn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=ur(e),o={configurable:!jt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else b(this.target_,e,o);this.values_.set(e,new dt(t)),this.notifyPropertyAddition_(e,void 0)}finally{kt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!F(this.target_,e))return!0;if(xn(this)&&!Cn(this,{object:this.proxy_||this.target_,name:e,type:or}))return null;try{var n,r;Nt();var i,o=jn(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(i=m(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof ut&&(a=s.value_),Rt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),o){var l={type:or,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&Tn(this,l)}}finally{kt()}return!0},t.observe_=function(e,t){return En(this,e)},t.intercept_=function(e){return An(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=jn(this);if(i){var o=i?{type:Yn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&Tn(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),K(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function ar(e,t){var n;if(F(e,re))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new sr(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Ie(e):void 0}(t));return M(e,re,i),e}var lr=L("ObservableObjectAdministration",sr);function ur(e){return ir[e]||(ir[e]={get:function(){return this[re].getObservablePropValue_(e)},set:function(t){return this[re].setObservablePropValue_(e,t)}})}function cr(e){return!!I(e)&&lr(e[re])}function hr(e,t,n){var r;null==(r=e.target_[Q])||delete r[n]}var dr,fr,vr=mr(0),pr=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),_r=0,gr=function(){};dr=gr,fr=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(dr.prototype,fr):void 0!==dr.prototype.__proto__?dr.prototype.__proto__=fr:dr.prototype=fr;var yr=function(e,t,n){function r(t,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this,Ar(function(){var e=new Vn(r,n,i,!0);e.proxy_=Y(o),R(Y(o),re,e),t&&t.length&&o.spliceWithArray(0,0,t),pr&&Object.defineProperty(Y(o),"0",vr)}),o}J(r,e);var i=r.prototype;return i.concat=function(){this[re].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map(function(e){return Jn(e)?e.slice():e}))},i[n]=function(){var e=this,t=0;return Ir({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},q(r,[{key:"length",get:function(){return this[re].getArrayLength_()},set:function(e){this[re].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(gr,Symbol.toStringTag,Symbol.iterator);function mr(e){return{enumerable:!1,configurable:!0,get:function(){return this[re].get_(e)},set:function(t){this[re].set_(e,t)}}}function br(e){b(yr.prototype,""+e,mr(e))}function wr(e){if(e>_r){for(var t=_r;t<e+100;t++)br(t);_r=e}}function Sr(e,t,n){return new yr(e,t,n)}function Or(e,t){if("object"==typeof e&&null!==e){if(Jn(e))return void 0!==t&&p(23),e[re].atom_;if(rr(e))return e.atom_;if(er(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||p(25,t,xr(e)),n}if(cr(e)){if(!t)return p(26);var r=e[re].values_.get(t);return r||p(27,t,xr(e)),r}if(oe(e)||ft(e)||Ht(e))return e}else if(E(e)&&Ht(e[re]))return e[re];p(28)}function Pr(e,t){return e||p(29),void 0!==t?Pr(Or(e,t)):oe(e)||ft(e)||Ht(e)||er(e)||rr(e)?e:e[re]?e[re]:void p(24,e)}function xr(e,t){var n;if(void 0!==t)n=Or(e,t);else{if(Zt(e))return e.name;n=cr(e)||er(e)||rr(e)?Pr(e):Or(e)}return n.name_}function Ar(e){var t=bt(),n=st(!0);Nt();try{return e()}finally{kt(),at(n),wt(t)}}Object.entries(Bn).forEach(function(e){var t=e[0],n=e[1];"concat"!==t&&M(yr.prototype,t,n)}),wr(1e3);var Cr=w.toString;function jr(e,t,n){return void 0===n&&(n=-1),Er(e,t,n)}function Er(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Cr.call(e);if(s!==Cr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Tr(e),t=Tr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(E(l)&&l instanceof l&&E(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Er(e[c],t[c],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!F(t,h=d[c])||!Er(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Tr(e){return Jn(e)?e.slice():V(e)||er(e)||D(e)||rr(e)?Array.from(e.entries()):e}function Ir(e){return e[Symbol.iterator]=Nr,e}function Nr(){return this}["Symbol","Map","Set"].forEach(function(e){void 0===g()[e]&&p("MobX requires global '"+e+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:xr},$mobx:re});class kr{constructor(e){_defineProperty(this,"selectionValue",void 0),_defineProperty(this,"type","Single"),this.selectionValue=e}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}reduceTo(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class Mr{constructor(e,t){_defineProperty(this,"selectionValue",void 0),_defineProperty(this,"selectableItems",void 0),_defineProperty(this,"type","Multi"),_defineProperty(this,"rangeStart",void 0),_defineProperty(this,"rangeEnd",void 0),this.selectionValue=e,this.selectableItems=t,this.rangeStart=void 0,In(this,{selectionStatus:$e,selectionValue:Je.ref,selectableItems:Je.ref,updateProps:Xt})}isSelected(e){return this.selectionValue.selection.some(t=>t.id===e.id)}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){const e=new Set(this.selectionValue.selection.map(e=>e.id)),t=this.selectableItems.reduce((t,n)=>e.has(n.id)?t+1:t,0);return 0===t?"none":t===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter(t=>t.id!==e.id)),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return void(this.rangeEnd=void 0);const[r,i]=t,o=this.rangeEnd,s=this.selectableItems.indexOf(r);this.rangeEnd=s>-1?s:void 0,this._updateSelectionWithRange({start:this.rangeStart,end:o,newEnd:s,selectionMode:i})}_updateSelectionWithRange(e){const{start:t,end:n,newEnd:r,selectionMode:i}=e,o="toggle"===i;if(void 0===t||-1===r||n===r)return;if(void 0===n){let e=this._getRange(t,r);return e=o?this._union(this.selectionValue.selection,e):e,void this.selectionValue.setSelection(e)}const s=this._getRange(t,n),a=this._getRange(t,r);let l=o?[...this.selectionValue.selection]:[];l=this._diff(l,s),l=this._union(l,a),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[r,i]=[Rr(e,0,n),Rr(t,0,n)].sort((e,t)=>e-t);return this.selectableItems.slice(r,i+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],r=new Set(e.map(e=>e.id));for(const e of t)r.has(e.id)||(r.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),r=new Set(t.map(e=>e.id));for(const e of n)r.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){const e=this._union(this.selectableItems,this.selectionValue.selection);this.selectionValue.setSelection(e),this._resetRange()}selectNone(){const e=this._diff(this.selectionValue.selection,this.selectableItems);this.selectionValue.setSelection(e),this._resetRange()}clearSelection(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e,t){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e,t)}_findIndexInList(e,t,n){const r=this.selectableItems.length-1,i="forward"===t;if("edge"===n)return i?r:0;return Rr(i?e+n:e-n,0,r)}_findIndexInGrid(e,t,n){const{columnIndex:r}=Vr(n,this.selectableItems.length,e);return"PageDown"===t?this.selectableItems.length-(n-r):"Home"===t?e-r:"End"===t?e+(n-(r+1)):r}selectUpToAdjacent(e,t,n,r){if(!1===t)return void this._resetRange();const i=this.selectableItems.findIndex(t=>t.id===e.id);let o=-1;if(o="direction"in r?this._findIndexInList(i,r.direction,r.size):this._findIndexInGrid(i,r.code,r.numberOfColumns),o===i)return;void 0===this.rangeStart&&this._setRangeStart(e);const s=this.selectableItems.at(o);s&&this._setRangeEnd(s,n)}togglePageSelection(){"all"===this.selectionStatus?this.selectNone():this.selectAll()}}const Rr=(e,t,n)=>Math.min(Math.max(e,t),n);function Lr(e,t,r,i){const o=n.useRef([]),a=n.useRef(!1);n.useState(()=>{e&&e.setKeepSelection(function(e){if("function"==typeof e)return e;return"always keep"===e?()=>!0:()=>!1}(i))}),a.current||(a.current="loading"!==(null==t?void 0:t.status)),n.useEffect(()=>{var t;const n=o.current,i=null!==(t=null==e?void 0:e.selection)&&void 0!==t?t:[],l=Array.isArray(i)?i:[i];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map(e=>e.id));return e.every(e=>n.has(e.id))})(n,l)||(o.current=l,a.current&&s(r))},[null==e?void 0:e.selection,r]);const l=n.useRef(void 0);var u,c;void 0!==e&&("Single"===e.type?l.current?l.current.updateProps(e):l.current=new kr(e):l.current?l.current.updateProps(e,null!==(u=t.items)&&void 0!==u?u:[]):l.current=new Mr(e,null!==(c=t.items)&&void 0!==c?c:[]));return l.current}function Vr(e,t,n){if(n<0||n>=t)return{columnIndex:-1,rowIndex:-1};const r=n%e,i=function(e,t){return Math.floor(e/t)}(n,e);return{columnIndex:r,rowIndex:i}}const Dr=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),Br=(e,t)=>{let n=!1;const[r,i]=function(e,t){let n=0,r=0;return[function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=(new Date).getTime()-r,l=()=>{n=0,r=(new Date).getTime(),e(...o)};n||(a>=t?l():n=window.setTimeout(l,t-a))},()=>{clearTimeout(n),n=0}]}(()=>{n=!0,e()},500),o={eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){const t=e.currentTarget===e.target;return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)&&t}(t),handler:r};return[o,{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&Dr.has(t.code)&&n,handler:()=>{n=!1,i(),null==t||t()}}]};function Kr(e,t){return t.metaKey||t.ctrlKey?"toggle":e.selectionMode}const Hr=(e,t)=>{const n={eventName:"onKeyDown",filter:(e,t)=>"ArrowUp"===t.code&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,Kr(n,r),{direction:"backward",size:t})},r={eventName:"onKeyDown",filter:(e,t)=>"ArrowDown"===t.code&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,Kr(n,r),{direction:"forward",size:t})},i={eventName:"onKeyDown",filter:(e,t)=>"ArrowLeft"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,Kr(t,n),{direction:"backward",size:1})},o={eventName:"onKeyDown",filter:(e,t)=>"ArrowRight"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,Kr(t,n),{direction:"forward",size:1})},s=new Set(["PageUp","PageDown","Home","End"]);return[n,r,i,o,{eventName:"onKeyDown",filter:(e,t)=>s.has(t.code)&&"Multi"===e.selectionType,handler:(n,r)=>e(n.item,r.shiftKey,Kr(n,r),{code:r.code,numberOfColumns:t})}]},Fr="com.mendix.widgets.web.selectable.selectionContext";class Ur{constructor(e,t){var n=this;_defineProperty(this,"selection",void 0),_defineProperty(this,"selectionHelper",void 0),_defineProperty(this,"onSelect",function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))}),_defineProperty(this,"_onSelectItemMulti",function(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"Multi"===(null===(r=n.selectionHelper)||void 0===r?void 0:r.type)&&(t?n.selectionHelper.selectUpTo(e,i?"toggle":"clear"):n.selectItem(e,i))}),_defineProperty(this,"_onSelectItemSingle",function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.selectItem(e,r)}),_defineProperty(this,"onSelectAll",e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))}),_defineProperty(this,"onSelectAdjacent",function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)}),_defineProperty(this,"isSelected",e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e)),_defineProperty(this,"onClearSelection",()=>{var e;"Multi"===(null===(e=this.selectionHelper)||void 0===e?void 0:e.type)&&this.selectionHelper.clearSelection()}),_defineProperty(this,"selectItem",(e,t)=>{void 0!==this.selectionHelper&&(!1!==t?this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):"Multi"===this.selectionHelper.type?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e):this.selectionHelper.reduceTo(e))}),this.selection=e,this.selectionHelper=t}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function zr(e){var t,r;return null!==(r=(t=n.useRef(null)).current)&&void 0!==r?r:t.current="function"==typeof e?e():e}if(!n.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!In)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function qr(e){e()}function Gr(e){return hn(Or(e,t));var t}var Jr,Wr,Yr=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach(function(r,i){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(i))}),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),Xr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:Yr)(function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null});function $r(e){e.reaction=new Lt("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)})}var Zr="function"==typeof Symbol&&Symbol.for,Qr=null!==(Wr=null===(Jr=Object.getOwnPropertyDescriptor(function(){},"name"))||void 0===Jr?void 0:Jr.configurable)&&void 0!==Wr&&Wr,ei=Zr?Symbol.for("react.forward_ref"):"function"==typeof n.forwardRef&&n.forwardRef(function(e){return null}).$$typeof,ti=Zr?Symbol.for("react.memo"):"function"==typeof n.memo&&n.memo(function(e){return null}).$$typeof;function ni(e,t){var r;if(ti&&e.$$typeof===ti)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=null!==(r=null==t?void 0:t.forwardRef)&&void 0!==r&&r,o=e,s=e.displayName||e.name;if(ei&&e.$$typeof===ei&&(i=!0,"function"!=typeof(o=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,l,u=function(e,t){return function(e,t){void 0===t&&(t="observed");var r=n.useRef(null);if(!r.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return Xr.unregister(i),i.onStoreChange=e,i.reaction||($r(i),i.stateVersion=Symbol()),function(){var e;i.onStoreChange=null,null===(e=i.reaction)||void 0===e||e.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};r.current=i}var o,s,a=r.current;if(a.reaction||($r(a),Xr.register(r,a,a)),n.useDebugValue(a.reaction,Gr),n.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track(function(){try{o=e()}catch(e){s=e}}),s)throw s;return o}(function(){return o(e,t)},s)};return u.displayName=e.displayName,Qr&&Object.defineProperty(u,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(u.contextTypes=e.contextTypes),i&&(u=n.forwardRef(u)),u=n.memo(u),a=e,l=u,Object.keys(a).forEach(function(e){ri[e]||Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(a,e))}),u}var ri={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function ii(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(e){e||(e=qr),un({reactionScheduler:e})}(r.unstable_batchedUpdates),Xr.finalizeAllImmediately;var oi,si={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */var ai,li=(oi||(oi=1,ai=si,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,n(i)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var i="";for(var o in n)e.call(n,o)&&n[o]&&(i=r(i,o));return i}function r(e,t){return t?e?e+" "+t:e+t:e}ai.exports?(t.default=t,ai.exports=t):window.classNames=t}()),si.exports),ui=ii(li);function ci(e){let{className:n}=e;return t.jsx("div",{className:"tr",role:"row",children:t.jsx("div",{className:ui("th mx-refresh-container",n),children:t.jsx("progress",{className:"mx-refresh-indicator"})})})}function hi(e){let{direction:n}=e;const r="pagination-icon ".concat(n);switch(n){case"forward":return t.jsx("span",{"aria-hidden":!0,children:t.jsxs("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),t.jsx("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})]})});case"step-forward":return t.jsx("span",{"aria-hidden":!0,children:t.jsxs("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),t.jsx("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})]})});case"backward":return t.jsx("span",{"aria-hidden":!0,children:t.jsxs("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),t.jsx("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})]})});case"step-backward":return t.jsx("span",{"aria-hidden":!0,children:t.jsxs("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),t.jsx("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})]})});default:return t.jsx("div",{})}}function di(e){var r,i,o,s,a,l,u,c,h;const d=void 0!==e.numberOfItems?Math.ceil(e.numberOfItems/e.pageSize):void 0,f=void 0!==d?d-1:0,v=void 0!==d,p="buttons"===e.pagination,_=0===e.numberOfItems?0:p?e.page*e.pageSize+1:1,g=p?(y=e.canNextPage,m=e.numberOfItems,b=e.page,w=e.pageSize,y||!m?0===m?m:(b+1)*w:m):e.page*e.pageSize>(null!==(r=e.numberOfItems)&&void 0!==r?r:0)?null!==(i=e.numberOfItems)&&void 0!==i?i:0:e.page*e.pageSize;var y,m,b,w;const S=t=>{e.setPaginationIndex&&e.setPaginationIndex(t)};if(0===e.numberOfItems&&"always"!==e.showPagingButtons)return null;const O="".concat(p?"".concat(_," to ").concat(g):g," ").concat(v?"of ".concat(null!==(o=e.numberOfItems)&&void 0!==o?o:(null!=d?d:1)*e.pageSize):"");return t.jsxs("div",{"aria-label":null!==(s=e.labelPagination)&&void 0!==s?s:"Pagination",className:"pagination-bar",children:[p&&t.jsxs(n.Fragment,{children:[t.jsx("button",{className:"btn pagination-button",disabled:0===e.page,...fi(()=>{e.gotoPage(0),S(0)}),"aria-label":null!==(a=e.labelFirstPage)&&void 0!==a?a:"Go to first page",children:t.jsx(hi,{direction:"step-backward"})}),t.jsx("button",{className:"btn pagination-button",disabled:!e.canPreviousPage,...fi(()=>{e.previousPage(),S(e.page-1)}),"aria-label":null!==(l=e.labelPreviousPage)&&void 0!==l?l:"Go to previous page",children:t.jsx(hi,{direction:"backward"})})]}),t.jsxs("span",{className:"sr-only sr-only-focusable",children:[null!==(u=e.labelPagingStatus)&&void 0!==u?u:"Currently showing"," ",O]}),t.jsx("div",{"aria-hidden":!0,className:"paging-status",children:O}),p&&t.jsxs(n.Fragment,{children:[t.jsx("button",{"aria-label":null!==(c=e.labelNextPage)&&void 0!==c?c:"Go to next page",className:"btn pagination-button",disabled:!e.canNextPage,...fi(()=>{e.nextPage(),S(e.page+1)}),children:t.jsx(hi,{direction:"forward"})}),v&&t.jsx("button",{"aria-label":null!==(h=e.labelLastPage)&&void 0!==h?h:"Go to last page",className:"btn pagination-button",disabled:e.page===f||0===e.numberOfItems,...fi(()=>{e.gotoPage(f),S(f)}),children:t.jsx(hi,{direction:"step-forward"})})]})]})}function fi(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const vi=Symbol("DefaultKeyNavContextValue"),pi=n.createContext(vi);function _i(e){let{focusController:r,children:i}=e;const o=n.useMemo(()=>({focusController:r}),[r]);return t.jsx(pi.Provider,{value:o,children:i})}function gi(e){var t,r;const[i,o]=n.useState(!1),s=null!==(r=(t=n.useRef(null)).current)&&void 0!==r?r:t.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver(e=>{let[n]=e;t(n.isIntersecting)})}({setIsIntersecting:o});return n.useEffect(()=>(e.current&&s.observe(e.current),()=>{s.disconnect()}),[s,e]),i}function yi(e){let{children:r,className:i,hasMoreItems:o,isInfinite:s,setPage:a}=e;const[l,u,c]=function(e){const{setPage:t,hasMoreItems:r,isInfinite:i}=e,[o,s]=n.useState(0),a=n.useRef(null),l=gi(a),u=n.useCallback(e=>{Math.floor(e.target.scrollHeight-30-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&r&&t&&t(e=>e+1)},[r,t]),c=n.useCallback(()=>{l&&i&&r&&o<=0&&a.current&&s(a.current.clientHeight-30)},[i,r,o,l]);return n.useLayoutEffect(()=>{setTimeout(()=>c(),100)},[c]),[u,o,a]}({hasMoreItems:o,isInfinite:s,setPage:a});return t.jsx("div",{className:ui("widget-gallery-content",{"infinite-loading":s},i),ref:c,onScroll:s?l:void 0,style:s&&u>0?{maxHeight:u}:void 0,children:r})}function mi(e){let{children:n,className:r,...i}=e;return t.jsx("div",{className:ui("widget-gallery-footer",r),...i,children:n})}function bi(e){const{children:n}=e;return n?t.jsx("section",{...e,className:"widget-gallery-header widget-gallery-filter"}):null}function wi(e){const{className:n,selectable:r,children:i,...o}=e;return t.jsx("div",{className:ui("widget-gallery",{"widget-gallery-selectable":r},n),...o,children:i})}function Si(e){return t.jsx("div",{className:"widget-gallery-top-bar",children:e.children})}function Oi(e){let{children:n,className:r,selectionType:i,lg:o,md:s,sm:a,...l}=e;const u="None"!==i;return t.jsx("div",{...l,className:ui("widget-gallery-items","widget-gallery-lg-".concat(o),"widget-gallery-md-".concat(s),"widget-gallery-sm-".concat(a),r),role:u?"listbox":"list","aria-multiselectable":u?"Multi"===i:void 0,children:n})}function Pi(e){const t=n.useRef(null),r=n.useRef(e.focusTarget),{focusController:i}=function(){const e=n.useContext(pi);if(e===vi)throw new Error("useKeyNavContext: context provider is missing");return e}(),[o,s]=n.useMemo(()=>{const t=l(e.columnIndex,e.rowIndex);return[t===i.focusTarget,t]},[e.columnIndex,e.rowIndex,i.focusTarget]),[a,u]=n.useState({canFocus:!1});return n.useEffect(()=>{const e=e=>u(t=>e.lastPos===s?{canFocus:!1}:e.targetPos===s?{canFocus:e.shouldFocus}:t);return i.addListener(e),()=>i.removeListener(e)},[i,s]),n.useEffect(()=>{const{current:e}=r;if(a.canFocus){const n="function"==typeof e?e():t.current;null==n||n.focus()}},[a]),{ref:t,tabIndex:o?0:-1,"data-position":s}}function xi(e){const{eventsController:r,getPosition:i,helper:o,item:s,itemIndex:a,selectHelper:l,label:u,...c}=e,h=o.hasOnClick(s)||"None"!==l.selectionType,d=function(e,t,n){return"Single"===t.selectionType||"Multi"===t.selectionType?{role:"option","aria-selected":t.isSelected(e),tabIndex:0,"aria-label":n}:{role:"listitem","aria-selected":void 0,tabIndex:void 0,"aria-label":n}}(s,l,u),{columnIndex:f,rowIndex:v}=i(a),p=Pi({columnIndex:null!=f?f:-1,rowIndex:v}),_=n.useMemo(()=>r.getProps(s),[r,s]);return t.jsx("div",{...c,className:ui("widget-gallery-item",{"widget-gallery-clickable":h,"widget-gallery-selected":d["aria-selected"],"widget-gallery-preview":e.preview},o.itemClass(s)),...d,onClick:_.onClick,onFocus:_.onFocus,onKeyDown:_.onKeyDown,onKeyUp:_.onKeyUp,onMouseDown:_.onMouseDown,"data-position":p["data-position"],ref:p.ref,tabIndex:p.tabIndex,children:o.render(s)})}const Ai=n.createContext(null),Ci=()=>{const e=n.useContext(Ai);if(!e)throw new Error("useGalleryRootContext must be used within a root context provider");return e};function ji(e){return t.jsx("button",{...e,className:ui("btn btn-primary widget-gallery-load-more-btn",e.className),children:e.children})}const Ei=ni(function(e){const{rootStore:{paging:n}}=Ci();return"loadMore"!==n.pagination?null:n.hasMoreItems?t.jsx(ji,{onClick:()=>n.setPage(e=>e+1),children:e.children}):null});function Ti(e){let{condition:r,children:i}=e;return r?t.jsx(n.Fragment,{children:i}):null}const Ii=ni(function(e){let{location:n}=e;const{selectionCountStore:r,itemSelectHelper:i}=Ci(),o="top"===n?"widget-gallery-tb-start":"widget-gallery-pb-start",s="".concat(r.clearButtonLabel," (").concat(r.selectedCount," selected)");return t.jsx(Ti,{condition:""!==r.selectedCountText,children:t.jsxs("div",{className:o,children:[t.jsx("span",{className:"widget-gallery-selection-count","aria-live":"polite","aria-atomic":"true",children:r.selectedCountText}),"|",t.jsx("button",{className:"widget-gallery-clear-selection",onClick:i.onClearSelection,"aria-label":s,children:r.clearButtonLabel})]})})});function Ni(e){const{loadMoreButtonCaption:n="Load more"}=e,r=e.paging?t.jsx(di,{canNextPage:e.hasMoreItems,canPreviousPage:0!==e.page,gotoPage:t=>e.setPage&&e.setPage(()=>t),nextPage:()=>e.setPage&&e.setPage(e=>e+1),numberOfItems:e.numberOfItems,page:e.page,pageSize:e.pageSize,previousPage:()=>e.setPage&&e.setPage(e=>e-1),pagination:e.paginationType,showPagingButtons:e.showPagingButtons}):null,i=e.paging&&("top"===e.paginationPosition||"both"===e.paginationPosition),o=e.paging&&("bottom"===e.paginationPosition||"both"===e.paginationPosition),s=e.preview||"off"===e.selectionCountPosition||"Multi"!==e.selectHelper.selectionType?null:t.jsx(Ii,{location:e.selectionCountPosition}),a=s&&"top"===e.selectionCountPosition,l=s&&"bottom"===e.selectionCountPosition;return t.jsxs(wi,{className:e.className,style:e.style,selectable:!1,"data-focusindex":e.tabIndex||0,children:[t.jsx(Si,{children:t.jsxs("div",{className:"widget-gallery-top-bar-controls",children:[a&&s,i&&t.jsx("div",{className:"widget-gallery-tb-end",children:r})]})}),e.showHeader&&t.jsx(bi,{"aria-label":e.headerTitle,children:e.header}),e.showRefreshIndicator?t.jsx(ci,{className:"mx-refresh-container-padding"}):null,t.jsx(yi,{hasMoreItems:e.hasMoreItems,setPage:e.setPage,isInfinite:"virtualScrolling"===e.paginationType,children:e.items.length>0&&t.jsx(Oi,{lg:e.desktopItems,md:e.tabletItems,sm:e.phoneItems,selectionType:e.selectHelper.selectionType,"aria-label":e.ariaLabelListBox,children:t.jsx(_i,{focusController:e.focusController,children:e.items.map((n,r)=>{var i;return t.jsx(xi,{preview:e.preview,helper:e.itemHelper,item:n,selectHelper:e.selectHelper,eventsController:e.itemEventsController,getPosition:e.getPosition,itemIndex:r,label:null===(i=e.ariaLabelItem)||void 0===i?void 0:i.call(e,n)},"item_".concat(n.id))})})})}),(0===e.items.length||e.showEmptyStatePreview)&&e.emptyPlaceholderRenderer&&e.emptyPlaceholderRenderer(n=>t.jsx("section",{className:"widget-gallery-empty","aria-label":e.emptyMessageTitle,children:t.jsx("div",{className:"empty-placeholder",children:n})})),t.jsx(mi,{children:t.jsxs("div",{className:"widget-gallery-footer-controls",children:[l&&t.jsx("div",{className:"widget-gallery-fc-start",children:s}),t.jsxs("div",{className:"widget-gallery-fc-end",children:[o&&r,"loadMore"===e.paginationType&&(e.preview?t.jsx(ji,{children:n}):t.jsx(Ei,{children:n}))]})]})})]})}var ki;function Mi(e){return{hasError:!1,value:e}}!function(e){e[e.EMISSINGSTORE=2]="EMISSINGSTORE",e[e.ENOCONTEXT=1]="ENOCONTEXT",e[e.ESTORETYPE=3]="ESTORETYPE",e[e.EKEYMISSING=7]="EKEYMISSING",e[e.OPTIONS_NOT_FILTERABLE=8]="OPTIONS_NOT_FILTERABLE",e[e.NOT_FILTERABLE=9]="NOT_FILTERABLE",e[e.UNSUPPORTED_ATTRIBUTE_TYPE=10]="UNSUPPORTED_ATTRIBUTE_TYPE"}(ki||(ki={})),Object.freeze({code:ki.ENOCONTEXT,message:"The filter widget must be placed inside the column or header of the Data grid 2.0 or inside header of the Gallery widget."}),Object.freeze({code:ki.EMISSINGSTORE,message:"Unable to get filter store. Check parent widget configuration."}),Object.freeze({code:ki.EKEYMISSING,message:"The key for filter is missing."}),Object.freeze({code:ki.OPTIONS_NOT_FILTERABLE,message:"Drop-down options can't be filtered with current column configuration. To enable filtering, change 'Option caption type'  to 'Attribute' in column settings."}),Object.freeze({code:ki.NOT_FILTERABLE,message:"The attribute is not filterable. Please choose a different attribute."}),Object.freeze({code:ki.UNSUPPORTED_ATTRIBUTE_TYPE,message:"Unsupported attribute type for filtering. Please choose a different attribute."});const Ri=Object.freeze({type:"stub",hint:"No filter store available"}),Li="com.mendix.widgets.web.filterable.filterContext.v2";const Vi="com.mendix.widgets.web.sortable.sortContext",Di=null===(o=window.navigator.appVersion)||void 0===o?void 0:o.startsWith("Mendix Modeler");const Bi=null!==(Hi=(Ki=window)[Fr])&&void 0!==Hi?Hi:Ki[Fr]=n.createContext(void 0);var Ki,Hi;const Fi=function(){var e;const t=Di?window.top:window;return null!==(e=t[Vi])&&void 0!==e?e:t[Vi]=n.createContext(null)}(),Ui=null!==(qi=(zi=window)[Li])&&void 0!==qi?qi:zi[Li]=n.createContext(null);var zi,qi;function Gi(e){const{selectionHelper:r,rootStore:i}=Ci(),o=(s=r,n.useMemo(()=>{if("Multi"===(null==s?void 0:s.type))return s},[s]));var s;return t.jsx(Ui.Provider,{value:i.filterAPI,children:t.jsx(Fi.Provider,{value:i.sortAPI,children:t.jsx(Bi.Provider,{value:o,children:e.children})})})}function Ji(e){return e.reduce((e,t)=>{var n,r,i,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(r=e.onDoubleClick)&&void 0!==r?r:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(i=e.onKeyDown)&&void 0!==i?i:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e},{})}function Wi(e,t,n){const r=e();(!n.filter||n.filter(r,t))&&n.handler(r,t)}class Yi{constructor(e){_defineProperty(this,"entries",void 0),this.entries=e}getClickEntry(){const{onClick:e=[],onDoubleClick:t=[]}=Ji(this.entries);let n=0;return{eventName:"onClick",handler:(r,i)=>{Date.now()-n>320?(e.forEach(e=>this.runEntry(e,r,i)),n=Date.now()):(t.forEach(e=>this.runEntry(e,r,i)),n=0)}}}runEntry(e,t,n){var r,i;(null===(r=null===(i=e.filter)||void 0===i?void 0:i.call(e,t,n))||void 0===r||r)&&e.handler(t,n)}}function Xi(e){return{eventName:"onKeyDown",filter:(e,t)=>!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),handler:(t,n)=>{for(const o of e){var r,i;(null===(r=null===(i=o.filter)||void 0===i?void 0:i.call(o,t,n))||void 0===r||r)&&o.handler(t,n)}}}}const $i=e=>({eventName:"onClick",handler:(t,n)=>e({type:"Mouse",reactEvent:n})}),Zi=e=>({eventName:"onKeyDown",handler:(t,n)=>e({type:"Keyboard",reactEvent:n})}),Qi=e=>({eventName:"onFocus",handler:(t,n)=>e({type:"Focus",reactEvent:n})});function eo(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}const to=()=>{to.timeoutId&&clearTimeout(to.timeoutId),to.timeoutId=window.setTimeout(()=>{eo(),document.body.style.userSelect="",to.timeoutId=void 0},250)},no=e=>({eventName:"onClick",filter:e=>"None"!==e.selectionType,handler:(t,n)=>{let{item:r,selectionMode:i}=t,o=!1;o||(o="toggle"===i),o||(o=n.metaKey),o||(o=n.ctrlKey),e(r,n.shiftKey,o)}}),ro=e=>({eventName:"onKeyUp",filter:(e,t)=>"None"!==e.selectionType&&function(e){return"Space"===e.code&&e.shiftKey}(t),handler:t=>{let{item:n}=t;return e(n,!1,!0)}});function io(e,t,n,r){return[(i=eo,{eventName:"onMouseDown",filter:e=>"None"!==e.selectionType,handler:i}),no(e),ro(e),Br(()=>{document.body.style.userSelect="none",t("selectAll")},()=>{to()}),Xi(Hr(n,r))].flat();var i}const oo=e=>({eventName:"onClick",filter:(e,t)=>"single"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),so=e=>({eventName:"onDoubleClick",filter:(e,t)=>"double"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;e(n)}}),ao=(e,t)=>"Space"===t.code?!t.shiftKey:"Enter"===t.code,lo=e=>{let t=!1;return[{eventName:"onKeyDown",filter:ao,handler:()=>t=!0},{eventName:"onKeyUp",filter:(e,n)=>ao(0,n)&&t,handler:n=>{let{item:r}=n;t=!1,e(r)}}]};class uo{constructor(e,t,n,r,i,o,s){_defineProperty(this,"contextFactory",void 0),_defineProperty(this,"selectFx",void 0),_defineProperty(this,"selectAllFx",void 0),_defineProperty(this,"executeActionFx",void 0),_defineProperty(this,"focusTargetFx",void 0),_defineProperty(this,"selectAdjacentFx",void 0),_defineProperty(this,"numberOfColumns",void 0),this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.executeActionFx=r,this.focusTargetFx=i,this.selectAdjacentFx=o,this.numberOfColumns=s}getProps(e){return function(e,t){const n=Ji(t);return{onClick(t){var r;null===(r=n.onClick)||void 0===r||r.forEach(n=>Wi(e,t,n))},onDoubleClick(t){var r;null===(r=n.onDoubleClick)||void 0===r||r.forEach(n=>Wi(e,t,n))},onKeyUp(t){var r;null===(r=n.onKeyUp)||void 0===r||r.forEach(n=>Wi(e,t,n))},onKeyDown(t){var r;null===(r=n.onKeyDown)||void 0===r||r.forEach(n=>Wi(e,t,n))},onMouseDown(t){var r;null===(r=n.onMouseDown)||void 0===r||r.forEach(n=>Wi(e,t,n))},onFocus(t){var r;null===(r=n.onFocus)||void 0===r||r.forEach(n=>Wi(e,t,n))}}}(()=>this.contextFactory(e),this.getEntries())}getEntries(){const e=[...io(this.selectFx,this.selectAllFx,this.selectAdjacentFx,this.numberOfColumns),...(n=this.executeActionFx,[oo(n),so(n),(r=e=>{e.preventDefault(),e.stopPropagation()},{eventName:"onKeyDown",filter:(e,t)=>function(e){return"Space"===e.code&&e.target===e.currentTarget}(t),handler:(e,t)=>r(t)}),...lo(n)]),...(t=this.focusTargetFx,[$i(t),Xi([Zi(t)]),Qi(t)])];var t,n,r;const i=e.filter(e=>"onClick"===e.eventName||"onDoubleClick"===e.eventName),o=e.filter(e=>"onClick"!==e.eventName&&"onDoubleClick"!==e.eventName);return[new Yi(i).getClickEntry(),...o]}}function co(e){const t=function(e){return e<768?"phone":e>=768&&e<992?"tablet":"desktop"}(function(){const[e,t]=n.useState(window.innerWidth);return n.useEffect(()=>{const e=e=>t(e.target.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}()),r=function(e,t){return e["".concat(t,"Items")]}(e,t),i=Math.ceil(e.totalItems/r);return{numberOfColumns:Math.min(r,e.totalItems),numberOfRows:i}}function ho(e){return t.jsx("div",{...e,...fo,className:ui("widget-gallery-item-button",e.className),role:"button"})}const fo=function(){let e=!1;return{onKeyDown:t=>{vo(t)&&(_o(t),po(t)&&(e=!0))},onKeyUp:t=>{vo(t)&&po(t)&&e&&(_o(t),t.currentTarget.dispatchEvent(new MouseEvent("click",{bubbles:!0})),e=!1)}}}();function vo(e){return"Enter"===e.code||"Space"===e.code}function po(e){return e.currentTarget===e.target}function _o(e){e.stopPropagation(),e.preventDefault()}class go{constructor(e,t,n){_defineProperty(this,"_classValue",void 0),_defineProperty(this,"_contentValue",void 0),_defineProperty(this,"_clickValue",void 0),this._classValue=e,this._contentValue=t,this._clickValue=n}itemClass(e){var t;return null===(t=this._classValue)||void 0===t?void 0:t.get(e).value}render(e){var n,r;return this.hasOnClick(e)?t.jsx(ho,{children:null===(r=this._contentValue)||void 0===r?void 0:r.get(e)}):null===(n=this._contentValue)||void 0===n?void 0:n.get(e)}hasOnClick(e){var t;return!(null===(t=this._clickValue)||void 0===t||!t.get(e))}}let yo=()=>({emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let t=this.events[e]||[],r=0,i=t.length;r<i;r++)t[r](...n)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter(e=>t!==e)}}});const mo="com.mendix.widgets.web.plugin.externalEvents";class bo{constructor(){_defineProperty(this,"channels",void 0),_defineProperty(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(e){const t=this.channels.get(e);return t&&(t.events={}),this.channels.delete(e)}getChannel(e){let t=this.channels.get(e);return t||(t=yo(),this.channels.set(e,t),t)}emit(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];null===(n=this.channels.get(e))||void 0===n||n.emit(t,...i)}subscribe(e,t,n){return this.getChannel(e).on(t,n),()=>this.unsubscribe(e,t,n)}unsubscribe(e,t,n){const r=this.channels.get(e);if(!r)return;const i=r.events[t];i&&(r.events[t]=i.filter(e=>e!==n));0===Object.values(r.events).flat().reduce((e,t)=>t?e+1:e,0)&&this.disposeChannel(e)}}function wo(){var e,t;return null!==(t=(e=window)[mo])&&void 0!==t?t:e[mo]=function(){if(Object.prototype.hasOwnProperty.call(window,mo))throw new Error("Widget plugin external events: plugin already initialized!");return new bo}()}function So(e,t,r){n.useEffect(()=>{if(void 0!==e)return wo().subscribe(e,t,r)},[e,t])}const Oo=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"},set:{value:"set.value"},selection:{clear:"selection.clear"}});const Po=function(){return wo().emit(...arguments)};function xo(e,t){var r;r=n.useRef({inputChannel:e,event:Oo.reset.filters,onEvent:(e,n)=>{e(t,Oo.reset.value,...n)}}).current,So(r.inputChannel,r.event,n.useRef(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.onEvent(Po,t)}).current)}function Ao(e,t){xo(e.name,e.id),function(e){let{widgetName:t,listener:r}=e;const{current:i}=n.useRef(r);So(t,Oo.selection.clear,i)}({widgetName:e.name,listener:()=>null==t?void 0:t.onClearSelection()})}class Co{constructor(e){_defineProperty(this,"atom",void 0),this.atom=e,In(this,{props:$e})}get props(){return this.atom.props}}class jo{constructor(e){_defineProperty(this,"props",void 0),this.props=e,In(this,{props:Je.ref,setProps:Xt})}setProps(e){this.props=e}}class Eo{constructor(e){_defineProperty(this,"atom",void 0),_defineProperty(this,"gate",void 0),this.atom=new jo(e),this.gate=new Co(this.atom)}setProps(e){this.atom.setProps(e)}}function To(e){return"function"===e.type&&"and"===e.name}function Io(){const e=new Set;return[t=>{t&&e.add(t)},()=>{for(const t of e)t();e.clear()}]}class No{constructor(e,t){_defineProperty(this,"inputs",void 0),_defineProperty(this,"stableKey",void 0),_defineProperty(this,"ownMetaKey","CombinedFilter"),e.add(this),this.inputs=t.inputs,this.stableKey=t.stableKey,In(this,{filter:$e,filterWithBag:$e,hydrate:Xt})}storageKey(e){return"".concat(this.stableKey,"@").concat(e)}readMetaFromStorage(e){const t=sessionStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(t){return console.error("CombinedFilter.readFilterMeta: Error parsing meta for key ".concat(e),t),null}}clearFilterMeta(e){sessionStorage.removeItem(this.storageKey(e))}filterHash(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2166136261;const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(JSON.stringify(e)).toString()}restoreMeta(e){const t=this.filterHash(e),n=this.storageKey(t);return this.readMetaFromStorage(n)}hydrate(e){if(!e)return;const t=this.restoreMeta(e);if(!t)return;const n=function(e,t){const[n,r]=JSON.parse(t),i=Array(n).fill(void 0);return 0===r.length?i:1===r.length?(i[r[0]]=e,i):e&&To(e)?(e.args.forEach((e,t)=>{i[r[t]]=e}),i):i}(e,t[this.ownMetaKey]);if(n.length===this.inputs.length)for(let e=0;e<this.inputs.length;e++){const r=this.inputs[e],i={cond:n[e],meta:t[r.metaKey]};r.hydrate(i)}else console.error("CombinedFilter.hydrate: Number of conditions (".concat(n.length,") does not match number of inputs (").concat(this.inputs.length,")"))}get filter(){return this.filterWithBag.filter}get filterWithBag(){const e={},t=[];for(const{condWithMeta:n,metaKey:r}of this.inputs)e[r]=n.meta,t.push(n.cond);const[n,r]=function(e){const[t,n]=[(r=e).flatMap((e,t)=>void 0===e?[]:[t]),r.filter(e=>void 0!==e)];var r;const o=JSON.stringify([e.length,t]);switch(n.length){case 0:return[void 0,o];case 1:return[n[0],o];default:return[i.and(...n),o]}}(t);return e[this.ownMetaKey]=r,{filter:n,bag:e,hash:n?this.filterHash(n):null}}saveFilterMeta(e,t){e&&sessionStorage.setItem(this.storageKey(e),JSON.stringify(t))}setup(){const[e,t]=Io();return e(nn(()=>this.filterWithBag,(e,t)=>{t&&t.hash&&this.clearFilterMeta(t.hash),e.hash&&this.saveFilterMeta(e.hash,e.bag)})),t}}class ko{constructor(){_defineProperty(this,"filters",new Map),_defineProperty(this,"settingsBuffer",new Map),_defineProperty(this,"_state",new Map),_defineProperty(this,"metaKey","CustomFilterHost"),kn(this,{hydrate:Xt})}get settings(){return new Map([...this.filters].map(e=>{let[t,[n]]=e;return[t,n.toJSON()]}))}set settings(e){this.settingsBuffer=e}observe(e,t){this.unobserve(e);const n=Qt(()=>{this.settingsBuffer.has(e)&&t.fromJSON(this.settingsBuffer.get(e))}),r=Qt(()=>{this._state.set(e,t.condition)}),i=this.settingsBuffer.has(e),o=this._state.get(e);!i&&o&&t.fromViewState(o);this.filters.set(e,[t,()=>{n(),r(),this.filters.delete(e),this._state.delete(e)}])}unobserve(e){var t;this.filters.has(e)&&(null===(t=this.filters.get(e))||void 0===t||t[1]())}toJSON(){return[...this.settings.entries()]}fromJSON(e){null!=e&&Array.isArray(e)&&(this.settings=new Map(e))}get condWithMeta(){const e={};for(const[t,[n]]of this.filters)e[t]=n.condition;const[t,n]=function(e){const t={length:0,keys:[]},n=[];for(const[r,i]of Object.entries(e))t.keys.push(r),void 0!==i&&(t[n.length]=r,n.push(i));t.length=n.length;const r=JSON.stringify(t);switch(n.length){case 0:return[void 0,r];case 1:return[n[0],r];default:return[i.and(...n),r]}}(e);return{cond:t,meta:n}}hydrate(e){let{cond:t,meta:n}=e;const r=function(e,t){const n=JSON.parse(t),r={};for(const e of n.keys)r[e]=void 0;return 0===n.length?r:1===n.length&&n[0]?(r[n[0]]=e,r):e&&To(e)?(e.args.forEach((e,t)=>{r[n[t]]=e}),r):r}(t,n);this._state=new Map(Object.entries(r))}}class Mo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_defineProperty(this,"gate",void 0),_defineProperty(this,"refreshIntervalMs",void 0),_defineProperty(this,"backgroundCheck",!1),_defineProperty(this,"fetching",!1),_defineProperty(this,"baseLimit",1/0),this.gate=t,this.refreshIntervalMs=n,e.add(this),kn(this,{setup:!1,baseLimit:!1,updateFlags:Xt,resetFlags:Xt,setRefreshing:Xt,setFetching:Xt,setIsLoaded:Xt})}resetFlags(){this.backgroundCheck=!1,this.fetching=!1}updateFlags(e){this.backgroundCheck&&this.setBackgroundCheck("loading"===e),this.fetching&&this.setFetching("loading"===e)}setBackgroundCheck(e){this.backgroundCheck=e}setFetching(e){this.fetching=e}resetLimit(){this.datasource.setLimit(this.baseLimit)}get isDSLoading(){return"loading"===this.datasource.status}get datasource(){return this.gate.props.datasource}get items(){return this.datasource.items}get isFirstLoad(){return this.isDSLoading&&void 0===this.datasource.items}get isRefreshing(){return this.isDSLoading&&void 0!==this.datasource.items}get isSilentRefresh(){return this.backgroundCheck}get isFetchingNextBatch(){return this.fetching}get limit(){return this.datasource.limit}get offset(){return this.datasource.offset}get totalCount(){return this.datasource.totalCount}get hasMoreItems(){var e;return null!==(e=this.datasource.hasMoreItems)&&void 0!==e&&e}setup(){const[e,t]=Io();if(e(Qt(()=>{this.updateFlags(this.datasource.status)})),this.refreshIntervalMs>0){let t;const n=Qt(()=>{this.items,clearInterval(t),t=window.setTimeout(()=>this.backgroundRefresh(),this.refreshIntervalMs)});e(()=>{n(),clearInterval(t)})}return t}backgroundRefresh(){this.isDSLoading||(this.setBackgroundCheck(!0),this.datasource.reload())}requestTotalCount(e){this.datasource.requestTotalCount(e)}setLimit(e){this.setFetching(!0),this.datasource.setLimit(e)}setOffset(e){this.resetFlags(),this.resetLimit(),this.datasource.setOffset(e)}setSortOrder(){this.resetFlags(),this.resetLimit(),this.datasource.setSortOrder(...arguments)}setFilter(){this.resetFlags(),this.resetLimit(),this.datasource.setFilter(...arguments)}setBaseLimit(e){this.baseLimit=e,this.resetLimit()}reload(){const e=this.datasource;return this.datasource.reload(),wn(()=>this.datasource!==e)}fetchPage(e){let{limit:t,offset:n,signal:r}=e;return new Promise((e,i)=>{if(r&&r.aborted)return i(r.reason);wn(()=>this.datasource.offset===n&&this.datasource.limit===t&&"available"===this.datasource.status,{signal:r}).then(()=>{var t;return e(null!==(t=this.datasource.items)&&void 0!==t?t:[])},i),this.datasource.setOffset(n),this.datasource.setLimit(t)})}}class Ro{constructor(e,t){_defineProperty(this,"gate",void 0),_defineProperty(this,"position",void 0),this.gate=e,this.position=t,kn(this)}get props(){return this.gate.props}get formatSingular(){var e;return(null===(e=this.props.selectedCountTemplateSingular)||void 0===e?void 0:e.value)||"%d item selected"}get formatPlural(){var e;return(null===(e=this.props.selectedCountTemplatePlural)||void 0===e?void 0:e.value)||"%d items selected"}get isTopCounterVisible(){return"top"===this.position&&this.selectedCount>0}get isBottomCounterVisible(){return"bottom"===this.position&&this.selectedCount>0}get clearButtonLabel(){var e;return(null===(e=this.props.clearSelectionButtonLabel)||void 0===e?void 0:e.value)||"Clear selection"}get selectedCount(){const{itemSelection:e}=this.props;return e?"Single"===e.type?0:e.selection.length:0}get selectedCountText(){const e=this.selectedCount;return e>1?this.formatPlural.replace("%d","".concat(e)):1===e?this.formatSingular.replace("%d","1"):""}}class Lo{constructor(){_defineProperty(this,"components",new Set),_defineProperty(this,"isSetupCalled",!1)}add(e){this.components.add(e)}remove(e){this.components.delete(e)}setup(){if(this.isSetupCalled)throw new Error("setup method has already been called.");this.isSetupCalled=!0;const[e,t]=Io();for(const t of this.components){var n;const r=null===(n=t.setup)||void 0===n?void 0:n.call(t);r&&e(r)}return t}}class Vo{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty(this,"_usedBy",[]),_defineProperty(this,"_state",void 0),_defineProperty(this,"_cleanup",null),_defineProperty(this,"_store",null),_defineProperty(this,"_jsonBuffer",null),this._state=null!==(e=t.initSort)&&void 0!==e?e:[],In(this,{_state:Je.ref,_jsonBuffer:Je.ref,sortOrder:$e,lock:Xt,_usedBy:Je,usedBy:$e,observe:Xt,unobserve:Xt,_setState:Xt,fromJSON:Xt})}_setState(e){this._state=e}get sortOrder(){return this._state}observe(e){this.unobserve();const t=Qt(()=>{const t=this._jsonBuffer;null!=t&&Array.isArray(t)&&e.fromJSON(t)}),n=Qt(()=>{this._setState(e.sortOrder)});this._store=e,this._cleanup=()=>{this._store=null,this._jsonBuffer=null,this._cleanup=null,t(),n()}}unobserve(){var e;null===(e=this._cleanup)||void 0===e||e.call(this)}lock(e){-1===this._usedBy.indexOf(e)&&this._usedBy.push(e);return()=>{!function(e){it(e.name,!1,e,this,void 0)}(()=>{const t=this._usedBy.indexOf(e);-1!==t&&this._usedBy.splice(t,1)})}}get usedBy(){var e;return null!==(e=this._usedBy.at(0))&&void 0!==e?e:null}toJSON(){return this._store?this._store.toJSON():null}fromJSON(e){this._jsonBuffer=e}}class Do{constructor(e,t){_defineProperty(this,"datasourceService",void 0),_defineProperty(this,"refreshIndicator",void 0),this.datasourceService=e,this.refreshIndicator=t,In(this,{isRefreshing:$e,showRefreshIndicator:$e})}get isRefreshing(){const{isSilentRefresh:e,isRefreshing:t}=this.datasourceService;return!e&&t}get showRefreshIndicator(){return this.refreshIndicator&&this.isRefreshing}}class Bo{constructor(e,t,n,r){_defineProperty(this,"_query",void 0),_defineProperty(this,"_filtersHost",void 0),_defineProperty(this,"_sortHost",void 0),e.add(this),this._query=t,this._filtersHost=n,this._sortHost=r}setup(){const[e,t]=Io();return e(nn(()=>this._sortHost.sortOrder,e=>this._query.setSortOrder(e),{fireImmediately:!0})),e(nn(()=>this._filtersHost.filter,e=>this._query.setFilter(e),{fireImmediately:!0})),t}}class Ko{constructor(e){_defineProperty(this,"_pageSize",void 0),_defineProperty(this,"_query",void 0),_defineProperty(this,"pagination",void 0),_defineProperty(this,"paginationKind",void 0),_defineProperty(this,"showPagingButtons",void 0),_defineProperty(this,"showTotalCount",void 0),_defineProperty(this,"setPage",e=>{const t=e(this.currentPage);this.isLimitBased?this._query.setLimit(t*this.pageSize):this._query.setOffset(t*this.pageSize)}),this._pageSize=e.pageSize,this._query=e.query,this.pagination=e.pagination,this.showPagingButtons=e.showPagingButtons,this.showTotalCount=e.showTotalCount,this.paginationKind="".concat(this.pagination,".").concat(this.showPagingButtons),this._setInitParams()}get isLimitBased(){return"virtualScrolling"===this.pagination||"loadMore"===this.pagination}get pageSize(){return this._pageSize}get currentPage(){const{_query:{limit:e,offset:t},pageSize:n}=this;return this.isLimitBased?e/n:t/n}get showPagination(){switch(this.paginationKind){case"buttons.always":return!0;case"buttons.auto":{const{totalCount:e=-1}=this._query;return e>this._query.limit}default:return this.showTotalCount}}get hasMoreItems(){return this._query.hasMoreItems}_setInitParams(){("buttons"===this.pagination||this.showTotalCount)&&this._query.requestTotalCount(!0),this._query.setBaseLimit(this.pageSize)}}class Ho{constructor(e,t){_defineProperty(this,"_gate",void 0),e.add(this),this._gate=t,In(this,{_attribute:$e,data:$e.struct})}setup(){return()=>{}}get _attribute(){return this._gate.props.stateStorageAttr}get data(){const e=this._attribute.value;if(!e)return null;try{return JSON.parse(e)}catch{return console.warn("Invalid JSON configuration in the attribute. Resetting configuration."),this._attribute.setValue(""),null}}setData(e){e=""===e?null:e,this._attribute.setValue(JSON.stringify(e))}}class Fo{constructor(e){_defineProperty(this,"_storageKey",void 0),this._storageKey=e}get data(){try{var e;return JSON.parse(null!==(e=localStorage.getItem(this._storageKey))&&void 0!==e?e:"null")}catch{return null}}setData(e){localStorage.setItem(this._storageKey,JSON.stringify(e))}}class Uo{constructor(e,t){_defineProperty(this,"_storage",void 0),_defineProperty(this,"_filtersHost",void 0),_defineProperty(this,"_sortHost",void 0),_defineProperty(this,"storeFilters",void 0),_defineProperty(this,"storeSort",void 0),_defineProperty(this,"schemaVersion",1),e.add(this),this._storage=t.storage,this._filtersHost=t.filtersHost,this._sortHost=t.sortHost,this.storeFilters=t.storeFilters,this.storeSort=t.storeSort,In(this,{_persistentState:$e,fromJSON:Xt})}setup(){const[e,t]=Io(),n=nn(()=>this._persistentState,e=>this._storage.setData(e),{delay:250,equals:ae.structural}),r=nn(()=>this._storage.data,e=>{null!=e&&(this._validate(e)?this.fromJSON(e):(console.warn("Invalid gallery settings. Reset storage to avoid conflicts."),this._storage.setData(null)))},{fireImmediately:!0,equals:ae.structural});return e(n),e(r),t}get _persistentState(){return this.toJSON()}_validate(e){return null!=e&&"object"==typeof e&&"version"in e&&e.version===this.schemaVersion}fromJSON(e){this._validate(e)&&(this.storeFilters&&this._filtersHost.fromJSON(e.filters),this.storeSort&&this._sortHost.fromJSON(e.sort))}toJSON(){const e={version:1};return this.storeFilters&&(e.filters=this._filtersHost.toJSON()),this.storeSort&&(e.sort=this._sortHost.toJSON()),e}}class zo extends Lo{constructor(e){super(),_defineProperty(this,"_query",void 0),_defineProperty(this,"_filtersHost",void 0),_defineProperty(this,"_sortHost",void 0),_defineProperty(this,"_storage",null),_defineProperty(this,"id","GalleryStore@".concat(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}())),_defineProperty(this,"name",void 0),_defineProperty(this,"paging",void 0),_defineProperty(this,"filterAPI",void 0),_defineProperty(this,"sortAPI",void 0),_defineProperty(this,"loaderCtrl",void 0),_defineProperty(this,"selectionCountStore",void 0),this.name=e.name,this._query=new Mo(this,e.gate,0),this.paging=new Ko({query:this._query,pageSize:e.pageSize,pagination:e.pagination,showPagingButtons:e.showPagingButtons,showTotalCount:e.showTotalCount}),this.selectionCountStore=new Ro(e.gate,e.gate.props.selectionCountPosition),this._filtersHost=new ko;const t=new No(this,{stableKey:e.name,inputs:[this._filtersHost]});var n;this._sortHost=new Vo({initSort:e.gate.props.datasource.sortOrder}),new Bo(this,this._query,t,this._sortHost),this.filterAPI={version:3,parentChannelName:(n={filterObserver:this._filtersHost,parentChannelName:this.id}).parentChannelName,provider:Mi(Ri),filterObserver:n.filterObserver},this.sortAPI={version:1,host:this._sortHost},this.loaderCtrl=new Do(this._query,e.refreshIndicator);(e.storeFilters||e.storeSort)&&this.initPersistentStorage(e,e.gate),t.hydrate(e.gate.props.datasource.filter)}initPersistentStorage(e,t){"localStorage"===e.stateStorageType?this._storage=new Fo(this.name):t.props.stateStorageAttr&&(this._storage=new Ho(this,t)),this._storage&&new Uo(this,{storage:this._storage,filtersHost:this._filtersHost,sortHost:this._sortHost,storeFilters:e.storeFilters,storeSort:e.storeSort})}}function qo(e){const t=function(e){const t=zr(()=>new Eo(e));return n.useEffect(()=>t.setProps(e)),t.gate}(e);return function(e){const t=zr(e);return n.useEffect(()=>t.setup(),[t]),t}(()=>new zo({gate:t,...e}))}const Go=ni(function(e){var r,i,o,s,l,u;const{rootStore:h,itemSelectHelper:d}=Ci(),p=null!==(r=e.datasource.items)&&void 0!==r?r:[],_={desktopItems:e.desktopItems,phoneItems:e.phoneItems,tabletItems:e.tabletItems,totalItems:p.length},{numberOfColumns:g,numberOfRows:y}=co(_),m=n.useCallback(e=>Vr(g,p.length,e),[g,p.length]),b=function(e){let{rows:t,columns:r,pageSize:i}=e;const o=n.useRef(null);return n.useMemo(()=>{const e=new v(t,r,i);return null===o.current?o.current=new c(new f,e):o.current.updateGridLayout(e),o.current},[t,r,i])}({rows:y,columns:g,pageSize:e.pageSize}),w=function(e){const t=n.useMemo(()=>new a(e.onClickTrigger,e.onClick),[]);return n.useEffect(()=>{t.update(e.onClick)}),t}({onClick:e.onClick,onClickTrigger:e.onClickTrigger}),S=function(e,t,r,i,o){return n.useMemo(()=>new uo(n=>({item:n,selectionType:e.selectionType,selectionMode:o,clickTrigger:t.clickTrigger}),e.onSelect,e.onSelectAll,t.onExecuteAction,r.dispatch,e.onSelectAdjacent,i),[e,r,i])}(d,w,b,g,e.itemSelectionMode),O=(P={classValue:e.itemClass,contentValue:e.content,clickValue:e.onClick},n.useMemo(()=>new go(P.classValue,P.contentValue,P.clickValue),[P.classValue,P.contentValue,P.clickValue]));var P;Ao(h,d);const x=t.jsx(Gi,{children:e.filtersPlaceholder});return t.jsx(Ni,{className:e.class,desktopItems:e.desktopItems,emptyPlaceholderRenderer:n.useCallback(n=>"custom"===e.showEmptyPlaceholder?n(e.emptyPlaceholder):t.jsx("div",{}),[e.emptyPlaceholder,e.showEmptyPlaceholder]),emptyMessageTitle:null===(i=e.emptyMessageTitle)||void 0===i?void 0:i.value,header:x,headerTitle:null===(o=e.filterSectionTitle)||void 0===o?void 0:o.value,ariaLabelListBox:null===(s=e.ariaLabelListBox)||void 0===s?void 0:s.value,showHeader:!!e.filtersPlaceholder,hasMoreItems:null!==(l=e.datasource.hasMoreItems)&&void 0!==l&&l,items:p,itemHelper:O,numberOfItems:e.datasource.totalCount,page:h.paging.currentPage,pageSize:e.pageSize,paging:h.paging.showPagination,paginationPosition:e.pagingPosition,paginationType:e.pagination,setPage:h.paging.setPage,showPagingButtons:e.showPagingButtons,phoneItems:e.phoneItems,style:e.style,tabletItems:e.tabletItems,tabIndex:e.tabIndex,selectHelper:d,itemEventsController:S,focusController:b,getPosition:m,loadMoreButtonCaption:null===(u=e.loadMoreButtonCaption)||void 0===u?void 0:u.value,showRefreshIndicator:h.loaderCtrl.showRefreshIndicator,selectionCountPosition:e.selectionCountPosition})});function Jo(e){const t=qo(e),r=Lr(e.itemSelection,e.datasource,e.onSelectionChange,e.keepSelection?"always keep":"always clear"),i=function(e,t){return n.useMemo(()=>new Ur(e,t),[t])}(e.itemSelection,r);return zr({rootStore:t,selectionHelper:r,itemSelectHelper:i,selectionCountStore:t.selectionCountStore})}e.Gallery=function(e){const n=Jo(e);return t.jsx(Ai.Provider,{value:n,children:t.jsx(Go,{...e})})}});
