define(["exports","../../../shared/charts/amd/shared-charts","react","big.js"],(function(e,t,r,o){"use strict";function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i,a={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */var l,u,s=(i||(i=1,l=a,function(){var e={}.hasOwnProperty;function t(){for(var r=[],o=0;o<arguments.length;o++){var n=arguments[o];if(n){var i=typeof n;if("string"===i||"number"===i)r.push(n);else if(Array.isArray(n)){if(n.length){var a=t.apply(null,n);a&&r.push(a)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){r.push(n.toString());continue}for(var l in n)e.call(n,l)&&n[l]&&r.push(l)}}}return r.join(" ")}l.exports?(t.default=t,l.exports=t):window.classNames=t}()),a.exports),c=n(s),p={},v={};var d,f={};var h,g={};var b,y,m={},x={};function O(){return y||(y=1,function(e){var t=m&&m.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=m&&m.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r((b||(b=1,Object.defineProperty(x,"__esModule",{value:!0})),x),e)}(m)),m}var S,A,_,j={},w={};function P(){return A||(A=1,function(e){var t=j&&j.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=j&&j.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(S)return w;function e(e,r,o,n,i){t(((e,t,r)=>r.splice(t,1)),e,o,n,i)}function t(e,r,o,n,i){r.forEach((r=>{var a;r.propertyGroups&&t(e,r.propertyGroups,o,n,i),null===(a=r.properties)||void 0===a||a.forEach(((r,a,l)=>{r.key===o&&(void 0===n||void 0===i?e(r,a,l):r.objects?t(e,r.objects[n].properties,i):r.properties&&t(e,r.properties[n],i))}))}))}return S=1,Object.defineProperty(w,"__esModule",{value:!0}),w.hidePropertyIn=e,w.hidePropertiesIn=function(e,r,o){o.forEach((r=>t(((e,t,r)=>r.splice(t,1)),e,r,void 0,void 0)))},w.hideNestedPropertiesIn=function(t,r,o,n,i){i.forEach((i=>e(t,r,o,n,i)))},w.changePropertyIn=function(e,r,o,n,i,a){t(o,e,n,i,a)},w.transformGroupsIntoTabs=function(e){const t=[];e.forEach((e=>{e.propertyGroups&&(t.push(...e.propertyGroups),e.propertyGroups=[])})),e.push(...t)},w.moveProperty=function(e,t,r){e>=0&&t>=0&&e<r.length&&t<r.length&&e!==t&&r.splice(t,0,...r.splice(e,1))},w}(),e)}(j)),j}var z=(_||(_=1,function(e){var t=p&&p.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),r=p&&p.__exportStar||function(e,r){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(r,o)||t(r,e,o)};Object.defineProperty(e,"__esModule",{value:!0}),r((u||(u=1,Object.defineProperty(v,"__esModule",{value:!0}),v.ensure=function(e){if(null==e)throw new Error("Did not expect an argument to be undefined");return e}),v),e),r((d||(d=1,Object.defineProperty(f,"__esModule",{value:!0}),f.mergeNativeStyles=function(e,t){const r=[e,...t.filter((e=>void 0!==e))];return Object.keys(e).reduce(((e,t)=>{const o=r.map((e=>e[t]));return Object.assign(Object.assign({},e),{[t]:(n=o,n.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{}))});var n}),{})},f.extractStyles=function(e,t){return e?Object.entries(e).reduce(((e,r)=>{let[o,n]=e,[i,a]=r;return t.includes(i)?o[i]=a:n[i]=a,[o,n]}),[{},{}]):[{},{}]}),f),e),r((h||(h=1,Object.defineProperty(g,"__esModule",{value:!0}),g.parseInlineStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return e.split(";").reduce(((e,t)=>{const r=t.split(":");return 2===r.length&&(e[r[0].trim().replace(/(-.)/g,(e=>e[1].toUpperCase()))]=r[1].trim()),e}),{})}catch(e){return{}}}),g),e),r(O(),e),r(P(),e)}(p)),p);function C(e){return Array.from(new Set(e))}function M(e){return 0-e}function V(e){return e.length>1?e.sort(((e,t)=>e.valuePercentage-t.valuePercentage)).map((e=>[Math.abs(e.valuePercentage/100),e.colour])):[[0,"#17347B"],[.5,"#0595DB"],[1,"#76CA02"]]}function L(e){return e&&e instanceof o?e.toNumber():e}const E={font:{color:"#555",size:12},margin:{l:80,pad:0},legend:{font:{family:"Open Sans",size:14}},xaxis:{fixedrange:!0,ticks:""},yaxis:{fixedrange:!0,ticks:"",title:{standoff:5}}},k={responsive:!0},D={type:"heatmap",hoverinfo:"none",xgap:1,ygap:1,colorbar:{y:1,yanchor:"top",ypad:0,xpad:5,outlinecolor:"#9ba492"},connectgaps:!1};e.HeatMap=function(e){var o,n;const i=(e=>{let{customSeriesOptions:o,horizontalAxisAttribute:n,horizontalSortAttribute:i,horizontalSortOrder:a,onClickAction:l,scaleColors:u,seriesDataSource:s,seriesValueAttribute:c,showScale:p,smoothColor:v,tooltipHoverText:d,verticalAxisAttribute:f,verticalSortAttribute:h,verticalSortOrder:g}=e;const[b,y]=r.useState([]);r.useEffect((()=>{if("available"===s.status&&s.items){const e=s.items.map((e=>{var t;return{value:null===(t=z.ensure(c).get(e).value)||void 0===t?void 0:t.toNumber(),hoverText:null==d?void 0:d.get(e).value,horizontalAxisValue:L(null==n?void 0:n.get(e).value),horizontalSortValue:null==i?void 0:i.get(e).value,verticalAxisValue:L(null==f?void 0:f.get(e).value),verticalSortValue:null==h?void 0:h.get(e).value}}));y(e)}}),[s,c,d,n,f,i,h]);const m=r.useMemo((()=>l?()=>{var e;(e=l)&&e.canExecute&&!e.isExecuting&&e.execute()}:void 0),[l]);return r.useMemo((()=>{const e=[...b];h&&e.sort(((e,r)=>{const o=t.compareAttrValuesAsc(e.verticalSortValue,r.verticalSortValue);return"desc"===g?M(o):o}));const r=C(e.map((e=>{let{verticalAxisValue:t}=e;return t})));i&&e.sort(((e,r)=>{const o=t.compareAttrValuesAsc(e.horizontalSortValue,r.horizontalSortValue);return"desc"===a?M(o):o}));const n=C(e.map((e=>{let{horizontalAxisValue:t}=e;return t}))),l=r.map((t=>n.map((r=>e.find((e=>{let{horizontalAxisValue:o,verticalAxisValue:n}=e;return o===r&&n===t})))))),s=l.map((e=>e.map((e=>{var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:null})))),c=l.map((e=>e.map((e=>{var t;return null!==(t=null==e?void 0:e.hoverText)&&void 0!==t?t:""}))));return[{colorscale:V(u),customSeriesOptions:o,hoverinfo:d?"text":"none",hovertext:c,onClick:m,showscale:p,x:n.map((e=>{var t;return null!==(t=null==e?void 0:e.toLocaleString())&&void 0!==t?t:null})),y:r.map((e=>{var t;return null!==(t=null==e?void 0:e.toLocaleString())&&void 0!==t?t:null})),z:s,zsmooth:!!v&&"best",dataSourceItems:[]}]}),[o,b,i,a,m,u,p,v,d,h,g])})({customSeriesOptions:e.customSeriesOptions,horizontalAxisAttribute:e.horizontalAxisAttribute,horizontalSortAttribute:e.horizontalSortAttribute,horizontalSortOrder:e.horizontalSortOrder,onClickAction:e.onClickAction,scaleColors:e.scaleColors,seriesDataSource:e.seriesDataSource,seriesValueAttribute:e.seriesValueAttribute,showScale:e.showScale,smoothColor:e.smoothColor,tooltipHoverText:e.tooltipHoverText,verticalAxisAttribute:e.verticalAxisAttribute,verticalSortAttribute:e.verticalSortAttribute,verticalSortOrder:e.verticalSortOrder}),a=r.useMemo((()=>{const t=e.showValues?i[0].z.reduce(((t,r,o)=>[...t,...r.map(((t,r)=>{var n,a,l,u,s,c,p;return u=null!==(n=i[0].x[r])&&void 0!==n?n:void 0,s=null!==(a=i[0].y[o])&&void 0!==a?a:void 0,c=null!==(l=null==t?void 0:t.toLocaleString())&&void 0!==l?l:"",p=e.valuesColor,{xref:"x",yref:"y",x:u,y:s,text:c,font:{family:"Open Sans",size:14,color:p||"#555"},showarrow:!1}}))]),[]):[];return{...E,annotations:t}}),[i,e.showValues,e.valuesColor]);return r.createElement(t.ChartWidget,{type:"HeatMap",className:c("widget-heatmap-chart",e.class),data:i,width:e.width,widthUnit:e.widthUnit,height:e.height,heightUnit:e.heightUnit,showLegend:e.showScale,xAxisLabel:null===(o=e.xAxisLabel)||void 0===o?void 0:o.value,yAxisLabel:null===(n=e.yAxisLabel)||void 0===n?void 0:n.value,gridLinesMode:e.gridLines,customLayout:e.customLayout,customConfig:e.customConfigurations,layoutOptions:a,configOptions:k,seriesOptions:D,enableThemeConfig:e.enableThemeConfig,playground:e.playground})}}));
