function _defineProperty(t,e,n){return(e=_toPropertyKey2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey2(t){var e=_toPrimitive2(t,"string");return"symbol"==typeof e?e:e+""}function _toPrimitive2(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}define(["../../../shared/charts/amd/shared-charts","react","../../../shared/charts/amd/plotly.min"],(function(t,e,n){"use strict";function r(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var i={};function o(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:i}var a=Object.assign,s=Object.getOwnPropertyDescriptor,u=Object.defineProperty,l=Object.prototype,c=[];Object.freeze(c);var h={};Object.freeze(h);var d="undefined"!=typeof Proxy,f=Object.toString();function v(){d||r("Proxy not available")}function _(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var p=function(){};function b(t){return"function"==typeof t}function y(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function g(t){return null!==t&&"object"==typeof t}function m(t){if(!g(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n.toString()===f}function O(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function w(t,e,n){u(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function S(t,e,n){u(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function A(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return g(t)&&!0===t[n]}}function P(t){return t instanceof Map}function x(t){return t instanceof Set}var j=void 0!==Object.getOwnPropertySymbols;var k="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:j?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function E(t){return null===t?null:"object"==typeof t?""+t:t}function C(t,e){return l.hasOwnProperty.call(t,e)}var T=Object.getOwnPropertyDescriptors||function(t){var e={};return k(t).forEach((function(n){e[n]=s(t,n)})),e};function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),r)}var i,o}function N(t,e,n){return e&&V(t.prototype,e),n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D.apply(this,arguments)}function L(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,R(t,e)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U=Symbol("mobx-stored-annotations");function z(t){return Object.assign((function(e,n){if(K(n))return t.decorate_20223_(e,n);G(e,n,t)}),t)}function G(t,e,n){C(t,U)||w(t,U,D({},t[U])),function(t){return t.annotationType_===$}(n)||(t[U][e]=n)}function K(t){return"object"==typeof t&&"string"==typeof t.kind}var q=Symbol("mobx administration"),W=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ft.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return be(this)},e.reportChanged=function(){_e(),ye(this),pe()},e.toString=function(){return this.name_},t}(),H=A("Atom",W);function J(t,e,n){void 0===e&&(e=p),void 0===n&&(n=p);var r,i=new W(t);return e!==p&&Ue(Be,i,e,r),n!==p&&Ie(i,n),i}var F={identity:function(t,e){return t===e},structural:function(t,e){return nr(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return nr(t,e,1)}};function X(t,e,n){return Xe(t)?t:Array.isArray(t)?Nt.array(t,{name:n}):m(t)?Nt.object(t,void 0,{name:n}):P(t)?Nt.map(t,{name:n}):x(t)?Nt.set(t,{name:n}):"function"!=typeof t||De(t)||Fe(t)?t:O(t)?He(t):Ne(n,t)}function Y(t){return t}var $="override";function Q(t,e){return{annotationType_:t,options_:e,make_:Z,extend_:tt,decorate_20223_:et}}function Z(t,e,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(t,e,n,!1)?0:1;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(De(n.value))return 1;var o=nt(t,this,e,n,!1);return u(r,e,o),2}function tt(t,e,n,r){var i=nt(t,this,e,n);return t.defineProperty_(e,i,r)}function et(t,e){var n=e.kind,i=e.name,o=e.addInitializer,a=this;if("field"!=n){var s,u,l,c,h,d;if("method"==n)return De(t)||(u=t,t=Kt(null!=(l=null==(c=a.options_)?void 0:c.name)?l:i.toString(),u,null!=(h=null==(d=a.options_)?void 0:d.autoAction)&&h)),null!=(s=this.options_)&&s.bound&&o((function(){var t=this,e=t[i].bind(t);e.isMobxAction=!0,t[i]=e})),t;r("Cannot apply '"+a.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+a.annotationType_+"' can only be used on properties with a function value.")}else o((function(){G(this,i,a)}))}function nt(t,e,n,r,i){var o,a,s,u,l,c,h,d;void 0===i&&(i=he.safeDescriptors),d=r,e.annotationType_,d.value;var f,v=r.value;null!=(o=e.options_)&&o.bound&&(v=v.bind(null!=(f=t.proxy_)?f:t.target_));return{value:Kt(null!=(a=null==(s=e.options_)?void 0:s.name)?a:n.toString(),v,null!=(u=null==(l=e.options_)?void 0:l.autoAction)&&u,null!=(c=e.options_)&&c.bound?null!=(h=t.proxy_)?h:t.target_:void 0),configurable:!i||t.isPlainObject_,enumerable:!1,writable:!i}}function rt(t,e){return{annotationType_:t,options_:e,make_:it,extend_:ot,decorate_20223_:at}}function it(t,e,n,r){var i;if(r===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!C(t.target_,e)||!Fe(t.target_[e]))&&null===this.extend_(t,e,n,!1))return 0;if(Fe(n.value))return 1;var o=st(t,this,e,n,!1,!1);return u(r,e,o),2}function ot(t,e,n,r){var i,o=st(t,this,e,n,null==(i=this.options_)?void 0:i.bound);return t.defineProperty_(e,o,r)}function at(t,e){var n,r=e.name,i=e.addInitializer;return Fe(t)||(t=He(t)),null!=(n=this.options_)&&n.bound&&i((function(){var t=this,e=t[r].bind(t);e.isMobXFlow=!0,t[r]=e})),t}function st(t,e,n,r,i,o){var a;void 0===o&&(o=he.safeDescriptors),a=r,e.annotationType_,a.value;var s,u=r.value;(Fe(u)||(u=He(u)),i)&&((u=u.bind(null!=(s=t.proxy_)?s:t.target_)).isMobXFlow=!0);return{value:u,configurable:!o||t.isPlainObject_,enumerable:!1,writable:!o}}function ut(t,e){return{annotationType_:t,options_:e,make_:lt,extend_:ct,decorate_20223_:ht}}function lt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function ct(t,e,n,r){var i;return i=n,this.annotationType_,i.get,t.defineComputedProperty_(e,D({},this.options_,{get:n.get,set:n.set}),r)}function ht(t,e){var n=this,r=e.name;return(0,e.addInitializer)((function(){var e=Ln(this)[q],i=D({},n.options_,{get:t,context:this});i.name||(i.name="ObservableObject."+r.toString()),e.values_.set(r,new Yt(i))})),function(){return this[q].getObservablePropValue_(r)}}function dt(t,e){return{annotationType_:t,options_:e,make_:ft,extend_:vt,decorate_20223_:_t}}function ft(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function vt(t,e,n,r){var i,o;return this.annotationType_,t.defineObservableProperty_(e,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:X,r)}function _t(t,e){var n=this,r=e.kind,i=e.name,o=new WeakSet;function a(t,e){var r,a,s=Ln(t)[q],u=new Jt(e,null!=(r=null==(a=n.options_)?void 0:a.enhancer)?r:X,"ObservableObject."+i.toString(),!1);s.values_.set(i,u),o.add(t)}if("accessor"==r)return{get:function(){return o.has(this)||a(this,t.get.call(this)),this[q].getObservablePropValue_(i)},set:function(t){return o.has(this)||a(this,t),this[q].setObservablePropValue_(i,t)},init:function(t){return o.has(this)||a(this,t),t}}}var pt="true",bt=yt();function yt(t){return{annotationType_:pt,options_:t,make_:gt,extend_:mt,decorate_20223_:Ot}}function gt(t,e,n,r){var i,o,a,s;if(n.get)return Bt.make_(t,e,n,r);if(n.set){var l=Kt(e.toString(),n.set);return r===t.target_?null===t.defineProperty_(e,{configurable:!he.safeDescriptors||t.isPlainObject_,set:l})?0:2:(u(r,e,{configurable:!0,set:l}),2)}if(r!==t.target_&&"function"==typeof n.value)return O(n.value)?(null!=(s=this.options_)&&s.autoBind?He.bound:He).make_(t,e,n,r):(null!=(a=this.options_)&&a.autoBind?Ne.bound:Ne).make_(t,e,n,r);var c,h=!1===(null==(i=this.options_)?void 0:i.deep)?Nt.ref:Nt;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(c=t.proxy_)?c:t.target_));return h.make_(t,e,n,r)}function mt(t,e,n,r){var i,o,a;if(n.get)return Bt.extend_(t,e,n,r);if(n.set)return t.defineProperty_(e,{configurable:!he.safeDescriptors||t.isPlainObject_,set:Kt(e.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(a=t.proxy_)?a:t.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Nt.ref:Nt).extend_(t,e,n,r)}function Ot(t,e){r("'"+this.annotationType_+"' cannot be used as a decorator")}var wt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function St(t){return t||wt}Object.freeze(wt);var At=dt("observable"),Pt=dt("observable.ref",{enhancer:Y}),xt=dt("observable.shallow",{enhancer:function(t,e,n){return null==t||Mn(t)||On(t)||kn(t)||Tn(t)?t:Array.isArray(t)?Nt.array(t,{name:n,deep:!1}):m(t)?Nt.object(t,void 0,{name:n,deep:!1}):P(t)?Nt.map(t,{name:n,deep:!1}):x(t)?Nt.set(t,{name:n,deep:!1}):void 0}}),jt=dt("observable.struct",{enhancer:function(t,e){return nr(t,e)?e:t}}),kt=z(At);function Et(t){return!0===t.deep?X:!1===t.deep?Y:(e=t.defaultDecorator)&&null!=(n=null==(r=e.options_)?void 0:r.enhancer)?n:X;var e,n,r}function Ct(t,e,n){return K(e)?At.decorate_20223_(t,e):y(e)?void G(t,e,At):Xe(t)?t:m(t)?Nt.object(t,e,n):Array.isArray(t)?Nt.array(t,e):P(t)?Nt.map(t,e):x(t)?Nt.set(t,e):"object"==typeof t&&null!==t?t:Nt.box(t,e)}a(Ct,kt);var Tt,Vt,Nt=a(Ct,{box:function(t,e){var n=St(e);return new Jt(t,Et(n),n.name,!0,n.equals)},array:function(t,e){var n=St(e);return(!1===he.useProxies||!1===n.proxy?Yn:dn)(t,Et(n),n.name)},map:function(t,e){var n=St(e);return new jn(t,Et(n),n.name)},set:function(t,e){var n=St(e);return new Cn(t,Et(n),n.name)},object:function(t,e,n){return tr((function(){return ze(!1===he.useProxies||!1===(null==n?void 0:n.proxy)?Ln({},n):function(t,e){var n,r;return v(),t=Ln(t,e),null!=(r=(n=t[q]).proxy_)?r:n.proxy_=new Proxy(t,Qe)}({},n),t,e)}))},ref:z(Pt),shallow:z(xt),deep:kt,struct:z(jt)}),Dt="computed",Lt=ut(Dt),Rt=ut("computed.struct",{equals:F.structural}),Bt=function(t,e){if(K(e))return Lt.decorate_20223_(t,e);if(y(e))return G(t,e,Lt);if(m(t))return z(ut(Dt,t));var n=m(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new Yt(n)};Object.assign(Bt,Lt),Bt.struct=z(Rt);var Mt,It=0,Ut=1,zt=null!=(Tt=null==(Vt=s((function(){}),"name"))?void 0:Vt.configurable)&&Tt,Gt={value:"action",configurable:!0,writable:!1,enumerable:!1};function Kt(t,e,n,i){function o(){return function(t,e,n,i,o){var a=function(t,e,n,r){var i=!1,o=0,a=he.trackingDerivation,s=!e||!a;_e();var u=he.allowStateChanges;s&&(ie(),u=qt(!0));var l=ae(!0),c={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:i,startTime_:o,actionId_:Ut++,parentActionId_:It};return It=c.actionId_,c}(0,e);try{return n.apply(i,o)}catch(t){throw a.error_=t,t}finally{!function(t){It!==t.actionId_&&r(30);It=t.parentActionId_,void 0!==t.error_&&(he.suppressReactionErrors=!0);Wt(t.prevAllowStateChanges_),se(t.prevAllowStateReads_),pe(),t.runAsAction_&&oe(t.prevDerivation_);he.suppressReactionErrors=!1}(a)}}(0,n,e,i||this,arguments)}return void 0===n&&(n=!1),o.isMobxAction=!0,o.toString=function(){return e.toString()},zt&&(Gt.value=t,u(o,"name",Gt)),o}function qt(t){var e=he.allowStateChanges;return he.allowStateChanges=t,e}function Wt(t){he.allowStateChanges=t}Mt=Symbol.toPrimitive;var Ht,Jt=function(t){function e(e,n,r,i,o){var a;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=F.default),(a=t.call(this,r)||this).enhancer=void 0,a.name_=void 0,a.equals=void 0,a.hasUnreportedChange_=!1,a.interceptors_=void 0,a.changeListeners_=void 0,a.value_=void 0,a.dehancer=void 0,a.enhancer=n,a.name_=r,a.equals=o,a.value_=n(e,void 0,r),a}L(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){this.value_,(t=this.prepareNewValue_(t))!==he.UNCHANGED&&this.setNewValue_(t)},n.prepareNewValue_=function(t){if(Ze(this)){var e=en(this,{object:this,type:ln,newValue:t});if(!e)return he.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?he.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),nn(this)&&on(this,{type:ln,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return tn(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:ln,newValue:this.value_,oldValue:void 0}),rn(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return E(this.get())},n[Mt]=function(){return this.valueOf()},e}(W);Ht=Symbol.toPrimitive;var Ft,Xt,Yt=function(){function t(t){this.dependenciesState_=Ft.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ft.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Qt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Xt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||r(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=Kt("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?F.structural:F.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){if(t.lowestObserverState_!==Ft.UP_TO_DATE_)return;t.lowestObserverState_=Ft.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Ft.UP_TO_DATE_&&(t.dependenciesState_=Ft.POSSIBLY_STALE_,t.onBecomeStale_())}))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==he.inBatch||0!==this.observers_.size||this.keepAlive_){if(be(this),te(this)){var t=he.trackingContext;this.keepAlive_&&!t&&(he.trackingContext=this),this.trackAndCompute()&&function(t){if(t.lowestObserverState_===Ft.STALE_)return;t.lowestObserverState_=Ft.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===Ft.POSSIBLY_STALE_?e.dependenciesState_=Ft.STALE_:e.dependenciesState_===Ft.UP_TO_DATE_&&(t.lowestObserverState_=Ft.UP_TO_DATE_)}))}(this),he.trackingContext=t}}else te(this)&&(this.warnAboutUntrackedRead_(),_e(),this.value_=this.computeValue_(!1),pe());var e=this.value_;if(Zt(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===Ft.NOT_TRACKING_,n=this.computeValue_(!0),r=e||Zt(t)||Zt(n)||!this.equals_(t,n);return r&&(this.value_=n),r},e.computeValue_=function(t){this.isComputing_=!0;var e,n=qt(!1);if(t)e=ee(this,this.derivation,this.scope_);else if(!0===he.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new Qt(t)}return Wt(n),this.isComputing_=!1,e},e.suspend_=function(){this.keepAlive_||(ne(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,r=!0,i=void 0;return Le((function(){var o=n.get();if(!r||e){var a=ie();t({observableKind:"computed",debugObjectName:n.name_,type:ln,object:n,newValue:o,oldValue:i}),oe(a)}r=!1,i=o}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return E(this.get())},e[Ht]=function(){return this.valueOf()},t}(),$t=A("ComputedValue",Yt);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}(Ft||(Ft={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Xt||(Xt={}));var Qt=function(t){this.cause=void 0,this.cause=t};function Zt(t){return t instanceof Qt}function te(t){switch(t.dependenciesState_){case Ft.UP_TO_DATE_:return!1;case Ft.NOT_TRACKING_:case Ft.STALE_:return!0;case Ft.POSSIBLY_STALE_:for(var e=ae(!0),n=ie(),r=t.observing_,i=r.length,o=0;o<i;o++){var a=r[o];if($t(a)){if(he.disableErrorBoundaries)a.get();else try{a.get()}catch(t){return oe(n),se(e),!0}if(t.dependenciesState_===Ft.STALE_)return oe(n),se(e),!0}}return ue(t),oe(n),se(e),!1}}function ee(t,e,n){var r=ae(!0);ue(t),t.newObserving_=new Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++he.runId;var i,o=he.trackingDerivation;if(he.trackingDerivation=t,he.inBatch++,!0===he.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new Qt(t)}return he.inBatch--,he.trackingDerivation=o,function(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,r=Ft.UP_TO_DATE_,i=0,o=t.unboundDepsCount_,a=0;a<o;a++){var s=n[a];0===s.diffValue_&&(s.diffValue_=1,i!==a&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,t.newObserving_=null,o=e.length;for(;o--;){var u=e[o];0===u.diffValue_&&fe(u,t),u.diffValue_=0}for(;i--;){var l=n[i];1===l.diffValue_&&(l.diffValue_=0,de(l,t))}r!==Ft.UP_TO_DATE_&&(t.dependenciesState_=r,t.onBecomeStale_())}(t),se(r),i}function ne(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)fe(e[n],t);t.dependenciesState_=Ft.NOT_TRACKING_}function re(t){var e=ie();try{return t()}finally{oe(e)}}function ie(){var t=he.trackingDerivation;return he.trackingDerivation=null,t}function oe(t){he.trackingDerivation=t}function ae(t){var e=he.allowStateReads;return he.allowStateReads=t,e}function se(t){he.allowStateReads=t}function ue(t){if(t.dependenciesState_!==Ft.UP_TO_DATE_){t.dependenciesState_=Ft.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=Ft.UP_TO_DATE_}}var le=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ce=!0,he=function(){var t=o();return t.__mx_isolated_mobxInstanceCount>0&&!t.__mx_isolated_mobxGlobals&&(ce=!1),t.__mx_isolated_mobxGlobals&&t.__mx_isolated_mobxGlobals.version!==(new le).version&&(ce=!1),ce?t.__mx_isolated_mobxGlobals?(t.__mx_isolated_mobxInstanceCount+=1,t.__mx_isolated_mobxGlobals.UNCHANGED||(t.__mx_isolated_mobxGlobals.UNCHANGED={}),t.__mx_isolated_mobxGlobals):(t.__mx_isolated_mobxInstanceCount=1,t.__mx_isolated_mobxGlobals=new le):(setTimeout((function(){r(35)}),1),new le)}();function de(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function fe(t,e){t.observers_.delete(e),0===t.observers_.size&&ve(t)}function ve(t){!1===t.isPendingUnobservation_&&(t.isPendingUnobservation_=!0,he.pendingUnobservations.push(t))}function _e(){he.inBatch++}function pe(){if(0==--he.inBatch){we();for(var t=he.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Yt&&n.suspend_())}he.pendingUnobservations=[]}}function be(t){var e=he.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&he.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(0===t.observers_.size&&he.inBatch>0&&ve(t),!1)}function ye(t){t.lowestObserverState_!==Ft.STALE_&&(t.lowestObserverState_=Ft.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Ft.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Ft.STALE_})))}var ge=function(){function t(t,e,n,r){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ft.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Xt.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=r}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,he.pendingReactions.push(this),we())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){_e(),this.isScheduled_=!1;var t=he.trackingContext;if(he.trackingContext=this,te(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}he.trackingContext=t,pe()}},e.track=function(t){if(!this.isDisposed_){_e(),this.isRunning_=!0;var e=he.trackingContext;he.trackingContext=this;var n=ee(this,t,void 0);he.trackingContext=e,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&ne(this),Zt(n)&&this.reportExceptionInDerivation_(n.cause),pe()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(he.disableErrorBoundaries)throw t;var n="[mobx] uncaught error in '"+this+"'";he.suppressReactionErrors||console.error(n,t),he.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(_e(),ne(this),pe()))},e.getDisposer_=function(t){var e=this,n=function n(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",n)};return null==t||null==t.addEventListener||t.addEventListener("abort",n),n[q]=this,n},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){},t}(),me=100,Oe=function(t){return t()};function we(){he.inBatch>0||he.isRunningReactions||Oe(Se)}function Se(){he.isRunningReactions=!0;for(var t=he.pendingReactions,e=0;t.length>0;){++e===me&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}he.isRunningReactions=!1}var Ae=A("Reaction",ge);var Pe="action",xe="autoAction",je=Q(Pe),ke=Q("action.bound",{bound:!0}),Ee=Q(xe,{autoAction:!0}),Ce=Q("autoAction.bound",{autoAction:!0,bound:!0});function Te(t){return function(e,n){return b(e)?Kt(e.name||"<unnamed action>",e,t):b(n)?Kt(e,n,t):K(n)?(t?Ee:je).decorate_20223_(e,n):y(n)?G(e,n,t?Ee:je):y(e)?z(Q(t?xe:Pe,{name:e,autoAction:t})):void 0}}var Ve=Te(!1);Object.assign(Ve,je);var Ne=Te(!0);function De(t){return b(t)&&!0===t.isMobxAction}function Le(t,e){var n,r,i,o,a;void 0===e&&(e=h);var s,u=null!=(n=null==(r=e)?void 0:r.name)?n:"Autorun";if(!e.scheduler&&!e.delay)s=new ge(u,(function(){this.track(d)}),e.onError,e.requiresObservable);else{var l=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Re}(e),c=!1;s=new ge(u,(function(){c||(c=!0,l((function(){c=!1,s.isDisposed_||s.track(d)})))}),e.onError,e.requiresObservable)}function d(){t(s)}return null!=(i=e)&&null!=(o=i.signal)&&o.aborted||s.schedule_(),s.getDisposer_(null==(a=e)?void 0:a.signal)}Object.assign(Ne,Ee),Ve.bound=z(ke),Ne.bound=z(Ce);var Re=function(t){return t()};var Be="onBO",Me="onBUO";function Ie(t,e,n){return Ue(Me,t,e,n)}function Ue(t,e,n,r){var i="function"==typeof r?$n(e,n):$n(e),o=b(r)?r:n,a=t+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var t=i[a];t&&(t.delete(o),0===t.size&&delete i[a])}}function ze(t,e,n,r){var i=T(e);return tr((function(){var e=Ln(t,r)[q];k(i).forEach((function(t){e.extend_(t,i[t],!n||(!(t in n)||n[t]))}))})),t}var Ge=0;function Ke(){this.message="FLOW_CANCELLED"}Ke.prototype=Object.create(Error.prototype);var qe=rt("flow"),We=rt("flow.bound",{bound:!0}),He=Object.assign((function(t,e){if(K(e))return qe.decorate_20223_(t,e);if(y(e))return G(t,e,qe);var n=t,r=n.name||"<unnamed flow>",i=function(){var t,e=arguments,i=++Ge,o=Ve(r+" - runid: "+i+" - init",n).apply(this,e),a=void 0,s=new Promise((function(e,n){var s=0;function u(t){var e;a=void 0;try{e=Ve(r+" - runid: "+i+" - yield "+s++,o.next).call(o,t)}catch(t){return n(t)}c(e)}function l(t){var e;a=void 0;try{e=Ve(r+" - runid: "+i+" - yield "+s++,o.throw).call(o,t)}catch(t){return n(t)}c(e)}function c(t){if(!b(null==t?void 0:t.then))return t.done?e(t.value):(a=Promise.resolve(t.value)).then(u,l);t.then(c,n)}t=n,u(void 0)}));return s.cancel=Ve(r+" - runid: "+i+" - cancel",(function(){try{a&&Je(a);var e=o.return(void 0),n=Promise.resolve(e.value);n.then(p,p),Je(n),t(new Ke)}catch(e){t(e)}})),s};return i.isMobXFlow=!0,i}),qe);function Je(t){b(t.cancel)&&t.cancel()}function Fe(t){return!0===(null==t?void 0:t.isMobXFlow)}function Xe(t){return function(t,e){return!!t&&(void 0!==e?!!Mn(t)&&t[q].values_.has(e):Mn(t)||!!t[q]||H(t)||Ae(t)||$t(t))}(t)}function Ye(t,e){void 0===e&&(e=void 0),_e();try{return t.apply(e)}finally{pe()}}function $e(t){return t[q]}He.bound=z(We);var Qe={has:function(t,e){return $e(t).has_(e)},get:function(t,e){return $e(t).get_(e)},set:function(t,e,n){var r;return!!y(e)&&(null==(r=$e(t).set_(e,n,!0))||r)},deleteProperty:function(t,e){var n;return!!y(e)&&(null==(n=$e(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var r;return null==(r=$e(t).defineProperty_(e,n))||r},ownKeys:function(t){return $e(t).ownKeys_()},preventExtensions:function(t){r(13)}};function Ze(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function tn(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),_((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function en(t,e){var n=ie();try{for(var i=[].concat(t.interceptors_||[]),o=0,a=i.length;o<a&&((e=i[o](e))&&!e.type&&r(14),e);o++);return e}finally{oe(n)}}function nn(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function rn(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),_((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function on(t,e){var n=ie(),r=t.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);oe(n)}}function an(t,e,n){return tr((function(){var r=Ln(t,n)[q];null!=e||(e=function(t){return C(t,U)||w(t,U,D({},t[U])),t[U]}(t)),k(e).forEach((function(t){return r.make_(t,e[t])}))})),t}var sn=Symbol("mobx-keys");var un="splice",ln="update",cn={get:function(t,e){var n=t[q];return e===q?n:"length"===e?n.getArrayLength_():"string"!=typeof e||isNaN(e)?C(fn,e)?fn[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var r=t[q];return"length"===e&&r.setArrayLength_(n),"symbol"==typeof e||isNaN(e)?t[e]=n:r.set_(parseInt(e),n),!0},preventExtensions:function(){r(15)}},hn=function(){function t(t,e,n,r){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new W(t),this.enhancer_=function(t,n){return e(t,n,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return tn(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),rn(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&r("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),i=0;i<t-e;i++)n[i]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&Xn(t+e+1)},e.spliceWithArray_=function(t,e,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=c),Ze(this)){var o=en(this,{object:this.proxy_,type:un,index:t,removedCount:e,added:n});if(!o)return c;e=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(t){return r.enhancer_(t,void 0)})),this.legacyMode_){var a=n.length-e;this.updateArrayLength_(i,a)}var s=this.spliceItemsIntoValues_(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice_(t,n,s),this.dehanceValues_(s)},e.spliceItemsIntoValues_=function(t,e,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[t,e].concat(n));var i=this.values_.slice(t,t+e),o=this.values_.slice(t+e);this.values_.length+=n.length-e;for(var a=0;a<n.length;a++)this.values_[t+a]=n[a];for(var s=0;s<o.length;s++)this.values_[t+n.length+s]=o[s];return i},e.notifyArrayChildUpdate_=function(t,e,n){var r=!this.owned_&&!1,i=nn(this),o=i||r?{observableKind:"array",object:this.proxy_,type:ln,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;this.atom_.reportChanged(),i&&on(this,o)},e.notifyArraySplice_=function(t,e,n){var r=!this.owned_&&!1,i=nn(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:un,index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom_.reportChanged(),i&&on(this,o)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var n=this.values_;if(this.legacyMode_&&t>n.length&&r(17,t,n.length),t<n.length){this.atom_;var i=n[t];if(Ze(this)){var o=en(this,{type:ln,object:this.proxy_,index:t,newValue:e});if(!o)return;e=o.newValue}(e=this.enhancer_(e,i))!==i&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,i))}else{for(var a=new Array(t+1-n.length),s=0;s<a.length-1;s++)a[s]=void 0;a[a.length-1]=e,this.spliceWithArray_(n.length,0,a)}},t}();function dn(t,e,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),v(),tr((function(){var i=new hn(n,e,r,!1);S(i.values_,q,i);var o=new Proxy(i.values_,cn);return i.proxy_=o,t&&t.length&&i.spliceWithArray_(0,0,t),o}))}var fn={clear:function(){return this.splice(0)},replace:function(t){var e=this[q];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[q];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,e)}return o.spliceWithArray_(t,e,r)},spliceWithArray:function(t,e,n){return this[q].spliceWithArray_(t,e,n)},push:function(){for(var t=this[q],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[q].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[q],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return he.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){he.trackingDerivation&&r(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[q],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function vn(t,e){"function"==typeof Array.prototype[t]&&(fn[t]=e(t))}function _n(t){return function(){var e=this[q];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function pn(t){return function(e,n){var r=this,i=this[q];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[t]((function(t,i){return e.call(n,t,i,r)}))}}function bn(t){return function(){var e=this,n=this[q];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(t,n,r){return i(t,n,r,e)},r[t].apply(r,arguments)}}vn("at",_n),vn("concat",_n),vn("flat",_n),vn("includes",_n),vn("indexOf",_n),vn("join",_n),vn("lastIndexOf",_n),vn("slice",_n),vn("toString",_n),vn("toLocaleString",_n),vn("toSorted",_n),vn("toSpliced",_n),vn("with",_n),vn("every",pn),vn("filter",pn),vn("find",pn),vn("findIndex",pn),vn("findLast",pn),vn("findLastIndex",pn),vn("flatMap",pn),vn("forEach",pn),vn("map",pn),vn("some",pn),vn("toReversed",pn),vn("reduce",bn),vn("reduceRight",bn);var yn,gn,mn=A("ObservableArrayAdministration",hn);function On(t){return g(t)&&mn(t[q])}var wn={},Sn="add",An="delete";yn=Symbol.iterator,gn=Symbol.toStringTag;var Pn,xn,jn=function(){function t(t,e,n){var i=this;void 0===e&&(e=X),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[q]=wn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,b(Map)||r(18),tr((function(){i.keysAtom_=J("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,t&&i.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!he.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var r=n=new Jt(this.has_(t),Y,"ObservableMap.key?",!1);this.hasMap_.set(t,r),Ie(r,(function(){return e.hasMap_.delete(t)}))}return n.get()},e.set=function(t,e){var n=this.has_(t);if(Ze(this)){var r=en(this,{type:n?ln:Sn,object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if((this.keysAtom_,Ze(this))&&!en(this,{type:An,object:this,name:t}))return!1;if(this.has_(t)){var n=nn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:An,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return Ye((function(){var n;e.keysAtom_.reportChanged(),null==(n=e.hasMap_.get(t))||n.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),n&&on(this,r),!0}return!1},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==he.UNCHANGED){var r=nn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:ln,object:this,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),r&&on(this,i)}},e.addValue_=function(t,e){var n=this;this.keysAtom_,Ye((function(){var r,i=new Jt(e,n.enhancer_,"ObservableMap.key",!1);n.data_.set(t,i),e=i.value_,null==(r=n.hasMap_.get(t))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=nn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Sn,object:this,name:t,newValue:e}:null;r&&on(this,i)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return or({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t.get(i)}}})},e.entries=function(){var t=this,e=this.keys();return or({next:function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,t.get(i)]}}})},e[yn]=function(){return this.entries()},e.forEach=function(t,e){for(var n,r=I(this);!(n=r()).done;){var i=n.value,o=i[0],a=i[1];t.call(e,a,o,this)}},e.merge=function(t){var e=this;return kn(t)&&(t=new Map(t)),Ye((function(){m(t)?function(t){var e=Object.keys(t);if(!j)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter((function(e){return l.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=t[0],r=t[1];return e.set(n,r)})):P(t)?(t.constructor!==Map&&r(19,t),t.forEach((function(t,n){return e.set(n,t)}))):null!=t&&r(20,t)})),this},e.clear=function(){var t=this;Ye((function(){re((function(){for(var e,n=I(t.keys());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.replace=function(t){var e=this;return Ye((function(){for(var n,i=function(t){if(P(t)||kn(t))return t;if(Array.isArray(t))return new Map(t);if(m(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return r(21,t)}(t),o=new Map,a=!1,s=I(e.data_.keys());!(n=s()).done;){var u=n.value;if(!i.has(u))if(e.delete(u))a=!0;else{var l=e.data_.get(u);o.set(u,l)}}for(var c,h=I(i.entries());!(c=h()).done;){var d=c.value,f=d[0],v=d[1],_=e.data_.has(f);if(e.set(f,v),e.data_.has(f)){var p=e.data_.get(f);o.set(f,p),_||(a=!0)}}if(!a)if(e.data_.size!==o.size)e.keysAtom_.reportChanged();else for(var b=e.data_.keys(),y=o.keys(),g=b.next(),O=y.next();!g.done;){if(g.value!==O.value){e.keysAtom_.reportChanged();break}g=b.next(),O=y.next()}e.data_=o})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return rn(this,t)},e.intercept_=function(t){return tn(this,t)},N(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:gn,get:function(){return"Map"}}]),t}(),kn=A("ObservableMap",jn);var En={};Pn=Symbol.iterator,xn=Symbol.toStringTag;var Cn=function(){function t(t,e,n){var i=this;void 0===e&&(e=X),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[q]=En,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,b(Set)||r(22),this.enhancer_=function(t,r){return e(t,r,n)},tr((function(){i.atom_=J(i.name_),t&&i.replace(t)}))}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;Ye((function(){re((function(){for(var e,n=I(t.data_.values());!(e=n()).done;){var r=e.value;t.delete(r)}}))}))},e.forEach=function(t,e){for(var n,r=I(this);!(n=r()).done;){var i=n.value;t.call(e,i,i,this)}},e.add=function(t){var e=this;if((this.atom_,Ze(this))&&!en(this,{type:Sn,object:this,newValue:t}))return this;if(!this.has(t)){Ye((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var n=nn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Sn,object:this,newValue:t}:null;n&&on(this,r)}return this},e.delete=function(t){var e=this;if(Ze(this)&&!en(this,{type:An,object:this,oldValue:t}))return!1;if(this.has(t)){var n=nn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:An,object:this,oldValue:t}:null;return Ye((function(){e.atom_.reportChanged(),e.data_.delete(t)})),n&&on(this,r),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return or({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return or({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.replace=function(t){var e=this;return Tn(t)&&(t=new Set(t)),Ye((function(){Array.isArray(t)||x(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&r("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return rn(this,t)},e.intercept_=function(t){return tn(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Pn]=function(){return this.values()},N(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:xn,get:function(){return"Set"}}]),t}(),Tn=A("ObservableSet",Cn),Vn=Object.create(null),Nn="remove",Dn=function(){function t(t,e,n,r){void 0===e&&(e=new Map),void 0===r&&(r=bt),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new W("ObservableObject.keys"),this.isPlainObject_=m(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof Yt)return n.set(e),!0;if(Ze(this)){var r=en(this,{type:ln,object:this.proxy_||this.target_,name:t,newValue:e});if(!r)return null;e=r.newValue}if((e=n.prepareNewValue_(e))!==he.UNCHANGED){var i=nn(this),o=i?{type:ln,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),i&&on(this,o)}return!0},e.get_=function(t){return he.trackingDerivation&&!C(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),C(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!he.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new Jt(t in this.target_,Y,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(!(t in this.target_)){var n;if(null!=(n=this.target_[U])&&n[t])return;r(1,e.annotationType_,this.name_+"."+t.toString())}for(var i=this.target_;i&&i!==l;){var o=s(i,t);if(o){var a=e.make_(this,t,o,i);if(0===a)return;if(1===a)break}i=Object.getPrototypeOf(i)}In(this,e,t)}},e.extend_=function(t,e,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,r);var i=n.extend_(this,t,e,r);return i&&In(this,n,t),i},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{_e();var r=this.delete_(t);if(!r)return r;if(Ze(this)){var i=en(this,{object:this.proxy_||this.target_,name:t,type:Sn,newValue:e.value});if(!i)return null;var o=i.newValue;e.value!==o&&(e=D({},e,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else u(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{pe()}return!0},e.defineObservableProperty_=function(t,e,n,r){void 0===r&&(r=!1),this.keysAtom_;try{_e();var i=this.delete_(t);if(!i)return i;if(Ze(this)){var o=en(this,{object:this.proxy_||this.target_,name:t,type:Sn,newValue:e});if(!o)return null;e=o.newValue}var a=Bn(t),s={configurable:!he.safeDescriptors||this.isPlainObject_,enumerable:!0,get:a.get,set:a.set};if(r){if(!Reflect.defineProperty(this.target_,t,s))return!1}else u(this.target_,t,s);var l=new Jt(e,n,"ObservableObject.key",!1);this.values_.set(t,l),this.notifyPropertyAddition_(t,l.value_)}finally{pe()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{_e();var r=this.delete_(t);if(!r)return r;if(Ze(this))if(!en(this,{object:this.proxy_||this.target_,name:t,type:Sn,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var i=Bn(t),o={configurable:!he.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,t,o))return!1}else u(this.target_,t,o);this.values_.set(t,new Yt(e)),this.notifyPropertyAddition_(t,void 0)}finally{pe()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),this.keysAtom_,!C(this.target_,t))return!0;if(Ze(this)&&!en(this,{object:this.proxy_||this.target_,name:t,type:Nn}))return null;try{var n,r;_e();var i,o=nn(this),a=this.values_.get(t),u=void 0;if(!a&&o)u=null==(i=s(this.target_,t))?void 0:i.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(a&&(this.values_.delete(t),a instanceof Jt&&(u=a.value_),ye(a)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(t))||r.set(t in this.target_),o){var l={type:Nn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:u,name:t};0,o&&on(this,l)}}finally{pe()}return!0},e.observe_=function(t,e){return rn(this,t)},e.intercept_=function(t){return tn(this,t)},e.notifyPropertyAddition_=function(t,e){var n,r,i=nn(this);if(i){var o=i?{type:Sn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;i&&on(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(t))||r.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),k(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Ln(t,e){var n;if(C(t,q))return t;var r=null!=(n=null==e?void 0:e.name)?n:"ObservableObject",i=new Dn(t,new Map,String(r),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:yt(t):void 0}(e));return w(t,q,i),t}var Rn=A("ObservableObjectAdministration",Dn);function Bn(t){return Vn[t]||(Vn[t]={get:function(){return this[q].getObservablePropValue_(t)},set:function(e){return this[q].setObservablePropValue_(t,e)}})}function Mn(t){return!!g(t)&&Rn(t[q])}function In(t,e,n){var r;null==(r=t.target_[U])||delete r[n]}var Un,zn,Gn=Jn(0),Kn=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),qn=0,Wn=function(){};Un=Wn,zn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Un.prototype,zn):void 0!==Un.prototype.__proto__?Un.prototype.__proto__=zn:Un.prototype=zn;var Hn=function(t,e,n){function r(e,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=t.call(this)||this,tr((function(){var t=new hn(r,n,i,!0);t.proxy_=B(o),S(B(o),q,t),e&&e.length&&o.spliceWithArray(0,0,e),Kn&&Object.defineProperty(B(o),"0",Gn)})),o}L(r,t);var i=r.prototype;return i.concat=function(){this[q].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return On(t)?t.slice():t})))},i[n]=function(){var t=this,e=0;return or({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},N(r,[{key:"length",get:function(){return this[q].getArrayLength_()},set:function(t){this[q].setArrayLength_(t)}},{key:e,get:function(){return"Array"}}]),r}(Wn,Symbol.toStringTag,Symbol.iterator);function Jn(t){return{enumerable:!1,configurable:!0,get:function(){return this[q].get_(t)},set:function(e){this[q].set_(t,e)}}}function Fn(t){u(Hn.prototype,""+t,Jn(t))}function Xn(t){if(t>qn){for(var e=qn;e<t+100;e++)Fn(e);qn=t}}function Yn(t,e,n){return new Hn(t,e,n)}function $n(t,e){if("object"==typeof t&&null!==t){if(On(t))return void 0!==e&&r(23),t[q].atom_;if(Tn(t))return t.atom_;if(kn(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||r(25,e,Zn(t)),n}if(Mn(t)){if(!e)return r(26);var i=t[q].values_.get(e);return i||r(27,e,Zn(t)),i}if(H(t)||$t(t)||Ae(t))return t}else if(b(t)&&Ae(t[q]))return t[q];r(28)}function Qn(t,e){return t||r(29),void 0!==e?Qn($n(t,e)):H(t)||$t(t)||Ae(t)||kn(t)||Tn(t)?t:t[q]?t[q]:void r(24,t)}function Zn(t,e){var n;if(void 0!==e)n=$n(t,e);else{if(De(t))return t.name;n=Mn(t)||kn(t)||Tn(t)?Qn(t):$n(t)}return n.name_}function tr(t){var e=ie(),n=qt(!0);_e();try{return t()}finally{pe(),Wt(n),oe(e)}}Object.entries(fn).forEach((function(t){var e=t[0],n=t[1];"concat"!==e&&w(Hn.prototype,e,n)})),Xn(1e3);var er=l.toString;function nr(t,e,n){return void 0===n&&(n=-1),rr(t,e,n)}function rr(t,e,n,r,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;var a=er.call(t);if(a!==er.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=ir(t),e=ir(e);var s="[object Array]"===a;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,l=e.constructor;if(u!==l&&!(b(u)&&u instanceof u&&b(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===t)return i[c]===e;if(r.push(t),i.push(e),s){if((c=t.length)!==e.length)return!1;for(;c--;)if(!rr(t[c],e[c],n-1,r,i))return!1}else{var h,d=Object.keys(t);if(c=d.length,Object.keys(e).length!==c)return!1;for(;c--;)if(!C(e,h=d[c])||!rr(t[h],e[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function ir(t){return On(t)?t.slice():P(t)||kn(t)||x(t)||Tn(t)?Array.from(t.entries()):t}function or(t){return t[Symbol.iterator]=ar,t}function ar(){return this}["Symbol","Map","Set"].forEach((function(t){void 0===o()[t]&&r("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Zn},$mobx:q});class sr{constructor(t){_defineProperty(this,"atom",void 0),this.atom=t,an(this,{props:Bt})}get props(){return this.atom.props}}class ur{constructor(t){_defineProperty(this,"props",void 0),this.props=t,an(this,{props:Nt.ref,setProps:Ve})}setProps(t){this.props=t}}class lr{constructor(t){_defineProperty(this,"atom",void 0),_defineProperty(this,"gate",void 0),this.atom=new ur(t),this.gate=new sr(this.atom)}setProps(t){this.atom.setProps(t)}}function cr(t){var n,r;return null!==(r=(n=e.useRef(null)).current)&&void 0!==r?r:n.current="function"==typeof t?t():t}const hr=t=>{t&&t.canExecute&&!t.isExecuting&&t.execute()};class dr{constructor(){_defineProperty(this,"controllers",new Set),_defineProperty(this,"isSetupCalled",!1)}addController(t){this.controllers.add(t)}removeController(t){this.controllers.delete(t)}setup(){if(this.isSetupCalled)throw new Error("setup method has already been called.");this.isSetupCalled=!0;const[t,e]=function(){const t=new Set;return[e=>{t.add(e)},()=>{for(const e of t)e();t.clear()}]}();for(const e of this.controllers){var n;const r=null===(n=e.setup)||void 0===n?void 0:n.call(e);r&&t(r)}return e}}class fr{constructor(t){_defineProperty(this,"width",0),_defineProperty(this,"height",0),_defineProperty(this,"cleanup",void 0),_defineProperty(this,"setTarget",(t=>{if(null===t){var e;null===(e=this.cleanup)||void 0===e||e.call(this)}else{const[e,n]=((t,e)=>{let n=null;const r=()=>{null!==n&&(clearTimeout(n),n=null)};return[function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r(),n=setTimeout((()=>t(...o)),e)},r]})(this.setSize,100),r=new ResizeObserver((t=>{const{width:n,height:r}=t[0].contentRect;e(n,r)}));r.observe(t),this.cleanup=()=>{n(),r.disconnect()}}})),t.addController(this),an(this,{width:Nt,height:Nt,setSize:Ve.bound})}setup(){return()=>{var t;return null===(t=this.cleanup)||void 0===t?void 0:t.call(this)}}setSize(t,e){this.width=t,this.height=e}}function vr(t,e,n){let r={};try{t&&(r={...r,...JSON.parse(t)}),e&&(r={...r,...JSON.parse(e)}),0===Object.keys(r).length&&n&&(r={...r,...JSON.parse(n)})}catch(t){console.error("Error parsing chart layout:",t)}return r}function _r(t){if(!t)return{};try{return JSON.parse(t)}catch(t){return console.error("Error parsing chart config:",t),{}}}class pr{constructor(t,e){var n,r,i;_defineProperty(this,"cleanup",void 0),_defineProperty(this,"editorStateGate",void 0),_defineProperty(this,"propsGate",void 0),_defineProperty(this,"sizeProvider",void 0),t.addController(this),this.editorStateGate=e.editorStateGate,this.propsGate=e.propsGate,this.sizeProvider=e.sizeProvider,r={setup:!1},m(n=this)?ze(n,n,r,i):tr((function(){var t=Ln(n,i)[q];if(!n[sn]){var e=Object.getPrototypeOf(n),o=new Set([].concat(k(n),k(e)));o.delete("constructor"),o.delete(q),w(e,sn,o)}n[sn].forEach((function(e){return t.make_(e,!r||!(e in r)||r[e])}))}))}get props(){return this.propsGate.props}get configurationOptions(){return this.props.configurationOptions}get dataAttribute(){var t;return null===(t=this.props.dataAttribute)||void 0===t?void 0:t.value}get dataStatic(){return this.props.dataStatic}get layoutAttribute(){var t;return null===(t=this.props.layoutAttribute)||void 0===t?void 0:t.value}get layoutStatic(){return this.props.layoutStatic}get sampleData(){return this.props.sampleData}get sampleLayout(){return this.props.sampleLayout}setup(){return()=>{var t;return null===(t=this.cleanup)||void 0===t?void 0:t.call(this)}}get chartConfig(){return{displayModeBar:!1,...this.config}}get chartLayout(){var t,e,n;return{...this.layout,width:this.sizeProvider.width,height:this.sizeProvider.height,autosize:!0,font:{family:"Open Sans, sans-serif",size:Math.max(this.sizeProvider.width/1e3*12,8),...this.layout.font},legend:{font:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(t=this.layout.legend)||void 0===t?void 0:t.font},itemwidth:Math.max(this.sizeProvider.width/1e3*10,3),itemsizing:"constant",...this.layout.legend},xaxis:{tickfont:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(e=this.layout.xaxis)||void 0===e?void 0:e.tickfont},...this.layout.xaxis},yaxis:{tickfont:{size:Math.max(this.sizeProvider.width/1e3*10,7),...null===(n=this.layout.yaxis)||void 0===n?void 0:n.tickfont},...this.layout.yaxis},margin:{l:60,r:60,t:60,b:60,pad:10,...this.layout.margin}}}get chartOnClick(){return t=>{var e;this.props.eventDataAttribute?null===(e=this.props.eventDataAttribute)||void 0===e||e.setValue(JSON.stringify(t.points[0].bbox)):hr(this.props.onClick)}}get chartProps(){return{config:this.chartConfig,data:this.data,layout:this.chartLayout,onClick:this.chartOnClick,width:this.sizeProvider.width,height:this.sizeProvider.height}}get config(){return _r(this.configurationOptions)}get data(){return function(t,e,n){let r=[];try{t&&(r=[...r,...JSON.parse(t)]),e&&(r=[...r,...JSON.parse(e)]),!r.length&&n&&(r=[...r,...JSON.parse(n)])}catch(t){console.error("Error parsing chart data:",t)}return r}(this.dataStatic,this.dataAttribute,this.sampleData)}get layout(){return vr(this.layoutStatic,this.layoutAttribute,this.sampleLayout)}get mergedProps(){const t=this.chartProps,e=this.editorStateGate.props;return{...t,config:{...t.config,..._r(e.config)},layout:{...t.layout,...vr(e.layout)},data:t.data.map(((t,n)=>{let r;try{r=JSON.parse(e.data[n])}catch{console.warn("Failed to parse data for trace(".concat(n,")")),r={}}return{...t,...r}}))}}}const{newPlot:br,purge:yr,react:gr}=n;class mr{constructor(t,e){_defineProperty(this,"element",void 0),_defineProperty(this,"plotlyElement",void 0),_defineProperty(this,"data",void 0),_defineProperty(this,"layout",void 0),_defineProperty(this,"config",void 0),this.element=t,this.data=e.data,this.layout=e.layout,this.config=e.config,this.init(e)}init(t){br(this.element,this.data,this.layout,this.config).then((e=>{this.plotlyElement=e,null!=t&&t.onClick&&this.plotlyElement.on("plotly_click",t.onClick)})).catch((t=>{console.error("Error initializing chart:",t)}))}update(t){t.data&&(this.data=t.data),t.layout&&(this.layout=t.layout),t.config&&(this.config=t.config),this.redraw()}redraw(){this.plotlyElement&&gr(this.element,this.data,this.layout,this.config).catch((t=>{console.error("Error updating chart:",t)}))}destroy(){this.plotlyElement&&(yr(this.element),this.plotlyElement=void 0)}}class Or{constructor(t){_defineProperty(this,"cleanup",void 0),_defineProperty(this,"propsProvider",void 0),_defineProperty(this,"setChart",(t=>{if(null===t){var e;null===(e=this.cleanup)||void 0===e||e.call(this)}else{const e=new mr(t,this.propsProvider.mergedProps),n=Le((()=>{e.update(this.propsProvider.mergedProps)}),{delay:100});this.cleanup=()=>{n(),e.destroy()}}})),this.propsProvider=t.propsProvider}}class wr extends dr{constructor(t){super(),_defineProperty(this,"resizeCtrl",void 0),_defineProperty(this,"chartPropsController",void 0),_defineProperty(this,"plotlyController",void 0),this.resizeCtrl=new fr(this),this.chartPropsController=new pr(this,{propsGate:t.propsGate,sizeProvider:this.resizeCtrl,editorStateGate:t.editorStateGate}),this.plotlyController=new Or({propsProvider:this.chartPropsController})}}function Sr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?void 0:1===e.length?e[0]:t=>{for(const n of e)"function"==typeof n?n(t):n&&(n.current=t)}}function Ar(n){var r;const i=cr((()=>new lr(n))),o=cr((()=>new lr({layout:"{}",config:"{}",data:[]}))),{chartPropsController:a,plotlyController:s,resizeCtrl:u}=function(t){const n=cr(t);return e.useEffect((()=>n.setup()),[n]),n}((()=>new wr({propsGate:i.gate,editorStateGate:o.gate}))),l=t.useEditorStore({dataLength:a.data.length,initState:t.initStateFromProps(a.data)});e.useEffect((()=>{i.setProps(n)})),e.useEffect((()=>{o.setProps(l.state)})),e.useEffect((()=>{var t;null!==(t=n.eventDataAttribute)&&void 0!==t&&t.value&&n.onClick&&(hr(n.onClick),n.eventDataAttribute.setValue(""))}),[null===(r=n.eventDataAttribute)||void 0===r?void 0:r.value]);const c={width:"percentage"===n.widthUnit?"".concat(n.width,"%"):"".concat(n.width,"px")};return"percentageOfWidth"===n.heightUnit?c.paddingBottom="percentage"===n.widthUnit?"".concat(n.height,"%"):"".concat(n.width/2,"px"):"pixels"===n.heightUnit?c.height="".concat(n.height,"px"):"percentageOfParent"===n.heightUnit&&(c.height="".concat(n.height,"%")),{containerStyle:c,playgroundData:{store:l,plotData:a.data,layoutOptions:a.layout,configOptions:a.config},ref:Sr(u.setTarget,s.setChart)}}const Pr=t.getPlaygroundContext();return function(n){const{playgroundData:r,ref:i}=Ar(n),o=t.constructWrapperStyle(n);return e.createElement(e.Fragment,null,e.createElement(Pr.Provider,{value:r},n.playground),e.createElement("div",{ref:i,className:"widget-custom-chart",style:o,tabIndex:n.tabIndex}))}}));
